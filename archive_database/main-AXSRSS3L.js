import{$ as Ce,$a as f,$b as Mt,A as vt,Aa as wl,Ab as tn,B as Nn,Ba as Xu,Bb as $n,C as Bo,Ca as Ml,Cb as tp,D as xl,Da as dr,Db as ut,E as Ot,Ea as g,Eb as Jo,F as $u,Fa as V,Fb as ea,G as zu,Ga as El,Gb as ta,H as Vn,Ha as Sl,Hb as pr,I as hn,Ia as Ku,Ib as np,J as bl,Ja as Qu,Jb as Al,K as Bu,Ka as Yo,Kb as ip,L as Hu,La as fi,Lb as Pt,M as Ho,Ma as mi,Mb as rp,N as Ln,Na as Xo,Nb as op,O as yt,Oa as Il,Ob as wt,P as pi,Pa as Un,Pb as gi,Q as Te,Qa as Fe,Qb as hr,R as _e,Ra as ct,Rb as _n,S as $t,Sa as Zu,Sb as ap,T as G,Ta as Ju,Tb as _i,U as be,Ua as P,Ub as sp,V as Gu,Va as Ge,Vb as lp,W as Q,Wa as y,Wb as Ee,X as Cl,Xa as gn,Xb as na,Y as B,Ya as xt,Yb as ia,Z as $,Za as Dl,Zb as ra,_ as or,_a as Ol,_b as Bt,a as N,aa as we,ab as p,ac as cp,b as fe,ba as se,bb as pe,bc as dp,c as Fu,ca as fn,cb as Pe,cc as up,d as ui,da as qu,db as ke,dc as pp,e as Nu,ea as hi,eb as Ko,ec as oa,f as pn,fa as At,fb as U,fc as hp,g as Vu,ga as Ae,gb as k,gc as fp,h as ir,ha as E,hb as m,hc as Xe,i as gl,ia as S,ib as ur,ic as mp,j as _l,ja as Tt,jb as Jt,jc as gp,k as Se,ka as jn,kb as Qo,kc as fr,l as He,la as it,lb as en,lc as aa,m as Ut,ma as Go,mb as bt,n as We,na as ar,nb as Ct,o as Y,oa as sr,ob as rt,oc as Tl,p as Dt,pa as te,pb as v,pc as Pl,q as vl,qa as Le,qb as Z,r as Lu,ra as qo,rb as X,rc as mr,s as J,sa as De,sb as Zo,sc as gr,t as rr,ta as lr,tb as ve,tc as kl,u as _t,ua as Wu,ub as ye,v as zo,va as Wo,vb as xe,w as yl,wa as Yu,wb as Ie,x as ju,xa as zt,xb as Me,y as Uu,ya as mn,yb as dt,z as Ye,za as cr,zb as ep}from"./chunk-MR7FDNFF.js";var vr=class{},ca=class{},ot=class e{constructor(n){this.normalizedNames=new Map,this.lazyUpdate=null,n?typeof n=="string"?this.lazyInit=()=>{this.headers=new Map,n.split(`
`).forEach(t=>{let i=t.indexOf(":");if(i>0){let r=t.slice(0,i),o=r.toLowerCase(),a=t.slice(i+1).trim();this.maybeSetNormalizedName(r,o),this.headers.has(o)?this.headers.get(o).push(a):this.headers.set(o,[a])}})}:typeof Headers<"u"&&n instanceof Headers?(this.headers=new Map,n.forEach((t,i)=>{this.setHeaderEntries(i,t)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(n).forEach(([t,i])=>{this.setHeaderEntries(t,i)})}:this.headers=new Map}has(n){return this.init(),this.headers.has(n.toLowerCase())}get(n){this.init();let t=this.headers.get(n.toLowerCase());return t&&t.length>0?t[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(n){return this.init(),this.headers.get(n.toLowerCase())||null}append(n,t){return this.clone({name:n,value:t,op:"a"})}set(n,t){return this.clone({name:n,value:t,op:"s"})}delete(n,t){return this.clone({name:n,value:t,op:"d"})}maybeSetNormalizedName(n,t){this.normalizedNames.has(t)||this.normalizedNames.set(t,n)}init(){this.lazyInit&&(this.lazyInit instanceof e?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(n=>this.applyUpdate(n)),this.lazyUpdate=null))}copyFrom(n){n.init(),Array.from(n.headers.keys()).forEach(t=>{this.headers.set(t,n.headers.get(t)),this.normalizedNames.set(t,n.normalizedNames.get(t))})}clone(n){let t=new e;return t.lazyInit=this.lazyInit&&this.lazyInit instanceof e?this.lazyInit:this,t.lazyUpdate=(this.lazyUpdate||[]).concat([n]),t}applyUpdate(n){let t=n.name.toLowerCase();switch(n.op){case"a":case"s":let i=n.value;if(typeof i=="string"&&(i=[i]),i.length===0)return;this.maybeSetNormalizedName(n.name,t);let r=(n.op==="a"?this.headers.get(t):void 0)||[];r.push(...i),this.headers.set(t,r);break;case"d":let o=n.value;if(!o)this.headers.delete(t),this.normalizedNames.delete(t);else{let a=this.headers.get(t);if(!a)return;a=a.filter(s=>o.indexOf(s)===-1),a.length===0?(this.headers.delete(t),this.normalizedNames.delete(t)):this.headers.set(t,a)}break}}setHeaderEntries(n,t){let i=(Array.isArray(t)?t:[t]).map(o=>o.toString()),r=n.toLowerCase();this.headers.set(r,i),this.maybeSetNormalizedName(n,r)}forEach(n){this.init(),Array.from(this.normalizedNames.keys()).forEach(t=>n(this.normalizedNames.get(t),this.headers.get(t)))}};var Fl=class{encodeKey(n){return _p(n)}encodeValue(n){return _p(n)}decodeKey(n){return decodeURIComponent(n)}decodeValue(n){return decodeURIComponent(n)}};function v_(e,n){let t=new Map;return e.length>0&&e.replace(/^\?/,"").split("&").forEach(r=>{let o=r.indexOf("="),[a,s]=o==-1?[n.decodeKey(r),""]:[n.decodeKey(r.slice(0,o)),n.decodeValue(r.slice(o+1))],l=t.get(a)||[];l.push(s),t.set(a,l)}),t}var y_=/%(\d[a-f0-9])/gi,x_={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function _p(e){return encodeURIComponent(e).replace(y_,(n,t)=>x_[t]??n)}function sa(e){return`${e}`}var yn=class e{constructor(n={}){if(this.updates=null,this.cloneFrom=null,this.encoder=n.encoder||new Fl,n.fromString){if(n.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=v_(n.fromString,this.encoder)}else n.fromObject?(this.map=new Map,Object.keys(n.fromObject).forEach(t=>{let i=n.fromObject[t],r=Array.isArray(i)?i.map(sa):[sa(i)];this.map.set(t,r)})):this.map=null}has(n){return this.init(),this.map.has(n)}get(n){this.init();let t=this.map.get(n);return t?t[0]:null}getAll(n){return this.init(),this.map.get(n)||null}keys(){return this.init(),Array.from(this.map.keys())}append(n,t){return this.clone({param:n,value:t,op:"a"})}appendAll(n){let t=[];return Object.keys(n).forEach(i=>{let r=n[i];Array.isArray(r)?r.forEach(o=>{t.push({param:i,value:o,op:"a"})}):t.push({param:i,value:r,op:"a"})}),this.clone(t)}set(n,t){return this.clone({param:n,value:t,op:"s"})}delete(n,t){return this.clone({param:n,value:t,op:"d"})}toString(){return this.init(),this.keys().map(n=>{let t=this.encoder.encodeKey(n);return this.map.get(n).map(i=>t+"="+this.encoder.encodeValue(i)).join("&")}).filter(n=>n!=="").join("&")}clone(n){let t=new e({encoder:this.encoder});return t.cloneFrom=this.cloneFrom||this,t.updates=(this.updates||[]).concat(n),t}init(){this.map===null&&(this.map=new Map),this.cloneFrom!==null&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(n=>this.map.set(n,this.cloneFrom.map.get(n))),this.updates.forEach(n=>{switch(n.op){case"a":case"s":let t=(n.op==="a"?this.map.get(n.param):void 0)||[];t.push(sa(n.value)),this.map.set(n.param,t);break;case"d":if(n.value!==void 0){let i=this.map.get(n.param)||[],r=i.indexOf(sa(n.value));r!==-1&&i.splice(r,1),i.length>0?this.map.set(n.param,i):this.map.delete(n.param)}else{this.map.delete(n.param);break}}}),this.cloneFrom=this.updates=null)}};var Nl=class{constructor(){this.map=new Map}set(n,t){return this.map.set(n,t),this}get(n){return this.map.has(n)||this.map.set(n,n.defaultValue()),this.map.get(n)}delete(n){return this.map.delete(n),this}has(n){return this.map.has(n)}keys(){return this.map.keys()}};function b_(e){switch(e){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}function vp(e){return typeof ArrayBuffer<"u"&&e instanceof ArrayBuffer}function yp(e){return typeof Blob<"u"&&e instanceof Blob}function xp(e){return typeof FormData<"u"&&e instanceof FormData}function C_(e){return typeof URLSearchParams<"u"&&e instanceof URLSearchParams}var _r=class e{constructor(n,t,i,r){this.url=t,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=n.toUpperCase();let o;if(b_(this.method)||r?(this.body=i!==void 0?i:null,o=r):o=i,o&&(this.reportProgress=!!o.reportProgress,this.withCredentials=!!o.withCredentials,o.responseType&&(this.responseType=o.responseType),o.headers&&(this.headers=o.headers),o.context&&(this.context=o.context),o.params&&(this.params=o.params),this.transferCache=o.transferCache),this.headers??=new ot,this.context??=new Nl,!this.params)this.params=new yn,this.urlWithParams=t;else{let a=this.params.toString();if(a.length===0)this.urlWithParams=t;else{let s=t.indexOf("?"),l=s===-1?"?":s<t.length-1?"&":"";this.urlWithParams=t+l+a}}}serializeBody(){return this.body===null?null:typeof this.body=="string"||vp(this.body)||yp(this.body)||xp(this.body)||C_(this.body)?this.body:this.body instanceof yn?this.body.toString():typeof this.body=="object"||typeof this.body=="boolean"||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return this.body===null||xp(this.body)?null:yp(this.body)?this.body.type||null:vp(this.body)?null:typeof this.body=="string"?"text/plain":this.body instanceof yn?"application/x-www-form-urlencoded;charset=UTF-8":typeof this.body=="object"||typeof this.body=="number"||typeof this.body=="boolean"?"application/json":null}clone(n={}){let t=n.method||this.method,i=n.url||this.url,r=n.responseType||this.responseType,o=n.transferCache??this.transferCache,a=n.body!==void 0?n.body:this.body,s=n.withCredentials??this.withCredentials,l=n.reportProgress??this.reportProgress,c=n.headers||this.headers,d=n.params||this.params,u=n.context??this.context;return n.setHeaders!==void 0&&(c=Object.keys(n.setHeaders).reduce((h,_)=>h.set(_,n.setHeaders[_]),c)),n.setParams&&(d=Object.keys(n.setParams).reduce((h,_)=>h.set(_,n.setParams[_]),d)),new e(t,i,a,{params:d,headers:c,context:u,reportProgress:l,responseType:r,withCredentials:s,transferCache:o})}},Ht=function(e){return e[e.Sent=0]="Sent",e[e.UploadProgress=1]="UploadProgress",e[e.ResponseHeader=2]="ResponseHeader",e[e.DownloadProgress=3]="DownloadProgress",e[e.Response=4]="Response",e[e.User=5]="User",e}(Ht||{}),yr=class{constructor(n,t=200,i="OK"){this.headers=n.headers||new ot,this.status=n.status!==void 0?n.status:t,this.statusText=n.statusText||i,this.url=n.url||null,this.ok=this.status>=200&&this.status<300}},da=class e extends yr{constructor(n={}){super(n),this.type=Ht.ResponseHeader}clone(n={}){return new e({headers:n.headers||this.headers,status:n.status!==void 0?n.status:this.status,statusText:n.statusText||this.statusText,url:n.url||this.url||void 0})}},zn=class e extends yr{constructor(n={}){super(n),this.type=Ht.Response,this.body=n.body!==void 0?n.body:null}clone(n={}){return new e({body:n.body!==void 0?n.body:this.body,headers:n.headers||this.headers,status:n.status!==void 0?n.status:this.status,statusText:n.statusText||this.statusText,url:n.url||this.url||void 0})}},vn=class extends yr{constructor(n){super(n,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.status>=200&&this.status<300?this.message=`Http failure during parsing for ${n.url||"(unknown url)"}`:this.message=`Http failure response for ${n.url||"(unknown url)"}: ${n.status} ${n.statusText}`,this.error=n.error||null}},Pp=200,w_=204;function Rl(e,n){return{body:n,headers:e.headers,context:e.context,observe:e.observe,params:e.params,reportProgress:e.reportProgress,responseType:e.responseType,withCredentials:e.withCredentials,transferCache:e.transferCache}}var kt=(()=>{class e{constructor(t){this.handler=t}request(t,i,r={}){let o;if(t instanceof _r)o=t;else{let l;r.headers instanceof ot?l=r.headers:l=new ot(r.headers);let c;r.params&&(r.params instanceof yn?c=r.params:c=new yn({fromObject:r.params})),o=new _r(t,i,r.body!==void 0?r.body:null,{headers:l,context:r.context,params:c,reportProgress:r.reportProgress,responseType:r.responseType||"json",withCredentials:r.withCredentials,transferCache:r.transferCache})}let a=Y(o).pipe(Nn(l=>this.handler.handle(l)));if(t instanceof _r||r.observe==="events")return a;let s=a.pipe(Ye(l=>l instanceof zn));switch(r.observe||"body"){case"body":switch(o.responseType){case"arraybuffer":return s.pipe(J(l=>{if(l.body!==null&&!(l.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return l.body}));case"blob":return s.pipe(J(l=>{if(l.body!==null&&!(l.body instanceof Blob))throw new Error("Response is not a Blob.");return l.body}));case"text":return s.pipe(J(l=>{if(l.body!==null&&typeof l.body!="string")throw new Error("Response is not a string.");return l.body}));case"json":default:return s.pipe(J(l=>l.body))}case"response":return s;default:throw new Error(`Unreachable: unhandled observe type ${r.observe}}`)}}delete(t,i={}){return this.request("DELETE",t,i)}get(t,i={}){return this.request("GET",t,i)}head(t,i={}){return this.request("HEAD",t,i)}jsonp(t,i){return this.request("JSONP",t,{params:new yn().append(i,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(t,i={}){return this.request("OPTIONS",t,i)}patch(t,i,r={}){return this.request("PATCH",t,Rl(r,i))}post(t,i,r={}){return this.request("POST",t,Rl(r,i))}put(t,i,r={}){return this.request("PUT",t,Rl(r,i))}static{this.\u0275fac=function(i){return new(i||e)(B(vr))}}static{this.\u0275prov=G({token:e,factory:e.\u0275fac})}}return e})(),M_=/^\)\]\}',?\n/,E_="X-Request-URL";function bp(e){if(e.url)return e.url;let n=E_.toLocaleLowerCase();return e.headers.get(n)}var S_=(()=>{class e{constructor(){this.fetchImpl=$(Vl,{optional:!0})?.fetch??((...t)=>globalThis.fetch(...t)),this.ngZone=$(Le)}handle(t){return new ir(i=>{let r=new AbortController;return this.doRequest(t,r.signal,i).then(Ll,o=>i.error(new vn({error:o}))),()=>r.abort()})}doRequest(t,i,r){return ui(this,null,function*(){let o=this.createRequestInit(t),a;try{let _=this.ngZone.runOutsideAngular(()=>this.fetchImpl(t.urlWithParams,N({signal:i},o)));I_(_),r.next({type:Ht.Sent}),a=yield _}catch(_){r.error(new vn({error:_,status:_.status??0,statusText:_.statusText,url:t.urlWithParams,headers:_.headers}));return}let s=new ot(a.headers),l=a.statusText,c=bp(a)??t.urlWithParams,d=a.status,u=null;if(t.reportProgress&&r.next(new da({headers:s,status:d,statusText:l,url:c})),a.body){let _=a.headers.get("content-length"),x=[],C=a.body.getReader(),w=0,M,O,I=typeof Zone<"u"&&Zone.current;yield this.ngZone.runOutsideAngular(()=>ui(this,null,function*(){for(;;){let{done:D,value:R}=yield C.read();if(D)break;if(x.push(R),w+=R.length,t.reportProgress){O=t.responseType==="text"?(O??"")+(M??=new TextDecoder).decode(R,{stream:!0}):void 0;let L=()=>r.next({type:Ht.DownloadProgress,total:_?+_:void 0,loaded:w,partialText:O});I?I.run(L):L()}}}));let b=this.concatChunks(x,w);try{let D=a.headers.get("Content-Type")??"";u=this.parseBody(t,b,D)}catch(D){r.error(new vn({error:D,headers:new ot(a.headers),status:a.status,statusText:a.statusText,url:bp(a)??t.urlWithParams}));return}}d===0&&(d=u?Pp:0),d>=200&&d<300?(r.next(new zn({body:u,headers:s,status:d,statusText:l,url:c})),r.complete()):r.error(new vn({error:u,headers:s,status:d,statusText:l,url:c}))})}parseBody(t,i,r){switch(t.responseType){case"json":let o=new TextDecoder().decode(i).replace(M_,"");return o===""?null:JSON.parse(o);case"text":return new TextDecoder().decode(i);case"blob":return new Blob([i],{type:r});case"arraybuffer":return i.buffer}}createRequestInit(t){let i={},r=t.withCredentials?"include":void 0;if(t.headers.forEach((o,a)=>i[o]=a.join(",")),t.headers.has("Accept")||(i.Accept="application/json, text/plain, */*"),!t.headers.has("Content-Type")){let o=t.detectContentTypeHeader();o!==null&&(i["Content-Type"]=o)}return{body:t.serializeBody(),method:t.method,headers:i,credentials:r}}concatChunks(t,i){let r=new Uint8Array(i),o=0;for(let a of t)r.set(a,o),o+=a.length;return r}static{this.\u0275fac=function(i){return new(i||e)}}static{this.\u0275prov=G({token:e,factory:e.\u0275fac})}}return e})(),Vl=class{};function Ll(){}function I_(e){e.then(Ll,Ll)}function kp(e,n){return n(e)}function D_(e,n){return(t,i)=>n.intercept(t,{handle:r=>e(r,i)})}function O_(e,n,t){return(i,r)=>At(t,()=>n(i,o=>e(o,r)))}var A_=new Q(""),jl=new Q(""),Rp=new Q(""),Fp=new Q("",{providedIn:"root",factory:()=>!0});function T_(){let e=null;return(n,t)=>{e===null&&(e=($(A_,{optional:!0})??[]).reduceRight(D_,kp));let i=$(sr);if($(Fp)){let o=i.add();return e(n,t).pipe(Vn(()=>i.remove(o)))}else return e(n,t)}}var Cp=(()=>{class e extends vr{constructor(t,i){super(),this.backend=t,this.injector=i,this.chain=null,this.pendingTasks=$(sr),this.contributeToStability=$(Fp)}handle(t){if(this.chain===null){let i=Array.from(new Set([...this.injector.get(jl),...this.injector.get(Rp,[])]));this.chain=i.reduceRight((r,o)=>O_(r,o,this.injector),kp)}if(this.contributeToStability){let i=this.pendingTasks.add();return this.chain(t,r=>this.backend.handle(r)).pipe(Vn(()=>this.pendingTasks.remove(i)))}else return this.chain(t,i=>this.backend.handle(i))}static{this.\u0275fac=function(i){return new(i||e)(B(ca),B(hi))}}static{this.\u0275prov=G({token:e,factory:e.\u0275fac})}}return e})();var P_=/^\)\]\}',?\n/;function k_(e){return"responseURL"in e&&e.responseURL?e.responseURL:/^X-Request-URL:/m.test(e.getAllResponseHeaders())?e.getResponseHeader("X-Request-URL"):null}var wp=(()=>{class e{constructor(t){this.xhrFactory=t}handle(t){if(t.method==="JSONP")throw new _e(-2800,!1);let i=this.xhrFactory;return(i.\u0275loadImpl?We(i.\u0275loadImpl()):Y(null)).pipe(yt(()=>new ir(o=>{let a=i.build();if(a.open(t.method,t.urlWithParams),t.withCredentials&&(a.withCredentials=!0),t.headers.forEach((C,w)=>a.setRequestHeader(C,w.join(","))),t.headers.has("Accept")||a.setRequestHeader("Accept","application/json, text/plain, */*"),!t.headers.has("Content-Type")){let C=t.detectContentTypeHeader();C!==null&&a.setRequestHeader("Content-Type",C)}if(t.responseType){let C=t.responseType.toLowerCase();a.responseType=C!=="json"?C:"text"}let s=t.serializeBody(),l=null,c=()=>{if(l!==null)return l;let C=a.statusText||"OK",w=new ot(a.getAllResponseHeaders()),M=k_(a)||t.url;return l=new da({headers:w,status:a.status,statusText:C,url:M}),l},d=()=>{let{headers:C,status:w,statusText:M,url:O}=c(),I=null;w!==w_&&(I=typeof a.response>"u"?a.responseText:a.response),w===0&&(w=I?Pp:0);let b=w>=200&&w<300;if(t.responseType==="json"&&typeof I=="string"){let D=I;I=I.replace(P_,"");try{I=I!==""?JSON.parse(I):null}catch(R){I=D,b&&(b=!1,I={error:R,text:I})}}b?(o.next(new zn({body:I,headers:C,status:w,statusText:M,url:O||void 0})),o.complete()):o.error(new vn({error:I,headers:C,status:w,statusText:M,url:O||void 0}))},u=C=>{let{url:w}=c(),M=new vn({error:C,status:a.status||0,statusText:a.statusText||"Unknown Error",url:w||void 0});o.error(M)},h=!1,_=C=>{h||(o.next(c()),h=!0);let w={type:Ht.DownloadProgress,loaded:C.loaded};C.lengthComputable&&(w.total=C.total),t.responseType==="text"&&a.responseText&&(w.partialText=a.responseText),o.next(w)},x=C=>{let w={type:Ht.UploadProgress,loaded:C.loaded};C.lengthComputable&&(w.total=C.total),o.next(w)};return a.addEventListener("load",d),a.addEventListener("error",u),a.addEventListener("timeout",u),a.addEventListener("abort",u),t.reportProgress&&(a.addEventListener("progress",_),s!==null&&a.upload&&a.upload.addEventListener("progress",x)),a.send(s),o.next({type:Ht.Sent}),()=>{a.removeEventListener("error",u),a.removeEventListener("abort",u),a.removeEventListener("load",d),a.removeEventListener("timeout",u),t.reportProgress&&(a.removeEventListener("progress",_),s!==null&&a.upload&&a.upload.removeEventListener("progress",x)),a.readyState!==a.DONE&&a.abort()}})))}static{this.\u0275fac=function(i){return new(i||e)(B(aa))}}static{this.\u0275prov=G({token:e,factory:e.\u0275fac})}}return e})(),Np=new Q(""),R_="XSRF-TOKEN",F_=new Q("",{providedIn:"root",factory:()=>R_}),N_="X-XSRF-TOKEN",V_=new Q("",{providedIn:"root",factory:()=>N_}),ua=class{},L_=(()=>{class e{constructor(t,i,r){this.doc=t,this.platform=i,this.cookieName=r,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if(this.platform==="server")return null;let t=this.doc.cookie||"";return t!==this.lastCookieString&&(this.parseCount++,this.lastToken=ia(t,this.cookieName),this.lastCookieString=t),this.lastToken}static{this.\u0275fac=function(i){return new(i||e)(B(Ee),B(zt),B(F_))}}static{this.\u0275prov=G({token:e,factory:e.\u0275fac})}}return e})();function j_(e,n){let t=e.url.toLowerCase();if(!$(Np)||e.method==="GET"||e.method==="HEAD"||t.startsWith("http://")||t.startsWith("https://"))return n(e);let i=$(ua).getToken(),r=$(V_);return i!=null&&!e.headers.has(r)&&(e=e.clone({headers:e.headers.set(r,i)})),n(e)}var Vp=function(e){return e[e.Interceptors=0]="Interceptors",e[e.LegacyInterceptors=1]="LegacyInterceptors",e[e.CustomXsrfConfiguration=2]="CustomXsrfConfiguration",e[e.NoXsrfProtection=3]="NoXsrfProtection",e[e.JsonpSupport=4]="JsonpSupport",e[e.RequestsMadeViaParent=5]="RequestsMadeViaParent",e[e.Fetch=6]="Fetch",e}(Vp||{});function U_(e,n){return{\u0275kind:e,\u0275providers:n}}function $_(...e){let n=[kt,wp,Cp,{provide:vr,useExisting:Cp},{provide:ca,useFactory:()=>$(S_,{optional:!0})??$(wp)},{provide:jl,useValue:j_,multi:!0},{provide:Np,useValue:!0},{provide:ua,useClass:L_}];for(let t of e)n.push(...t.\u0275providers);return fn(n)}var Mp=new Q("");function z_(){return U_(Vp.LegacyInterceptors,[{provide:Mp,useFactory:T_},{provide:jl,useExisting:Mp,multi:!0}])}var xn=(()=>{class e{static{this.\u0275fac=function(i){return new(i||e)}}static{this.\u0275mod=we({type:e})}static{this.\u0275inj=be({providers:[$_(z_())]})}}return e})();var B_=new Q(""),Ep="b",Sp="h",Ip="s",Dp="st",Op="u",Ap="rt",la=new Q(""),H_=["GET","HEAD"];function G_(e,n){let _=$(la),{isCacheActive:t}=_,i=Fu(_,["isCacheActive"]),{transferCache:r,method:o}=e;if(!t||r===!1||o==="POST"&&!i.includePostRequests&&!r||o!=="POST"&&!H_.includes(o)||!i.includeRequestsWithAuthHeaders&&q_(e)||i.filter?.(e)===!1)return n(e);let a=$(wl),s=$(B_,{optional:!0}),l=fr($(zt));if(s&&!l)throw new _e(2803,!1);let c=l&&s?K_(e.url,s):e.url,d=Y_(e,c),u=a.get(d,null),h=i.includeHeaders;if(typeof r=="object"&&r.includeHeaders&&(h=r.includeHeaders),u){let{[Ep]:x,[Ap]:C,[Sp]:w,[Ip]:M,[Dp]:O,[Op]:I}=u,b=x;switch(C){case"arraybuffer":b=new TextEncoder().encode(x).buffer;break;case"blob":b=new Blob([x]);break}let D=new ot(w);return Y(new zn({body:b,headers:D,status:M,statusText:O,url:I}))}return n(e).pipe(Te(x=>{x instanceof zn&&l&&a.set(d,{[Ep]:x.body,[Sp]:W_(x.headers,h),[Ip]:x.status,[Dp]:x.statusText,[Op]:c,[Ap]:e.responseType})}))}function q_(e){return e.headers.has("authorization")||e.headers.has("proxy-authorization")}function W_(e,n){if(!n)return{};let t={};for(let i of n){let r=e.getAll(i);r!==null&&(t[i]=r)}return t}function Tp(e){return[...e.keys()].sort().map(n=>`${n}=${e.getAll(n)}`).join("&")}function Y_(e,n){let{params:t,method:i,responseType:r}=e,o=Tp(t),a=e.serializeBody();a instanceof URLSearchParams?a=Tp(a):typeof a!="string"&&(a="");let s=[i,r,n,a,o].join("|"),l=X_(s);return l}function X_(e){let n=0;for(let t of e)n=Math.imul(31,n)+t.charCodeAt(0)<<0;return n+=2147483648,n.toString()}function Lp(e){return[{provide:la,useFactory:()=>(Xo("NgHttpTransferCache"),N({isCacheActive:!0},e))},{provide:Rp,useValue:G_,multi:!0,deps:[wl,la]},{provide:ta,multi:!0,useFactory:()=>{let n=$(pr),t=$(la);return()=>{np(n).then(()=>{t.isCacheActive=!1})}}}]}function K_(e,n){let t=new URL(e,"resolve://").origin,i=n[t];return i?e.replace(t,i):e}var zl=class extends lp{constructor(){super(...arguments),this.supportsDOMEvents=!0}},Bl=class e extends zl{static makeCurrent(){sp(new e)}onAndCancel(n,t,i){return n.addEventListener(t,i),()=>{n.removeEventListener(t,i)}}dispatchEvent(n,t){n.dispatchEvent(t)}remove(n){n.remove()}createElement(n,t){return t=t||this.getDefaultDocument(),t.createElement(n)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(n){return n.nodeType===Node.ELEMENT_NODE}isShadowRoot(n){return n instanceof DocumentFragment}getGlobalEventTarget(n,t){return t==="window"?window:t==="document"?n:t==="body"?n.body:null}getBaseHref(n){let t=J_();return t==null?null:ev(t)}resetBaseElement(){br=null}getUserAgent(){return window.navigator.userAgent}getCookie(n){return ia(document.cookie,n)}},br=null;function J_(){return br=br||document.querySelector("base"),br?br.getAttribute("href"):null}function ev(e){return new URL(e,document.baseURI).pathname}var tv=(()=>{class e{build(){return new XMLHttpRequest}static{this.\u0275fac=function(i){return new(i||e)}}static{this.\u0275prov=G({token:e,factory:e.\u0275fac})}}return e})(),Hl=new Q(""),$p=(()=>{class e{constructor(t,i){this._zone=i,this._eventNameToPlugin=new Map,t.forEach(r=>{r.manager=this}),this._plugins=t.slice().reverse()}addEventListener(t,i,r){return this._findPluginFor(i).addEventListener(t,i,r)}getZone(){return this._zone}_findPluginFor(t){let i=this._eventNameToPlugin.get(t);if(i)return i;if(i=this._plugins.find(o=>o.supports(t)),!i)throw new _e(5101,!1);return this._eventNameToPlugin.set(t,i),i}static{this.\u0275fac=function(i){return new(i||e)(B(Hl),B(Le))}}static{this.\u0275prov=G({token:e,factory:e.\u0275fac})}}return e})(),pa=class{constructor(n){this._doc=n}},Ul="ng-app-id",zp=(()=>{class e{constructor(t,i,r,o={}){this.doc=t,this.appId=i,this.nonce=r,this.platformId=o,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=fr(o),this.resetHostNodes()}addStyles(t){for(let i of t)this.changeUsageCount(i,1)===1&&this.onStyleAdded(i)}removeStyles(t){for(let i of t)this.changeUsageCount(i,-1)<=0&&this.onStyleRemoved(i)}ngOnDestroy(){let t=this.styleNodesInDOM;t&&(t.forEach(i=>i.remove()),t.clear());for(let i of this.getAllStyles())this.onStyleRemoved(i);this.resetHostNodes()}addHost(t){this.hostNodes.add(t);for(let i of this.getAllStyles())this.addStyleToHost(t,i)}removeHost(t){this.hostNodes.delete(t)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(t){for(let i of this.hostNodes)this.addStyleToHost(i,t)}onStyleRemoved(t){let i=this.styleRef;i.get(t)?.elements?.forEach(r=>r.remove()),i.delete(t)}collectServerRenderedStyles(){let t=this.doc.head?.querySelectorAll(`style[${Ul}="${this.appId}"]`);if(t?.length){let i=new Map;return t.forEach(r=>{r.textContent!=null&&i.set(r.textContent,r)}),i}return null}changeUsageCount(t,i){let r=this.styleRef;if(r.has(t)){let o=r.get(t);return o.usage+=i,o.usage}return r.set(t,{usage:i,elements:[]}),i}getStyleElement(t,i){let r=this.styleNodesInDOM,o=r?.get(i);if(o?.parentNode===t)return r.delete(i),o.removeAttribute(Ul),o;{let a=this.doc.createElement("style");return this.nonce&&a.setAttribute("nonce",this.nonce),a.textContent=i,this.platformIsServer&&a.setAttribute(Ul,this.appId),t.appendChild(a),a}}addStyleToHost(t,i){let r=this.getStyleElement(t,i),o=this.styleRef,a=o.get(i)?.elements;a?a.push(r):o.set(i,{elements:[r],usage:1})}resetHostNodes(){let t=this.hostNodes;t.clear(),t.add(this.doc.head)}static{this.\u0275fac=function(i){return new(i||e)(B(Ee),B(Wo),B(cr,8),B(zt))}}static{this.\u0275prov=G({token:e,factory:e.\u0275fac})}}return e})(),$l={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},Yl=/%COMP%/g,Bp="%COMP%",nv=`_nghost-${Bp}`,iv=`_ngcontent-${Bp}`,rv=!0,ov=new Q("",{providedIn:"root",factory:()=>rv});function av(e){return iv.replace(Yl,e)}function sv(e){return nv.replace(Yl,e)}function Hp(e,n){return n.map(t=>t.replace(Yl,e))}var ha=(()=>{class e{constructor(t,i,r,o,a,s,l,c=null){this.eventManager=t,this.sharedStylesHost=i,this.appId=r,this.removeStylesOnCompDestroy=o,this.doc=a,this.platformId=s,this.ngZone=l,this.nonce=c,this.rendererByCompId=new Map,this.platformIsServer=fr(s),this.defaultRenderer=new Cr(t,a,l,this.platformIsServer)}createRenderer(t,i){if(!t||!i)return this.defaultRenderer;this.platformIsServer&&i.encapsulation===or.ShadowDom&&(i=fe(N({},i),{encapsulation:or.Emulated}));let r=this.getOrCreateRenderer(t,i);return r instanceof fa?r.applyToHost(t):r instanceof wr&&r.applyStyles(),r}getOrCreateRenderer(t,i){let r=this.rendererByCompId,o=r.get(i.id);if(!o){let a=this.doc,s=this.ngZone,l=this.eventManager,c=this.sharedStylesHost,d=this.removeStylesOnCompDestroy,u=this.platformIsServer;switch(i.encapsulation){case or.Emulated:o=new fa(l,c,i,this.appId,d,a,s,u);break;case or.ShadowDom:return new Gl(l,c,t,i,a,s,this.nonce,u);default:o=new wr(l,c,i,d,a,s,u);break}r.set(i.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}static{this.\u0275fac=function(i){return new(i||e)(B($p),B(zp),B(Wo),B(ov),B(Ee),B(zt),B(Le),B(cr))}}static{this.\u0275prov=G({token:e,factory:e.\u0275fac})}}return e})(),Cr=class{constructor(n,t,i,r){this.eventManager=n,this.doc=t,this.ngZone=i,this.platformIsServer=r,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(n,t){return t?this.doc.createElementNS($l[t]||t,n):this.doc.createElement(n)}createComment(n){return this.doc.createComment(n)}createText(n){return this.doc.createTextNode(n)}appendChild(n,t){(jp(n)?n.content:n).appendChild(t)}insertBefore(n,t,i){n&&(jp(n)?n.content:n).insertBefore(t,i)}removeChild(n,t){t.remove()}selectRootElement(n,t){let i=typeof n=="string"?this.doc.querySelector(n):n;if(!i)throw new _e(-5104,!1);return t||(i.textContent=""),i}parentNode(n){return n.parentNode}nextSibling(n){return n.nextSibling}setAttribute(n,t,i,r){if(r){t=r+":"+t;let o=$l[r];o?n.setAttributeNS(o,t,i):n.setAttribute(t,i)}else n.setAttribute(t,i)}removeAttribute(n,t,i){if(i){let r=$l[i];r?n.removeAttributeNS(r,t):n.removeAttribute(`${i}:${t}`)}else n.removeAttribute(t)}addClass(n,t){n.classList.add(t)}removeClass(n,t){n.classList.remove(t)}setStyle(n,t,i,r){r&(dr.DashCase|dr.Important)?n.style.setProperty(t,i,r&dr.Important?"important":""):n.style[t]=i}removeStyle(n,t,i){i&dr.DashCase?n.style.removeProperty(t):n.style[t]=""}setProperty(n,t,i){n!=null&&(n[t]=i)}setValue(n,t){n.nodeValue=t}listen(n,t,i){if(typeof n=="string"&&(n=_i().getGlobalEventTarget(this.doc,n),!n))throw new Error(`Unsupported event target ${n} for event ${t}`);return this.eventManager.addEventListener(n,t,this.decoratePreventDefault(i))}decoratePreventDefault(n){return t=>{if(t==="__ngUnwrap__")return n;(this.platformIsServer?this.ngZone.runGuarded(()=>n(t)):n(t))===!1&&t.preventDefault()}}};function jp(e){return e.tagName==="TEMPLATE"&&e.content!==void 0}var Gl=class extends Cr{constructor(n,t,i,r,o,a,s,l){super(n,o,a,l),this.sharedStylesHost=t,this.hostEl=i,this.shadowRoot=i.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let c=Hp(r.id,r.styles);for(let d of c){let u=document.createElement("style");s&&u.setAttribute("nonce",s),u.textContent=d,this.shadowRoot.appendChild(u)}}nodeOrShadowRoot(n){return n===this.hostEl?this.shadowRoot:n}appendChild(n,t){return super.appendChild(this.nodeOrShadowRoot(n),t)}insertBefore(n,t,i){return super.insertBefore(this.nodeOrShadowRoot(n),t,i)}removeChild(n,t){return super.removeChild(null,t)}parentNode(n){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(n)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},wr=class extends Cr{constructor(n,t,i,r,o,a,s,l){super(n,o,a,s),this.sharedStylesHost=t,this.removeStylesOnCompDestroy=r,this.styles=l?Hp(l,i.styles):i.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}},fa=class extends wr{constructor(n,t,i,r,o,a,s,l){let c=r+"-"+i.id;super(n,t,i,o,a,s,l,c),this.contentAttr=av(c),this.hostAttr=sv(c)}applyToHost(n){this.applyStyles(),this.setAttribute(n,this.hostAttr,"")}createElement(n,t){let i=super.createElement(n,t);return super.setAttribute(i,this.contentAttr,""),i}},lv=(()=>{class e extends pa{constructor(t){super(t)}supports(t){return!0}addEventListener(t,i,r){return t.addEventListener(i,r,!1),()=>this.removeEventListener(t,i,r)}removeEventListener(t,i,r){return t.removeEventListener(i,r)}static{this.\u0275fac=function(i){return new(i||e)(B(Ee))}}static{this.\u0275prov=G({token:e,factory:e.\u0275fac})}}return e})(),Up=["alt","control","meta","shift"],cv={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},dv={alt:e=>e.altKey,control:e=>e.ctrlKey,meta:e=>e.metaKey,shift:e=>e.shiftKey},uv=(()=>{class e extends pa{constructor(t){super(t)}supports(t){return e.parseEventName(t)!=null}addEventListener(t,i,r){let o=e.parseEventName(i),a=e.eventCallback(o.fullKey,r,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>_i().onAndCancel(t,o.domEventName,a))}static parseEventName(t){let i=t.toLowerCase().split("."),r=i.shift();if(i.length===0||!(r==="keydown"||r==="keyup"))return null;let o=e._normalizeKey(i.pop()),a="",s=i.indexOf("code");if(s>-1&&(i.splice(s,1),a="code."),Up.forEach(c=>{let d=i.indexOf(c);d>-1&&(i.splice(d,1),a+=c+".")}),a+=o,i.length!=0||o.length===0)return null;let l={};return l.domEventName=r,l.fullKey=a,l}static matchEventFullKeyCode(t,i){let r=cv[t.key]||t.key,o="";return i.indexOf("code.")>-1&&(r=t.code,o="code."),r==null||!r?!1:(r=r.toLowerCase(),r===" "?r="space":r==="."&&(r="dot"),Up.forEach(a=>{if(a!==r){let s=dv[a];s(t)&&(o+=a+".")}}),o+=r,o===i)}static eventCallback(t,i,r){return o=>{e.matchEventFullKeyCode(o,t)&&r.runGuarded(()=>i(o))}}static _normalizeKey(t){return t==="esc"?"escape":t}static{this.\u0275fac=function(i){return new(i||e)(B(Ee))}}static{this.\u0275prov=G({token:e,factory:e.\u0275fac})}}return e})();function Gp(e,n){return rp(N({rootComponent:e},pv(n)))}function pv(e){return{appProviders:[..._v,...e?.providers??[]],platformProviders:gv}}function hv(){Bl.makeCurrent()}function fv(){return new qo}function mv(){return Wu(document),document}var gv=[{provide:zt,useValue:mp},{provide:Yu,useValue:hv,multi:!0},{provide:Ee,useFactory:mv,deps:[]}];var _v=[{provide:qu,useValue:"root"},{provide:qo,useFactory:fv,deps:[]},{provide:Hl,useClass:lv,multi:!0,deps:[Ee,Le,zt]},{provide:Hl,useClass:uv,multi:!0,deps:[Ee]},ha,zp,$p,{provide:Yo,useExisting:ha},{provide:aa,useClass:tv,deps:[]},[]];var qp=(()=>{class e{constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}static{this.\u0275fac=function(i){return new(i||e)(B(Ee))}}static{this.\u0275prov=G({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();var ql=function(e){return e[e.NoHttpTransferCache=0]="NoHttpTransferCache",e[e.HttpTransferCacheOptions=1]="HttpTransferCacheOptions",e[e.I18nSupport=2]="I18nSupport",e[e.EventReplay=3]="EventReplay",e}(ql||{});function Wp(...e){let n=[],t=new Set,i=t.has(ql.HttpTransferCacheOptions);for(let{\u0275providers:r,\u0275kind:o}of e)t.add(o),r.length&&n.push(r);return fn([[],op(),t.has(ql.NoHttpTransferCache)||i?[]:Lp({}),n])}var ee="primary",Ur=Symbol("RouteTitle"),Jl=class{constructor(n){this.params=n||{}}has(n){return Object.prototype.hasOwnProperty.call(this.params,n)}get(n){if(this.has(n)){let t=this.params[n];return Array.isArray(t)?t[0]:t}return null}getAll(n){if(this.has(n)){let t=this.params[n];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}};function Mi(e){return new Jl(e)}function xv(e,n,t){let i=t.path.split("/");if(i.length>e.length||t.pathMatch==="full"&&(n.hasChildren()||i.length<e.length))return null;let r={};for(let o=0;o<i.length;o++){let a=i[o],s=e[o];if(a[0]===":")r[a.substring(1)]=s;else if(a!==s.path)return null}return{consumed:e.slice(0,i.length),posParams:r}}function bv(e,n){if(e.length!==n.length)return!1;for(let t=0;t<e.length;++t)if(!Gt(e[t],n[t]))return!1;return!0}function Gt(e,n){let t=e?ec(e):void 0,i=n?ec(n):void 0;if(!t||!i||t.length!=i.length)return!1;let r;for(let o=0;o<t.length;o++)if(r=t[o],!th(e[r],n[r]))return!1;return!0}function ec(e){return[...Object.keys(e),...Object.getOwnPropertySymbols(e)]}function th(e,n){if(Array.isArray(e)&&Array.isArray(n)){if(e.length!==n.length)return!1;let t=[...e].sort(),i=[...n].sort();return t.every((r,o)=>i[o]===r)}else return e===n}function nh(e){return e.length>0?e[e.length-1]:null}function bn(e){return vl(e)?e:ea(e)?We(Promise.resolve(e)):Y(e)}var Cv={exact:rh,subset:oh},ih={exact:wv,subset:Mv,ignored:()=>!0};function Yp(e,n,t){return Cv[t.paths](e.root,n.root,t.matrixParams)&&ih[t.queryParams](e.queryParams,n.queryParams)&&!(t.fragment==="exact"&&e.fragment!==n.fragment)}function wv(e,n){return Gt(e,n)}function rh(e,n,t){if(!Hn(e.segments,n.segments)||!_a(e.segments,n.segments,t)||e.numberOfChildren!==n.numberOfChildren)return!1;for(let i in n.children)if(!e.children[i]||!rh(e.children[i],n.children[i],t))return!1;return!0}function Mv(e,n){return Object.keys(n).length<=Object.keys(e).length&&Object.keys(n).every(t=>th(e[t],n[t]))}function oh(e,n,t){return ah(e,n,n.segments,t)}function ah(e,n,t,i){if(e.segments.length>t.length){let r=e.segments.slice(0,t.length);return!(!Hn(r,t)||n.hasChildren()||!_a(r,t,i))}else if(e.segments.length===t.length){if(!Hn(e.segments,t)||!_a(e.segments,t,i))return!1;for(let r in n.children)if(!e.children[r]||!oh(e.children[r],n.children[r],i))return!1;return!0}else{let r=t.slice(0,e.segments.length),o=t.slice(e.segments.length);return!Hn(e.segments,r)||!_a(e.segments,r,i)||!e.children[ee]?!1:ah(e.children[ee],n,o,i)}}function _a(e,n,t){return n.every((i,r)=>ih[t](e[r].parameters,i.parameters))}var rn=class{constructor(n=new he([],{}),t={},i=null){this.root=n,this.queryParams=t,this.fragment=i}get queryParamMap(){return this._queryParamMap??=Mi(this.queryParams),this._queryParamMap}toString(){return Iv.serialize(this)}},he=class{constructor(n,t){this.segments=n,this.children=t,this.parent=null,Object.values(t).forEach(i=>i.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return va(this)}},Bn=class{constructor(n,t){this.path=n,this.parameters=t}get parameterMap(){return this._parameterMap??=Mi(this.parameters),this._parameterMap}toString(){return lh(this)}};function Ev(e,n){return Hn(e,n)&&e.every((t,i)=>Gt(t.parameters,n[i].parameters))}function Hn(e,n){return e.length!==n.length?!1:e.every((t,i)=>t.path===n[i].path)}function Sv(e,n){let t=[];return Object.entries(e.children).forEach(([i,r])=>{i===ee&&(t=t.concat(n(r,i)))}),Object.entries(e.children).forEach(([i,r])=>{i!==ee&&(t=t.concat(n(r,i)))}),t}var Sc=(()=>{class e{static{this.\u0275fac=function(i){return new(i||e)}}static{this.\u0275prov=G({token:e,factory:()=>new Ar,providedIn:"root"})}}return e})(),Ar=class{parse(n){let t=new nc(n);return new rn(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(n){let t=`/${Mr(n.root,!0)}`,i=Av(n.queryParams),r=typeof n.fragment=="string"?`#${Dv(n.fragment)}`:"";return`${t}${i}${r}`}},Iv=new Ar;function va(e){return e.segments.map(n=>lh(n)).join("/")}function Mr(e,n){if(!e.hasChildren())return va(e);if(n){let t=e.children[ee]?Mr(e.children[ee],!1):"",i=[];return Object.entries(e.children).forEach(([r,o])=>{r!==ee&&i.push(`${r}:${Mr(o,!1)}`)}),i.length>0?`${t}(${i.join("//")})`:t}else{let t=Sv(e,(i,r)=>r===ee?[Mr(e.children[ee],!1)]:[`${r}:${Mr(i,!1)}`]);return Object.keys(e.children).length===1&&e.children[ee]!=null?`${va(e)}/${t[0]}`:`${va(e)}/(${t.join("//")})`}}function sh(e){return encodeURIComponent(e).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function ma(e){return sh(e).replace(/%3B/gi,";")}function Dv(e){return encodeURI(e)}function tc(e){return sh(e).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function ya(e){return decodeURIComponent(e)}function Xp(e){return ya(e.replace(/\+/g,"%20"))}function lh(e){return`${tc(e.path)}${Ov(e.parameters)}`}function Ov(e){return Object.entries(e).map(([n,t])=>`;${tc(n)}=${tc(t)}`).join("")}function Av(e){let n=Object.entries(e).map(([t,i])=>Array.isArray(i)?i.map(r=>`${ma(t)}=${ma(r)}`).join("&"):`${ma(t)}=${ma(i)}`).filter(t=>t);return n.length?`?${n.join("&")}`:""}var Tv=/^[^\/()?;#]+/;function Xl(e){let n=e.match(Tv);return n?n[0]:""}var Pv=/^[^\/()?;=#]+/;function kv(e){let n=e.match(Pv);return n?n[0]:""}var Rv=/^[^=?&#]+/;function Fv(e){let n=e.match(Rv);return n?n[0]:""}var Nv=/^[^&#]+/;function Vv(e){let n=e.match(Nv);return n?n[0]:""}var nc=class{constructor(n){this.url=n,this.remaining=n}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new he([],{}):new he([],this.parseChildren())}parseQueryParams(){let n={};if(this.consumeOptional("?"))do this.parseQueryParam(n);while(this.consumeOptional("&"));return n}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let n=[];for(this.peekStartsWith("(")||n.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),n.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let i={};return this.peekStartsWith("(")&&(i=this.parseParens(!1)),(n.length>0||Object.keys(t).length>0)&&(i[ee]=new he(n,t)),i}parseSegment(){let n=Xl(this.remaining);if(n===""&&this.peekStartsWith(";"))throw new _e(4009,!1);return this.capture(n),new Bn(ya(n),this.parseMatrixParams())}parseMatrixParams(){let n={};for(;this.consumeOptional(";");)this.parseParam(n);return n}parseParam(n){let t=kv(this.remaining);if(!t)return;this.capture(t);let i="";if(this.consumeOptional("=")){let r=Xl(this.remaining);r&&(i=r,this.capture(i))}n[ya(t)]=ya(i)}parseQueryParam(n){let t=Fv(this.remaining);if(!t)return;this.capture(t);let i="";if(this.consumeOptional("=")){let a=Vv(this.remaining);a&&(i=a,this.capture(i))}let r=Xp(t),o=Xp(i);if(n.hasOwnProperty(r)){let a=n[r];Array.isArray(a)||(a=[a],n[r]=a),a.push(o)}else n[r]=o}parseParens(n){let t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let i=Xl(this.remaining),r=this.remaining[i.length];if(r!=="/"&&r!==")"&&r!==";")throw new _e(4010,!1);let o;i.indexOf(":")>-1?(o=i.slice(0,i.indexOf(":")),this.capture(o),this.capture(":")):n&&(o=ee);let a=this.parseChildren();t[o]=Object.keys(a).length===1?a[ee]:new he([],a),this.consumeOptional("//")}return t}peekStartsWith(n){return this.remaining.startsWith(n)}consumeOptional(n){return this.peekStartsWith(n)?(this.remaining=this.remaining.substring(n.length),!0):!1}capture(n){if(!this.consumeOptional(n))throw new _e(4011,!1)}};function ch(e){return e.segments.length>0?new he([],{[ee]:e}):e}function dh(e){let n={};for(let[i,r]of Object.entries(e.children)){let o=dh(r);if(i===ee&&o.segments.length===0&&o.hasChildren())for(let[a,s]of Object.entries(o.children))n[a]=s;else(o.segments.length>0||o.hasChildren())&&(n[i]=o)}let t=new he(e.segments,n);return Lv(t)}function Lv(e){if(e.numberOfChildren===1&&e.children[ee]){let n=e.children[ee];return new he(e.segments.concat(n.segments),n.children)}return e}function Tr(e){return e instanceof rn}function jv(e,n,t=null,i=null){let r=uh(e);return ph(r,n,t,i)}function uh(e){let n;function t(o){let a={};for(let l of o.children){let c=t(l);a[l.outlet]=c}let s=new he(o.url,a);return o===e&&(n=s),s}let i=t(e.root),r=ch(i);return n??r}function ph(e,n,t,i){let r=e;for(;r.parent;)r=r.parent;if(n.length===0)return Kl(r,r,r,t,i);let o=Uv(n);if(o.toRoot())return Kl(r,r,new he([],{}),t,i);let a=$v(o,r,e),s=a.processChildren?Ir(a.segmentGroup,a.index,o.commands):fh(a.segmentGroup,a.index,o.commands);return Kl(r,a.segmentGroup,s,t,i)}function xa(e){return typeof e=="object"&&e!=null&&!e.outlets&&!e.segmentPath}function Pr(e){return typeof e=="object"&&e!=null&&e.outlets}function Kl(e,n,t,i,r){let o={};i&&Object.entries(i).forEach(([l,c])=>{o[l]=Array.isArray(c)?c.map(d=>`${d}`):`${c}`});let a;e===n?a=t:a=hh(e,n,t);let s=ch(dh(a));return new rn(s,o,r)}function hh(e,n,t){let i={};return Object.entries(e.children).forEach(([r,o])=>{o===n?i[r]=t:i[r]=hh(o,n,t)}),new he(e.segments,i)}var ba=class{constructor(n,t,i){if(this.isAbsolute=n,this.numberOfDoubleDots=t,this.commands=i,n&&i.length>0&&xa(i[0]))throw new _e(4003,!1);let r=i.find(Pr);if(r&&r!==nh(i))throw new _e(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function Uv(e){if(typeof e[0]=="string"&&e.length===1&&e[0]==="/")return new ba(!0,0,e);let n=0,t=!1,i=e.reduce((r,o,a)=>{if(typeof o=="object"&&o!=null){if(o.outlets){let s={};return Object.entries(o.outlets).forEach(([l,c])=>{s[l]=typeof c=="string"?c.split("/"):c}),[...r,{outlets:s}]}if(o.segmentPath)return[...r,o.segmentPath]}return typeof o!="string"?[...r,o]:a===0?(o.split("/").forEach((s,l)=>{l==0&&s==="."||(l==0&&s===""?t=!0:s===".."?n++:s!=""&&r.push(s))}),r):[...r,o]},[]);return new ba(t,n,i)}var bi=class{constructor(n,t,i){this.segmentGroup=n,this.processChildren=t,this.index=i}};function $v(e,n,t){if(e.isAbsolute)return new bi(n,!0,0);if(!t)return new bi(n,!1,NaN);if(t.parent===null)return new bi(t,!0,0);let i=xa(e.commands[0])?0:1,r=t.segments.length-1+i;return zv(t,r,e.numberOfDoubleDots)}function zv(e,n,t){let i=e,r=n,o=t;for(;o>r;){if(o-=r,i=i.parent,!i)throw new _e(4005,!1);r=i.segments.length}return new bi(i,!1,r-o)}function Bv(e){return Pr(e[0])?e[0].outlets:{[ee]:e}}function fh(e,n,t){if(e??=new he([],{}),e.segments.length===0&&e.hasChildren())return Ir(e,n,t);let i=Hv(e,n,t),r=t.slice(i.commandIndex);if(i.match&&i.pathIndex<e.segments.length){let o=new he(e.segments.slice(0,i.pathIndex),{});return o.children[ee]=new he(e.segments.slice(i.pathIndex),e.children),Ir(o,0,r)}else return i.match&&r.length===0?new he(e.segments,{}):i.match&&!e.hasChildren()?ic(e,n,t):i.match?Ir(e,0,r):ic(e,n,t)}function Ir(e,n,t){if(t.length===0)return new he(e.segments,{});{let i=Bv(t),r={};if(Object.keys(i).some(o=>o!==ee)&&e.children[ee]&&e.numberOfChildren===1&&e.children[ee].segments.length===0){let o=Ir(e.children[ee],n,t);return new he(e.segments,o.children)}return Object.entries(i).forEach(([o,a])=>{typeof a=="string"&&(a=[a]),a!==null&&(r[o]=fh(e.children[o],n,a))}),Object.entries(e.children).forEach(([o,a])=>{i[o]===void 0&&(r[o]=a)}),new he(e.segments,r)}}function Hv(e,n,t){let i=0,r=n,o={match:!1,pathIndex:0,commandIndex:0};for(;r<e.segments.length;){if(i>=t.length)return o;let a=e.segments[r],s=t[i];if(Pr(s))break;let l=`${s}`,c=i<t.length-1?t[i+1]:null;if(r>0&&l===void 0)break;if(l&&c&&typeof c=="object"&&c.outlets===void 0){if(!Qp(l,c,a))return o;i+=2}else{if(!Qp(l,{},a))return o;i++}r++}return{match:!0,pathIndex:r,commandIndex:i}}function ic(e,n,t){let i=e.segments.slice(0,n),r=0;for(;r<t.length;){let o=t[r];if(Pr(o)){let l=Gv(o.outlets);return new he(i,l)}if(r===0&&xa(t[0])){let l=e.segments[n];i.push(new Bn(l.path,Kp(t[0]))),r++;continue}let a=Pr(o)?o.outlets[ee]:`${o}`,s=r<t.length-1?t[r+1]:null;a&&s&&xa(s)?(i.push(new Bn(a,Kp(s))),r+=2):(i.push(new Bn(a,{})),r++)}return new he(i,{})}function Gv(e){let n={};return Object.entries(e).forEach(([t,i])=>{typeof i=="string"&&(i=[i]),i!==null&&(n[t]=ic(new he([],{}),0,i))}),n}function Kp(e){let n={};return Object.entries(e).forEach(([t,i])=>n[t]=`${i}`),n}function Qp(e,n,t){return e==t.path&&Gt(n,t.parameters)}var Dr="imperative",je=function(e){return e[e.NavigationStart=0]="NavigationStart",e[e.NavigationEnd=1]="NavigationEnd",e[e.NavigationCancel=2]="NavigationCancel",e[e.NavigationError=3]="NavigationError",e[e.RoutesRecognized=4]="RoutesRecognized",e[e.ResolveStart=5]="ResolveStart",e[e.ResolveEnd=6]="ResolveEnd",e[e.GuardsCheckStart=7]="GuardsCheckStart",e[e.GuardsCheckEnd=8]="GuardsCheckEnd",e[e.RouteConfigLoadStart=9]="RouteConfigLoadStart",e[e.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",e[e.ChildActivationStart=11]="ChildActivationStart",e[e.ChildActivationEnd=12]="ChildActivationEnd",e[e.ActivationStart=13]="ActivationStart",e[e.ActivationEnd=14]="ActivationEnd",e[e.Scroll=15]="Scroll",e[e.NavigationSkipped=16]="NavigationSkipped",e}(je||{}),Et=class{constructor(n,t){this.id=n,this.url=t}},kr=class extends Et{constructor(n,t,i="imperative",r=null){super(n,t),this.type=je.NavigationStart,this.navigationTrigger=i,this.restoredState=r}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},Gn=class extends Et{constructor(n,t,i){super(n,t),this.urlAfterRedirects=i,this.type=je.NavigationEnd}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},ht=function(e){return e[e.Redirect=0]="Redirect",e[e.SupersededByNewNavigation=1]="SupersededByNewNavigation",e[e.NoDataFromResolver=2]="NoDataFromResolver",e[e.GuardRejected=3]="GuardRejected",e}(ht||{}),rc=function(e){return e[e.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",e[e.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",e}(rc||{}),nn=class extends Et{constructor(n,t,i,r){super(n,t),this.reason=i,this.code=r,this.type=je.NavigationCancel}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},qn=class extends Et{constructor(n,t,i,r){super(n,t),this.reason=i,this.code=r,this.type=je.NavigationSkipped}},Rr=class extends Et{constructor(n,t,i,r){super(n,t),this.error=i,this.target=r,this.type=je.NavigationError}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},Ca=class extends Et{constructor(n,t,i,r){super(n,t),this.urlAfterRedirects=i,this.state=r,this.type=je.RoutesRecognized}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},oc=class extends Et{constructor(n,t,i,r){super(n,t),this.urlAfterRedirects=i,this.state=r,this.type=je.GuardsCheckStart}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},ac=class extends Et{constructor(n,t,i,r,o){super(n,t),this.urlAfterRedirects=i,this.state=r,this.shouldActivate=o,this.type=je.GuardsCheckEnd}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},sc=class extends Et{constructor(n,t,i,r){super(n,t),this.urlAfterRedirects=i,this.state=r,this.type=je.ResolveStart}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},lc=class extends Et{constructor(n,t,i,r){super(n,t),this.urlAfterRedirects=i,this.state=r,this.type=je.ResolveEnd}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},cc=class{constructor(n){this.route=n,this.type=je.RouteConfigLoadStart}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},dc=class{constructor(n){this.route=n,this.type=je.RouteConfigLoadEnd}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},uc=class{constructor(n){this.snapshot=n,this.type=je.ChildActivationStart}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},pc=class{constructor(n){this.snapshot=n,this.type=je.ChildActivationEnd}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},hc=class{constructor(n){this.snapshot=n,this.type=je.ActivationStart}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},fc=class{constructor(n){this.snapshot=n,this.type=je.ActivationEnd}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}};var Fr=class{},Ei=class{constructor(n,t){this.url=n,this.navigationBehaviorOptions=t}};function qv(e,n){return e.providers&&!e._injector&&(e._injector=Ju(e.providers,n,`Route: ${e.path}`)),e._injector??n}function Rt(e){return e.outlet||ee}function Wv(e,n){let t=e.filter(i=>Rt(i)===n);return t.push(...e.filter(i=>Rt(i)!==n)),t}function $r(e){if(!e)return null;if(e.routeConfig?._injector)return e.routeConfig._injector;for(let n=e.parent;n;n=n.parent){let t=n.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}var mc=class{get injector(){return $r(this.route?.snapshot)??this.rootInjector}set injector(n){}constructor(n){this.rootInjector=n,this.outlet=null,this.route=null,this.children=new Oa(this.rootInjector),this.attachRef=null}},Oa=(()=>{class e{constructor(t){this.rootInjector=t,this.contexts=new Map}onChildOutletCreated(t,i){let r=this.getOrCreateContext(t);r.outlet=i,this.contexts.set(t,r)}onChildOutletDestroyed(t){let i=this.getContext(t);i&&(i.outlet=null,i.attachRef=null)}onOutletDeactivated(){let t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let i=this.getContext(t);return i||(i=new mc(this.rootInjector),this.contexts.set(t,i)),i}getContext(t){return this.contexts.get(t)||null}static{this.\u0275fac=function(i){return new(i||e)(B(hi))}}static{this.\u0275prov=G({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})(),wa=class{constructor(n){this._root=n}get root(){return this._root.value}parent(n){let t=this.pathFromRoot(n);return t.length>1?t[t.length-2]:null}children(n){let t=gc(n,this._root);return t?t.children.map(i=>i.value):[]}firstChild(n){let t=gc(n,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(n){let t=_c(n,this._root);return t.length<2?[]:t[t.length-2].children.map(r=>r.value).filter(r=>r!==n)}pathFromRoot(n){return _c(n,this._root).map(t=>t.value)}};function gc(e,n){if(e===n.value)return n;for(let t of n.children){let i=gc(e,t);if(i)return i}return null}function _c(e,n){if(e===n.value)return[n];for(let t of n.children){let i=_c(e,t);if(i.length)return i.unshift(n),i}return[]}var pt=class{constructor(n,t){this.value=n,this.children=t}toString(){return`TreeNode(${this.value})`}};function xi(e){let n={};return e&&e.children.forEach(t=>n[t.value.outlet]=t),n}var Ma=class extends wa{constructor(n,t){super(n),this.snapshot=t,Ic(this,n)}toString(){return this.snapshot.toString()}};function mh(e){let n=Yv(e),t=new He([new Bn("",{})]),i=new He({}),r=new He({}),o=new He({}),a=new He(""),s=new Si(t,i,o,a,r,ee,e,n.root);return s.snapshot=n.root,new Ma(new pt(s,[]),n)}function Yv(e){let n={},t={},i={},r="",o=new Ci([],n,i,r,t,ee,e,null,{});return new Sa("",new pt(o,[]))}var Si=class{constructor(n,t,i,r,o,a,s,l){this.urlSubject=n,this.paramsSubject=t,this.queryParamsSubject=i,this.fragmentSubject=r,this.dataSubject=o,this.outlet=a,this.component=s,this._futureSnapshot=l,this.title=this.dataSubject?.pipe(J(c=>c[Ur]))??Y(void 0),this.url=n,this.params=t,this.queryParams=i,this.fragment=r,this.data=o}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(J(n=>Mi(n))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(J(n=>Mi(n))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function Ea(e,n,t="emptyOnly"){let i,{routeConfig:r}=e;return n!==null&&(t==="always"||r?.path===""||!n.component&&!n.routeConfig?.loadComponent)?i={params:N(N({},n.params),e.params),data:N(N({},n.data),e.data),resolve:N(N(N(N({},e.data),n.data),r?.data),e._resolvedData)}:i={params:N({},e.params),data:N({},e.data),resolve:N(N({},e.data),e._resolvedData??{})},r&&_h(r)&&(i.resolve[Ur]=r.title),i}var Ci=class{get title(){return this.data?.[Ur]}constructor(n,t,i,r,o,a,s,l,c){this.url=n,this.params=t,this.queryParams=i,this.fragment=r,this.data=o,this.outlet=a,this.component=s,this.routeConfig=l,this._resolve=c}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=Mi(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=Mi(this.queryParams),this._queryParamMap}toString(){let n=this.url.map(i=>i.toString()).join("/"),t=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${n}', path:'${t}')`}},Sa=class extends wa{constructor(n,t){super(t),this.url=n,Ic(this,t)}toString(){return gh(this._root)}};function Ic(e,n){n.value._routerState=e,n.children.forEach(t=>Ic(e,t))}function gh(e){let n=e.children.length>0?` { ${e.children.map(gh).join(", ")} } `:"";return`${e.value}${n}`}function Ql(e){if(e.snapshot){let n=e.snapshot,t=e._futureSnapshot;e.snapshot=t,Gt(n.queryParams,t.queryParams)||e.queryParamsSubject.next(t.queryParams),n.fragment!==t.fragment&&e.fragmentSubject.next(t.fragment),Gt(n.params,t.params)||e.paramsSubject.next(t.params),bv(n.url,t.url)||e.urlSubject.next(t.url),Gt(n.data,t.data)||e.dataSubject.next(t.data)}else e.snapshot=e._futureSnapshot,e.dataSubject.next(e._futureSnapshot.data)}function vc(e,n){let t=Gt(e.params,n.params)&&Ev(e.url,n.url),i=!e.parent!=!n.parent;return t&&!i&&(!e.parent||vc(e.parent,n.parent))}function _h(e){return typeof e.title=="string"||e.title===null}var Xv=(()=>{class e{constructor(){this.activated=null,this._activatedRoute=null,this.name=ee,this.activateEvents=new te,this.deactivateEvents=new te,this.attachEvents=new te,this.detachEvents=new te,this.parentContexts=$(Oa),this.location=$(mi),this.changeDetector=$(Pt),this.inputBinder=$(Dc,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(t){if(t.name){let{firstChange:i,previousValue:r}=t.name;if(i)return;this.isTrackedInParentContexts(r)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(r)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new _e(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new _e(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new _e(4012,!1);this.location.detach();let t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,i){this.activated=t,this._activatedRoute=i,this.location.insert(t.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){let t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,i){if(this.isActivated)throw new _e(4013,!1);this._activatedRoute=t;let r=this.location,a=t.snapshot.component,s=this.parentContexts.getOrCreateContext(this.name).children,l=new yc(t,s,r.injector);this.activated=r.createComponent(a,{index:r.length,injector:l,environmentInjector:i}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static{this.\u0275fac=function(i){return new(i||e)}}static{this.\u0275dir=se({type:e,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[Ae]})}}return e})(),yc=class e{__ngOutletInjector(n){return new e(this.route,this.childContexts,n)}constructor(n,t,i){this.route=n,this.childContexts=t,this.parent=i}get(n,t){return n===Si?this.route:n===Oa?this.childContexts:this.parent.get(n,t)}},Dc=new Q("");function Kv(e,n,t){let i=Nr(e,n._root,t?t._root:void 0);return new Ma(i,n)}function Nr(e,n,t){if(t&&e.shouldReuseRoute(n.value,t.value.snapshot)){let i=t.value;i._futureSnapshot=n.value;let r=Qv(e,n,t);return new pt(i,r)}else{if(e.shouldAttach(n.value)){let o=e.retrieve(n.value);if(o!==null){let a=o.route;return a.value._futureSnapshot=n.value,a.children=n.children.map(s=>Nr(e,s)),a}}let i=Zv(n.value),r=n.children.map(o=>Nr(e,o));return new pt(i,r)}}function Qv(e,n,t){return n.children.map(i=>{for(let r of t.children)if(e.shouldReuseRoute(i.value,r.value.snapshot))return Nr(e,i,r);return Nr(e,i)})}function Zv(e){return new Si(new He(e.url),new He(e.params),new He(e.queryParams),new He(e.fragment),new He(e.data),e.outlet,e.component,e)}var Vr=class{constructor(n,t){this.redirectTo=n,this.navigationBehaviorOptions=t}},vh="ngNavigationCancelingError";function Ia(e,n){let{redirectTo:t,navigationBehaviorOptions:i}=Tr(n)?{redirectTo:n,navigationBehaviorOptions:void 0}:n,r=yh(!1,ht.Redirect);return r.url=t,r.navigationBehaviorOptions=i,r}function yh(e,n){let t=new Error(`NavigationCancelingError: ${e||""}`);return t[vh]=!0,t.cancellationCode=n,t}function Jv(e){return xh(e)&&Tr(e.url)}function xh(e){return!!e&&e[vh]}var ey=(e,n,t,i)=>J(r=>(new xc(n,r.targetRouterState,r.currentRouterState,t,i).activate(e),r)),xc=class{constructor(n,t,i,r,o){this.routeReuseStrategy=n,this.futureState=t,this.currState=i,this.forwardEvent=r,this.inputBindingEnabled=o}activate(n){let t=this.futureState._root,i=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,i,n),Ql(this.futureState.root),this.activateChildRoutes(t,i,n)}deactivateChildRoutes(n,t,i){let r=xi(t);n.children.forEach(o=>{let a=o.value.outlet;this.deactivateRoutes(o,r[a],i),delete r[a]}),Object.values(r).forEach(o=>{this.deactivateRouteAndItsChildren(o,i)})}deactivateRoutes(n,t,i){let r=n.value,o=t?t.value:null;if(r===o)if(r.component){let a=i.getContext(r.outlet);a&&this.deactivateChildRoutes(n,t,a.children)}else this.deactivateChildRoutes(n,t,i);else o&&this.deactivateRouteAndItsChildren(t,i)}deactivateRouteAndItsChildren(n,t){n.value.component&&this.routeReuseStrategy.shouldDetach(n.value.snapshot)?this.detachAndStoreRouteSubtree(n,t):this.deactivateRouteAndOutlet(n,t)}detachAndStoreRouteSubtree(n,t){let i=t.getContext(n.value.outlet),r=i&&n.value.component?i.children:t,o=xi(n);for(let a of Object.values(o))this.deactivateRouteAndItsChildren(a,r);if(i&&i.outlet){let a=i.outlet.detach(),s=i.children.onOutletDeactivated();this.routeReuseStrategy.store(n.value.snapshot,{componentRef:a,route:n,contexts:s})}}deactivateRouteAndOutlet(n,t){let i=t.getContext(n.value.outlet),r=i&&n.value.component?i.children:t,o=xi(n);for(let a of Object.values(o))this.deactivateRouteAndItsChildren(a,r);i&&(i.outlet&&(i.outlet.deactivate(),i.children.onOutletDeactivated()),i.attachRef=null,i.route=null)}activateChildRoutes(n,t,i){let r=xi(t);n.children.forEach(o=>{this.activateRoutes(o,r[o.value.outlet],i),this.forwardEvent(new fc(o.value.snapshot))}),n.children.length&&this.forwardEvent(new pc(n.value.snapshot))}activateRoutes(n,t,i){let r=n.value,o=t?t.value:null;if(Ql(r),r===o)if(r.component){let a=i.getOrCreateContext(r.outlet);this.activateChildRoutes(n,t,a.children)}else this.activateChildRoutes(n,t,i);else if(r.component){let a=i.getOrCreateContext(r.outlet);if(this.routeReuseStrategy.shouldAttach(r.snapshot)){let s=this.routeReuseStrategy.retrieve(r.snapshot);this.routeReuseStrategy.store(r.snapshot,null),a.children.onOutletReAttached(s.contexts),a.attachRef=s.componentRef,a.route=s.route.value,a.outlet&&a.outlet.attach(s.componentRef,s.route.value),Ql(s.route.value),this.activateChildRoutes(n,null,a.children)}else a.attachRef=null,a.route=r,a.outlet&&a.outlet.activateWith(r,a.injector),this.activateChildRoutes(n,null,a.children)}else this.activateChildRoutes(n,null,i)}},Da=class{constructor(n){this.path=n,this.route=this.path[this.path.length-1]}},wi=class{constructor(n,t){this.component=n,this.route=t}};function ty(e,n,t){let i=e._root,r=n?n._root:null;return Er(i,r,t,[i.value])}function ny(e){let n=e.routeConfig?e.routeConfig.canActivateChild:null;return!n||n.length===0?null:{node:e,guards:n}}function Di(e,n){let t=Symbol(),i=n.get(e,t);return i===t?typeof e=="function"&&!Gu(e)?e:n.get(e):i}function Er(e,n,t,i,r={canDeactivateChecks:[],canActivateChecks:[]}){let o=xi(n);return e.children.forEach(a=>{iy(a,o[a.value.outlet],t,i.concat([a.value]),r),delete o[a.value.outlet]}),Object.entries(o).forEach(([a,s])=>Or(s,t.getContext(a),r)),r}function iy(e,n,t,i,r={canDeactivateChecks:[],canActivateChecks:[]}){let o=e.value,a=n?n.value:null,s=t?t.getContext(e.value.outlet):null;if(a&&o.routeConfig===a.routeConfig){let l=ry(a,o,o.routeConfig.runGuardsAndResolvers);l?r.canActivateChecks.push(new Da(i)):(o.data=a.data,o._resolvedData=a._resolvedData),o.component?Er(e,n,s?s.children:null,i,r):Er(e,n,t,i,r),l&&s&&s.outlet&&s.outlet.isActivated&&r.canDeactivateChecks.push(new wi(s.outlet.component,a))}else a&&Or(n,s,r),r.canActivateChecks.push(new Da(i)),o.component?Er(e,null,s?s.children:null,i,r):Er(e,null,t,i,r);return r}function ry(e,n,t){if(typeof t=="function")return t(e,n);switch(t){case"pathParamsChange":return!Hn(e.url,n.url);case"pathParamsOrQueryParamsChange":return!Hn(e.url,n.url)||!Gt(e.queryParams,n.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!vc(e,n)||!Gt(e.queryParams,n.queryParams);case"paramsChange":default:return!vc(e,n)}}function Or(e,n,t){let i=xi(e),r=e.value;Object.entries(i).forEach(([o,a])=>{r.component?n?Or(a,n.children.getContext(o),t):Or(a,null,t):Or(a,n,t)}),r.component?n&&n.outlet&&n.outlet.isActivated?t.canDeactivateChecks.push(new wi(n.outlet.component,r)):t.canDeactivateChecks.push(new wi(null,r)):t.canDeactivateChecks.push(new wi(null,r))}function zr(e){return typeof e=="function"}function oy(e){return typeof e=="boolean"}function ay(e){return e&&zr(e.canLoad)}function sy(e){return e&&zr(e.canActivate)}function ly(e){return e&&zr(e.canActivateChild)}function cy(e){return e&&zr(e.canDeactivate)}function dy(e){return e&&zr(e.canMatch)}function bh(e){return e instanceof Lu||e?.name==="EmptyError"}var ga=Symbol("INITIAL_VALUE");function Ii(){return yt(e=>rr(e.map(n=>n.pipe(Ot(1),Ln(ga)))).pipe(J(n=>{for(let t of n)if(t!==!0){if(t===ga)return ga;if(t===!1||uy(t))return t}return!0}),Ye(n=>n!==ga),Ot(1)))}function uy(e){return Tr(e)||e instanceof Vr}function py(e,n){return _t(t=>{let{targetSnapshot:i,currentSnapshot:r,guards:{canActivateChecks:o,canDeactivateChecks:a}}=t;return a.length===0&&o.length===0?Y(fe(N({},t),{guardsResult:!0})):hy(a,i,r,e).pipe(_t(s=>s&&oy(s)?fy(i,o,e,n):Y(s)),J(s=>fe(N({},t),{guardsResult:s})))})}function hy(e,n,t,i){return We(e).pipe(_t(r=>yy(r.component,r.route,t,n,i)),hn(r=>r!==!0,!0))}function fy(e,n,t,i){return We(n).pipe(Nn(r=>zo(gy(r.route.parent,i),my(r.route,i),vy(e,r.path,t),_y(e,r.route,t))),hn(r=>r!==!0,!0))}function my(e,n){return e!==null&&n&&n(new hc(e)),Y(!0)}function gy(e,n){return e!==null&&n&&n(new uc(e)),Y(!0)}function _y(e,n,t){let i=n.routeConfig?n.routeConfig.canActivate:null;if(!i||i.length===0)return Y(!0);let r=i.map(o=>yl(()=>{let a=$r(n)??t,s=Di(o,a),l=sy(s)?s.canActivate(n,e):At(a,()=>s(n,e));return bn(l).pipe(hn())}));return Y(r).pipe(Ii())}function vy(e,n,t){let i=n[n.length-1],o=n.slice(0,n.length-1).reverse().map(a=>ny(a)).filter(a=>a!==null).map(a=>yl(()=>{let s=a.guards.map(l=>{let c=$r(a.node)??t,d=Di(l,c),u=ly(d)?d.canActivateChild(i,e):At(c,()=>d(i,e));return bn(u).pipe(hn())});return Y(s).pipe(Ii())}));return Y(o).pipe(Ii())}function yy(e,n,t,i,r){let o=n&&n.routeConfig?n.routeConfig.canDeactivate:null;if(!o||o.length===0)return Y(!0);let a=o.map(s=>{let l=$r(n)??r,c=Di(s,l),d=cy(c)?c.canDeactivate(e,n,t,i):At(l,()=>c(e,n,t,i));return bn(d).pipe(hn())});return Y(a).pipe(Ii())}function xy(e,n,t,i){let r=n.canLoad;if(r===void 0||r.length===0)return Y(!0);let o=r.map(a=>{let s=Di(a,e),l=ay(s)?s.canLoad(n,t):At(e,()=>s(n,t));return bn(l)});return Y(o).pipe(Ii(),Ch(i))}function Ch(e){return Vu(Te(n=>{if(typeof n!="boolean")throw Ia(e,n)}),J(n=>n===!0))}function by(e,n,t,i){let r=n.canMatch;if(!r||r.length===0)return Y(!0);let o=r.map(a=>{let s=Di(a,e),l=dy(s)?s.canMatch(n,t):At(e,()=>s(n,t));return bn(l)});return Y(o).pipe(Ii(),Ch(i))}var Lr=class{constructor(n){this.segmentGroup=n||null}},jr=class extends Error{constructor(n){super(),this.urlTree=n}};function yi(e){return Dt(new Lr(e))}function Cy(e){return Dt(new _e(4e3,!1))}function wy(e){return Dt(yh(!1,ht.GuardRejected))}var bc=class{constructor(n,t){this.urlSerializer=n,this.urlTree=t}lineralizeSegments(n,t){let i=[],r=t.root;for(;;){if(i=i.concat(r.segments),r.numberOfChildren===0)return Y(i);if(r.numberOfChildren>1||!r.children[ee])return Cy(`${n.redirectTo}`);r=r.children[ee]}}applyRedirectCommands(n,t,i,r,o){if(typeof t!="string"){let s=t,{queryParams:l,fragment:c,routeConfig:d,url:u,outlet:h,params:_,data:x,title:C}=r,w=At(o,()=>s({params:_,data:x,queryParams:l,fragment:c,routeConfig:d,url:u,outlet:h,title:C}));if(w instanceof rn)throw new jr(w);t=w}let a=this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),n,i);if(t[0]==="/")throw new jr(a);return a}applyRedirectCreateUrlTree(n,t,i,r){let o=this.createSegmentGroup(n,t.root,i,r);return new rn(o,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(n,t){let i={};return Object.entries(n).forEach(([r,o])=>{if(typeof o=="string"&&o[0]===":"){let s=o.substring(1);i[r]=t[s]}else i[r]=o}),i}createSegmentGroup(n,t,i,r){let o=this.createSegments(n,t.segments,i,r),a={};return Object.entries(t.children).forEach(([s,l])=>{a[s]=this.createSegmentGroup(n,l,i,r)}),new he(o,a)}createSegments(n,t,i,r){return t.map(o=>o.path[0]===":"?this.findPosParam(n,o,r):this.findOrReturn(o,i))}findPosParam(n,t,i){let r=i[t.path.substring(1)];if(!r)throw new _e(4001,!1);return r}findOrReturn(n,t){let i=0;for(let r of t){if(r.path===n.path)return t.splice(i),r;i++}return n}},Cc={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function My(e,n,t,i,r){let o=wh(e,n,t);return o.matched?(i=qv(n,i),by(i,n,t,r).pipe(J(a=>a===!0?o:N({},Cc)))):Y(o)}function wh(e,n,t){if(n.path==="**")return Ey(t);if(n.path==="")return n.pathMatch==="full"&&(e.hasChildren()||t.length>0)?N({},Cc):{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};let r=(n.matcher||xv)(t,e,n);if(!r)return N({},Cc);let o={};Object.entries(r.posParams??{}).forEach(([s,l])=>{o[s]=l.path});let a=r.consumed.length>0?N(N({},o),r.consumed[r.consumed.length-1].parameters):o;return{matched:!0,consumedSegments:r.consumed,remainingSegments:t.slice(r.consumed.length),parameters:a,positionalParamSegments:r.posParams??{}}}function Ey(e){return{matched:!0,parameters:e.length>0?nh(e).parameters:{},consumedSegments:e,remainingSegments:[],positionalParamSegments:{}}}function Zp(e,n,t,i){return t.length>0&&Dy(e,t,i)?{segmentGroup:new he(n,Iy(i,new he(t,e.children))),slicedSegments:[]}:t.length===0&&Oy(e,t,i)?{segmentGroup:new he(e.segments,Sy(e,t,i,e.children)),slicedSegments:t}:{segmentGroup:new he(e.segments,e.children),slicedSegments:t}}function Sy(e,n,t,i){let r={};for(let o of t)if(Aa(e,n,o)&&!i[Rt(o)]){let a=new he([],{});r[Rt(o)]=a}return N(N({},i),r)}function Iy(e,n){let t={};t[ee]=n;for(let i of e)if(i.path===""&&Rt(i)!==ee){let r=new he([],{});t[Rt(i)]=r}return t}function Dy(e,n,t){return t.some(i=>Aa(e,n,i)&&Rt(i)!==ee)}function Oy(e,n,t){return t.some(i=>Aa(e,n,i))}function Aa(e,n,t){return(e.hasChildren()||n.length>0)&&t.pathMatch==="full"?!1:t.path===""}function Ay(e,n,t){return n.length===0&&!e.children[t]}var wc=class{};function Ty(e,n,t,i,r,o,a="emptyOnly"){return new Mc(e,n,t,i,r,a,o).recognize()}var Py=31,Mc=class{constructor(n,t,i,r,o,a,s){this.injector=n,this.configLoader=t,this.rootComponentType=i,this.config=r,this.urlTree=o,this.paramsInheritanceStrategy=a,this.urlSerializer=s,this.applyRedirects=new bc(this.urlSerializer,this.urlTree),this.absoluteRedirectCount=0,this.allowRedirects=!0}noMatchError(n){return new _e(4002,`'${n.segmentGroup}'`)}recognize(){let n=Zp(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(n).pipe(J(({children:t,rootSnapshot:i})=>{let r=new pt(i,t),o=new Sa("",r),a=jv(i,[],this.urlTree.queryParams,this.urlTree.fragment);return a.queryParams=this.urlTree.queryParams,o.url=this.urlSerializer.serialize(a),{state:o,tree:a}}))}match(n){let t=new Ci([],Object.freeze({}),Object.freeze(N({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),ee,this.rootComponentType,null,{});return this.processSegmentGroup(this.injector,this.config,n,ee,t).pipe(J(i=>({children:i,rootSnapshot:t})),vt(i=>{if(i instanceof jr)return this.urlTree=i.urlTree,this.match(i.urlTree.root);throw i instanceof Lr?this.noMatchError(i):i}))}processSegmentGroup(n,t,i,r,o){return i.segments.length===0&&i.hasChildren()?this.processChildren(n,t,i,o):this.processSegment(n,t,i,i.segments,r,!0,o).pipe(J(a=>a instanceof pt?[a]:[]))}processChildren(n,t,i,r){let o=[];for(let a of Object.keys(i.children))a==="primary"?o.unshift(a):o.push(a);return We(o).pipe(Nn(a=>{let s=i.children[a],l=Wv(t,a);return this.processSegmentGroup(n,l,s,a,r)}),Hu((a,s)=>(a.push(...s),a)),xl(null),Bu(),_t(a=>{if(a===null)return yi(i);let s=Mh(a);return ky(s),Y(s)}))}processSegment(n,t,i,r,o,a,s){return We(t).pipe(Nn(l=>this.processSegmentAgainstRoute(l._injector??n,t,l,i,r,o,a,s).pipe(vt(c=>{if(c instanceof Lr)return Y(null);throw c}))),hn(l=>!!l),vt(l=>{if(bh(l))return Ay(i,r,o)?Y(new wc):yi(i);throw l}))}processSegmentAgainstRoute(n,t,i,r,o,a,s,l){return Rt(i)!==a&&(a===ee||!Aa(r,o,i))?yi(r):i.redirectTo===void 0?this.matchSegmentAgainstRoute(n,r,i,o,a,l):this.allowRedirects&&s?this.expandSegmentAgainstRouteUsingRedirect(n,r,t,i,o,a,l):yi(r)}expandSegmentAgainstRouteUsingRedirect(n,t,i,r,o,a,s){let{matched:l,parameters:c,consumedSegments:d,positionalParamSegments:u,remainingSegments:h}=wh(t,r,o);if(!l)return yi(t);typeof r.redirectTo=="string"&&r.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>Py&&(this.allowRedirects=!1));let _=new Ci(o,c,Object.freeze(N({},this.urlTree.queryParams)),this.urlTree.fragment,Jp(r),Rt(r),r.component??r._loadedComponent??null,r,eh(r)),x=Ea(_,s,this.paramsInheritanceStrategy);_.params=Object.freeze(x.params),_.data=Object.freeze(x.data);let C=this.applyRedirects.applyRedirectCommands(d,r.redirectTo,u,_,n);return this.applyRedirects.lineralizeSegments(r,C).pipe(_t(w=>this.processSegment(n,i,t,w.concat(h),a,!1,s)))}matchSegmentAgainstRoute(n,t,i,r,o,a){let s=My(t,i,r,n,this.urlSerializer);return i.path==="**"&&(t.children={}),s.pipe(yt(l=>l.matched?(n=i._injector??n,this.getChildConfig(n,i,r).pipe(yt(({routes:c})=>{let d=i._loadedInjector??n,{parameters:u,consumedSegments:h,remainingSegments:_}=l,x=new Ci(h,u,Object.freeze(N({},this.urlTree.queryParams)),this.urlTree.fragment,Jp(i),Rt(i),i.component??i._loadedComponent??null,i,eh(i)),C=Ea(x,a,this.paramsInheritanceStrategy);x.params=Object.freeze(C.params),x.data=Object.freeze(C.data);let{segmentGroup:w,slicedSegments:M}=Zp(t,h,_,c);if(M.length===0&&w.hasChildren())return this.processChildren(d,c,w,x).pipe(J(I=>new pt(x,I)));if(c.length===0&&M.length===0)return Y(new pt(x,[]));let O=Rt(i)===o;return this.processSegment(d,c,w,M,O?ee:o,!0,x).pipe(J(I=>new pt(x,I instanceof pt?[I]:[])))}))):yi(t)))}getChildConfig(n,t,i){return t.children?Y({routes:t.children,injector:n}):t.loadChildren?t._loadedRoutes!==void 0?Y({routes:t._loadedRoutes,injector:t._loadedInjector}):xy(n,t,i,this.urlSerializer).pipe(_t(r=>r?this.configLoader.loadChildren(n,t).pipe(Te(o=>{t._loadedRoutes=o.routes,t._loadedInjector=o.injector})):wy(t))):Y({routes:[],injector:n})}};function ky(e){e.sort((n,t)=>n.value.outlet===ee?-1:t.value.outlet===ee?1:n.value.outlet.localeCompare(t.value.outlet))}function Ry(e){let n=e.value.routeConfig;return n&&n.path===""}function Mh(e){let n=[],t=new Set;for(let i of e){if(!Ry(i)){n.push(i);continue}let r=n.find(o=>i.value.routeConfig===o.value.routeConfig);r!==void 0?(r.children.push(...i.children),t.add(r)):n.push(i)}for(let i of t){let r=Mh(i.children);n.push(new pt(i.value,r))}return n.filter(i=>!t.has(i))}function Jp(e){return e.data||{}}function eh(e){return e.resolve||{}}function Fy(e,n,t,i,r,o){return _t(a=>Ty(e,n,t,i,a.extractedUrl,r,o).pipe(J(({state:s,tree:l})=>fe(N({},a),{targetSnapshot:s,urlAfterRedirects:l}))))}function Ny(e,n){return _t(t=>{let{targetSnapshot:i,guards:{canActivateChecks:r}}=t;if(!r.length)return Y(t);let o=new Set(r.map(l=>l.route)),a=new Set;for(let l of o)if(!a.has(l))for(let c of Eh(l))a.add(c);let s=0;return We(a).pipe(Nn(l=>o.has(l)?Vy(l,i,e,n):(l.data=Ea(l,l.parent,e).resolve,Y(void 0))),Te(()=>s++),bl(1),_t(l=>s===a.size?Y(t):Ut))})}function Eh(e){let n=e.children.map(t=>Eh(t)).flat();return[e,...n]}function Vy(e,n,t,i){let r=e.routeConfig,o=e._resolve;return r?.title!==void 0&&!_h(r)&&(o[Ur]=r.title),Ly(o,e,n,i).pipe(J(a=>(e._resolvedData=a,e.data=Ea(e,e.parent,t).resolve,null)))}function Ly(e,n,t,i){let r=ec(e);if(r.length===0)return Y({});let o={};return We(r).pipe(_t(a=>jy(e[a],n,t,i).pipe(hn(),Te(s=>{if(s instanceof Vr)throw Ia(new Ar,s);o[a]=s}))),bl(1),$u(o),vt(a=>bh(a)?Ut:Dt(a)))}function jy(e,n,t,i){let r=$r(n)??i,o=Di(e,r),a=o.resolve?o.resolve(n,t):At(r,()=>o(n,t));return bn(a)}function Zl(e){return yt(n=>{let t=e(n);return t?We(t).pipe(J(()=>n)):Y(n)})}var Sh=(()=>{class e{buildTitle(t){let i,r=t.root;for(;r!==void 0;)i=this.getResolvedTitleForRoute(r)??i,r=r.children.find(o=>o.outlet===ee);return i}getResolvedTitleForRoute(t){return t.data[Ur]}static{this.\u0275fac=function(i){return new(i||e)}}static{this.\u0275prov=G({token:e,factory:()=>$(Uy),providedIn:"root"})}}return e})(),Uy=(()=>{class e extends Sh{constructor(t){super(),this.title=t}updateTitle(t){let i=this.buildTitle(t);i!==void 0&&this.title.setTitle(i)}static{this.\u0275fac=function(i){return new(i||e)(B(qp))}}static{this.\u0275prov=G({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})(),Oc=new Q("",{providedIn:"root",factory:()=>({})}),$y=(()=>{class e{static{this.\u0275fac=function(i){return new(i||e)}}static{this.\u0275cmp=Ce({type:e,selectors:[["ng-component"]],standalone:!0,features:[Me],decls:1,vars:0,template:function(i,r){i&1&&pe(0,"router-outlet")},dependencies:[Xv],encapsulation:2})}}return e})();function Ac(e){let n=e.children&&e.children.map(Ac),t=n?fe(N({},e),{children:n}):N({},e);return!t.component&&!t.loadComponent&&(n||t.loadChildren)&&t.outlet&&t.outlet!==ee&&(t.component=$y),t}var Tc=new Q(""),zy=(()=>{class e{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=$(Al)}loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return Y(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);let i=bn(t.loadComponent()).pipe(J(Ih),Te(o=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=o}),Vn(()=>{this.componentLoaders.delete(t)})),r=new _l(i,()=>new Se).pipe(gl());return this.componentLoaders.set(t,r),r}loadChildren(t,i){if(this.childrenLoaders.get(i))return this.childrenLoaders.get(i);if(i._loadedRoutes)return Y({routes:i._loadedRoutes,injector:i._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(i);let o=By(i,this.compiler,t,this.onLoadEndListener).pipe(Vn(()=>{this.childrenLoaders.delete(i)})),a=new _l(o,()=>new Se).pipe(gl());return this.childrenLoaders.set(i,a),a}static{this.\u0275fac=function(i){return new(i||e)}}static{this.\u0275prov=G({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();function By(e,n,t,i){return bn(e.loadChildren()).pipe(J(Ih),_t(r=>r instanceof Zu||Array.isArray(r)?Y(r):We(n.compileModuleAsync(r))),J(r=>{i&&i(e);let o,a,s=!1;return Array.isArray(r)?(a=r,s=!0):(o=r.create(t).injector,a=o.get(Tc,[],{optional:!0,self:!0}).flat()),{routes:a.map(Ac),injector:o}}))}function Hy(e){return e&&typeof e=="object"&&"default"in e}function Ih(e){return Hy(e)?e.default:e}var Pc=(()=>{class e{static{this.\u0275fac=function(i){return new(i||e)}}static{this.\u0275prov=G({token:e,factory:()=>$(Gy),providedIn:"root"})}}return e})(),Gy=(()=>{class e{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,i){return t}static{this.\u0275fac=function(i){return new(i||e)}}static{this.\u0275prov=G({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})(),qy=new Q("");var Wy=new Q(""),Yy=(()=>{class e{get hasRequestedNavigation(){return this.navigationId!==0}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new Se,this.transitionAbortSubject=new Se,this.configLoader=$(zy),this.environmentInjector=$(hi),this.urlSerializer=$(Sc),this.rootContexts=$(Oa),this.location=$(na),this.inputBindingEnabled=$(Dc,{optional:!0})!==null,this.titleStrategy=$(Sh),this.options=$(Oc,{optional:!0})||{},this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlHandlingStrategy=$(Pc),this.createViewTransition=$(qy,{optional:!0}),this.navigationErrorHandler=$(Wy,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>Y(void 0),this.rootComponentType=null;let t=r=>this.events.next(new cc(r)),i=r=>this.events.next(new dc(r));this.configLoader.onLoadEndListener=i,this.configLoader.onLoadStartListener=t}complete(){this.transitions?.complete()}handleNavigationRequest(t){let i=++this.navigationId;this.transitions?.next(fe(N(N({},this.transitions.value),t),{id:i}))}setupNavigations(t,i,r){return this.transitions=new He({id:0,currentUrlTree:i,currentRawUrl:i,extractedUrl:this.urlHandlingStrategy.extract(i),urlAfterRedirects:this.urlHandlingStrategy.extract(i),rawUrl:i,extras:{},resolve:()=>{},reject:()=>{},promise:Promise.resolve(!0),source:Dr,restoredState:null,currentSnapshot:r.snapshot,targetSnapshot:null,currentRouterState:r,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(Ye(o=>o.id!==0),J(o=>fe(N({},o),{extractedUrl:this.urlHandlingStrategy.extract(o.rawUrl)})),yt(o=>{let a=!1,s=!1;return Y(o).pipe(yt(l=>{if(this.navigationId>o.id)return this.cancelNavigationTransition(o,"",ht.SupersededByNewNavigation),Ut;this.currentTransition=o,this.currentNavigation={id:l.id,initialUrl:l.rawUrl,extractedUrl:l.extractedUrl,targetBrowserUrl:typeof l.extras.browserUrl=="string"?this.urlSerializer.parse(l.extras.browserUrl):l.extras.browserUrl,trigger:l.source,extras:l.extras,previousNavigation:this.lastSuccessfulNavigation?fe(N({},this.lastSuccessfulNavigation),{previousNavigation:null}):null};let c=!t.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),d=l.extras.onSameUrlNavigation??t.onSameUrlNavigation;if(!c&&d!=="reload"){let u="";return this.events.next(new qn(l.id,this.urlSerializer.serialize(l.rawUrl),u,rc.IgnoredSameUrlNavigation)),l.resolve(!1),Ut}if(this.urlHandlingStrategy.shouldProcessUrl(l.rawUrl))return Y(l).pipe(yt(u=>{let h=this.transitions?.getValue();return this.events.next(new kr(u.id,this.urlSerializer.serialize(u.extractedUrl),u.source,u.restoredState)),h!==this.transitions?.getValue()?Ut:Promise.resolve(u)}),Fy(this.environmentInjector,this.configLoader,this.rootComponentType,t.config,this.urlSerializer,this.paramsInheritanceStrategy),Te(u=>{o.targetSnapshot=u.targetSnapshot,o.urlAfterRedirects=u.urlAfterRedirects,this.currentNavigation=fe(N({},this.currentNavigation),{finalUrl:u.urlAfterRedirects});let h=new Ca(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(h)}));if(c&&this.urlHandlingStrategy.shouldProcessUrl(l.currentRawUrl)){let{id:u,extractedUrl:h,source:_,restoredState:x,extras:C}=l,w=new kr(u,this.urlSerializer.serialize(h),_,x);this.events.next(w);let M=mh(this.rootComponentType).snapshot;return this.currentTransition=o=fe(N({},l),{targetSnapshot:M,urlAfterRedirects:h,extras:fe(N({},C),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=h,Y(o)}else{let u="";return this.events.next(new qn(l.id,this.urlSerializer.serialize(l.extractedUrl),u,rc.IgnoredByUrlHandlingStrategy)),l.resolve(!1),Ut}}),Te(l=>{let c=new oc(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(c)}),J(l=>(this.currentTransition=o=fe(N({},l),{guards:ty(l.targetSnapshot,l.currentSnapshot,this.rootContexts)}),o)),py(this.environmentInjector,l=>this.events.next(l)),Te(l=>{if(o.guardsResult=l.guardsResult,l.guardsResult&&typeof l.guardsResult!="boolean")throw Ia(this.urlSerializer,l.guardsResult);let c=new ac(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot,!!l.guardsResult);this.events.next(c)}),Ye(l=>l.guardsResult?!0:(this.cancelNavigationTransition(l,"",ht.GuardRejected),!1)),Zl(l=>{if(l.guards.canActivateChecks.length)return Y(l).pipe(Te(c=>{let d=new sc(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot);this.events.next(d)}),yt(c=>{let d=!1;return Y(c).pipe(Ny(this.paramsInheritanceStrategy,this.environmentInjector),Te({next:()=>d=!0,complete:()=>{d||this.cancelNavigationTransition(c,"",ht.NoDataFromResolver)}}))}),Te(c=>{let d=new lc(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot);this.events.next(d)}))}),Zl(l=>{let c=d=>{let u=[];d.routeConfig?.loadComponent&&!d.routeConfig._loadedComponent&&u.push(this.configLoader.loadComponent(d.routeConfig).pipe(Te(h=>{d.component=h}),J(()=>{})));for(let h of d.children)u.push(...c(h));return u};return rr(c(l.targetSnapshot.root)).pipe(xl(null),Ot(1))}),Zl(()=>this.afterPreactivation()),yt(()=>{let{currentSnapshot:l,targetSnapshot:c}=o,d=this.createViewTransition?.(this.environmentInjector,l.root,c.root);return d?We(d).pipe(J(()=>o)):Y(o)}),J(l=>{let c=Kv(t.routeReuseStrategy,l.targetSnapshot,l.currentRouterState);return this.currentTransition=o=fe(N({},l),{targetRouterState:c}),this.currentNavigation.targetRouterState=c,o}),Te(()=>{this.events.next(new Fr)}),ey(this.rootContexts,t.routeReuseStrategy,l=>this.events.next(l),this.inputBindingEnabled),Ot(1),Te({next:l=>{a=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new Gn(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects))),this.titleStrategy?.updateTitle(l.targetRouterState.snapshot),l.resolve(!0)},complete:()=>{a=!0}}),pi(this.transitionAbortSubject.pipe(Te(l=>{throw l}))),Vn(()=>{!a&&!s&&this.cancelNavigationTransition(o,"",ht.SupersededByNewNavigation),this.currentTransition?.id===o.id&&(this.currentNavigation=null,this.currentTransition=null)}),vt(l=>{if(s=!0,xh(l))this.events.next(new nn(o.id,this.urlSerializer.serialize(o.extractedUrl),l.message,l.cancellationCode)),Jv(l)?this.events.next(new Ei(l.url,l.navigationBehaviorOptions)):o.resolve(!1);else{let c=new Rr(o.id,this.urlSerializer.serialize(o.extractedUrl),l,o.targetSnapshot??void 0);try{let d=At(this.environmentInjector,()=>this.navigationErrorHandler?.(c));if(d instanceof Vr){let{message:u,cancellationCode:h}=Ia(this.urlSerializer,d);this.events.next(new nn(o.id,this.urlSerializer.serialize(o.extractedUrl),u,h)),this.events.next(new Ei(d.redirectTo,d.navigationBehaviorOptions))}else{this.events.next(c);let u=t.errorHandler(l);o.resolve(!!u)}}catch(d){this.options.resolveNavigationPromiseOnError?o.resolve(!1):o.reject(d)}}return Ut}))}))}cancelNavigationTransition(t,i,r){let o=new nn(t.id,this.urlSerializer.serialize(t.extractedUrl),i,r);this.events.next(o),t.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let t=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),i=this.currentNavigation?.targetBrowserUrl??this.currentNavigation?.extractedUrl;return t.toString()!==i?.toString()&&!this.currentNavigation?.extras.skipLocationChange}static{this.\u0275fac=function(i){return new(i||e)}}static{this.\u0275prov=G({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();function Xy(e){return e!==Dr}var Ky=(()=>{class e{static{this.\u0275fac=function(i){return new(i||e)}}static{this.\u0275prov=G({token:e,factory:()=>$(Qy),providedIn:"root"})}}return e})(),Ec=class{shouldDetach(n){return!1}store(n,t){}shouldAttach(n){return!1}retrieve(n){return null}shouldReuseRoute(n,t){return n.routeConfig===t.routeConfig}},Qy=(()=>{class e extends Ec{static{this.\u0275fac=(()=>{let t;return function(r){return(t||(t=it(e)))(r||e)}})()}static{this.\u0275prov=G({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})(),Dh=(()=>{class e{static{this.\u0275fac=function(i){return new(i||e)}}static{this.\u0275prov=G({token:e,factory:()=>$(Zy),providedIn:"root"})}}return e})(),Zy=(()=>{class e extends Dh{constructor(){super(...arguments),this.location=$(na),this.urlSerializer=$(Sc),this.options=$(Oc,{optional:!0})||{},this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.urlHandlingStrategy=$(Pc),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.currentUrlTree=new rn,this.rawUrlTree=this.currentUrlTree,this.currentPageId=0,this.lastSuccessfulId=-1,this.routerState=mh(null),this.stateMemento=this.createStateMemento()}getCurrentUrlTree(){return this.currentUrlTree}getRawUrlTree(){return this.rawUrlTree}restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}getRouterState(){return this.routerState}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(t){return this.location.subscribe(i=>{i.type==="popstate"&&t(i.url,i.state)})}handleRouterEvent(t,i){if(t instanceof kr)this.stateMemento=this.createStateMemento();else if(t instanceof qn)this.rawUrlTree=i.initialUrl;else if(t instanceof Ca){if(this.urlUpdateStrategy==="eager"&&!i.extras.skipLocationChange){let r=this.urlHandlingStrategy.merge(i.finalUrl,i.initialUrl);this.setBrowserUrl(i.targetBrowserUrl??r,i)}}else t instanceof Fr?(this.currentUrlTree=i.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(i.finalUrl,i.initialUrl),this.routerState=i.targetRouterState,this.urlUpdateStrategy==="deferred"&&!i.extras.skipLocationChange&&this.setBrowserUrl(i.targetBrowserUrl??this.rawUrlTree,i)):t instanceof nn&&(t.code===ht.GuardRejected||t.code===ht.NoDataFromResolver)?this.restoreHistory(i):t instanceof Rr?this.restoreHistory(i,!0):t instanceof Gn&&(this.lastSuccessfulId=t.id,this.currentPageId=this.browserPageId)}setBrowserUrl(t,i){let r=t instanceof rn?this.urlSerializer.serialize(t):t;if(this.location.isCurrentPathEqualTo(r)||i.extras.replaceUrl){let o=this.browserPageId,a=N(N({},i.extras.state),this.generateNgRouterState(i.id,o));this.location.replaceState(r,"",a)}else{let o=N(N({},i.extras.state),this.generateNgRouterState(i.id,this.browserPageId+1));this.location.go(r,"",o)}}restoreHistory(t,i=!1){if(this.canceledNavigationResolution==="computed"){let r=this.browserPageId,o=this.currentPageId-r;o!==0?this.location.historyGo(o):this.currentUrlTree===t.finalUrl&&o===0&&(this.resetState(t),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(i&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,i){return this.canceledNavigationResolution==="computed"?{navigationId:t,\u0275routerPageId:i}:{navigationId:t}}static{this.\u0275fac=(()=>{let t;return function(r){return(t||(t=it(e)))(r||e)}})()}static{this.\u0275prov=G({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})(),Sr=function(e){return e[e.COMPLETE=0]="COMPLETE",e[e.FAILED=1]="FAILED",e[e.REDIRECTING=2]="REDIRECTING",e}(Sr||{});function Jy(e,n){e.events.pipe(Ye(t=>t instanceof Gn||t instanceof nn||t instanceof Rr||t instanceof qn),J(t=>t instanceof Gn||t instanceof qn?Sr.COMPLETE:(t instanceof nn?t.code===ht.Redirect||t.code===ht.SupersededByNewNavigation:!1)?Sr.REDIRECTING:Sr.FAILED),Ye(t=>t!==Sr.REDIRECTING),Ot(1)).subscribe(()=>{n()})}function ex(e){throw e}var tx={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},nx={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},Oh=(()=>{class e{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}constructor(){this.disposed=!1,this.console=$(Jo),this.stateManager=$(Dh),this.options=$(Oc,{optional:!0})||{},this.pendingTasks=$(sr),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.navigationTransitions=$(Yy),this.urlSerializer=$(Sc),this.location=$(na),this.urlHandlingStrategy=$(Pc),this._events=new Se,this.errorHandler=this.options.errorHandler||ex,this.navigated=!1,this.routeReuseStrategy=$(Ky),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.config=$(Tc,{optional:!0})?.flat()??[],this.componentInputBindingEnabled=!!$(Dc,{optional:!0}),this.eventsSubscription=new pn,this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:t=>{this.console.warn(t)}}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){let t=this.navigationTransitions.events.subscribe(i=>{try{let r=this.navigationTransitions.currentTransition,o=this.navigationTransitions.currentNavigation;if(r!==null&&o!==null){if(this.stateManager.handleRouterEvent(i,o),i instanceof nn&&i.code!==ht.Redirect&&i.code!==ht.SupersededByNewNavigation)this.navigated=!0;else if(i instanceof Gn)this.navigated=!0;else if(i instanceof Ei){let a=i.navigationBehaviorOptions,s=this.urlHandlingStrategy.merge(i.url,r.currentRawUrl),l=N({browserUrl:r.extras.browserUrl,info:r.extras.info,skipLocationChange:r.extras.skipLocationChange,replaceUrl:r.extras.replaceUrl||this.urlUpdateStrategy==="eager"||Xy(r.source)},a);this.scheduleNavigation(s,Dr,null,l,{resolve:r.resolve,reject:r.reject,promise:r.promise})}}rx(i)&&this._events.next(i)}catch(r){this.navigationTransitions.transitionAbortSubject.next(r)}});this.eventsSubscription.add(t)}resetRootComponentType(t){this.routerState.root.component=t,this.navigationTransitions.rootComponentType=t}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),Dr,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((t,i)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(t,"popstate",i)},0)})}navigateToSyncWithBrowser(t,i,r){let o={replaceUrl:!0},a=r?.navigationId?r:null;if(r){let l=N({},r);delete l.navigationId,delete l.\u0275routerPageId,Object.keys(l).length!==0&&(o.state=l)}let s=this.parseUrl(t);this.scheduleNavigation(s,i,a,o)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(t){this.config=t.map(Ac),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(t,i={}){let{relativeTo:r,queryParams:o,fragment:a,queryParamsHandling:s,preserveFragment:l}=i,c=l?this.currentUrlTree.fragment:a,d=null;switch(s??this.options.defaultQueryParamsHandling){case"merge":d=N(N({},this.currentUrlTree.queryParams),o);break;case"preserve":d=this.currentUrlTree.queryParams;break;default:d=o||null}d!==null&&(d=this.removeEmptyProps(d));let u;try{let h=r?r.snapshot:this.routerState.snapshot.root;u=uh(h)}catch{(typeof t[0]!="string"||t[0][0]!=="/")&&(t=[]),u=this.currentUrlTree.root}return ph(u,t,d,c??null)}navigateByUrl(t,i={skipLocationChange:!1}){let r=Tr(t)?t:this.parseUrl(t),o=this.urlHandlingStrategy.merge(r,this.rawUrlTree);return this.scheduleNavigation(o,Dr,null,i)}navigate(t,i={skipLocationChange:!1}){return ix(t),this.navigateByUrl(this.createUrlTree(t,i),i)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){try{return this.urlSerializer.parse(t)}catch{return this.urlSerializer.parse("/")}}isActive(t,i){let r;if(i===!0?r=N({},tx):i===!1?r=N({},nx):r=i,Tr(t))return Yp(this.currentUrlTree,t,r);let o=this.parseUrl(t);return Yp(this.currentUrlTree,o,r)}removeEmptyProps(t){return Object.entries(t).reduce((i,[r,o])=>(o!=null&&(i[r]=o),i),{})}scheduleNavigation(t,i,r,o,a){if(this.disposed)return Promise.resolve(!1);let s,l,c;a?(s=a.resolve,l=a.reject,c=a.promise):c=new Promise((u,h)=>{s=u,l=h});let d=this.pendingTasks.add();return Jy(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(d))}),this.navigationTransitions.handleNavigationRequest({source:i,restoredState:r,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:t,extras:o,resolve:s,reject:l,promise:c,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),c.catch(u=>Promise.reject(u))}static{this.\u0275fac=function(i){return new(i||e)}}static{this.\u0275prov=G({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();function ix(e){for(let n=0;n<e.length;n++)if(e[n]==null)throw new _e(4008,!1)}function rx(e){return!(e instanceof Fr)&&!(e instanceof Ei)}var ox=new Q("");function Ah(e,...n){return fn([{provide:Tc,multi:!0,useValue:e},[],{provide:Si,useFactory:ax,deps:[Oh]},{provide:ta,multi:!0,useFactory:sx},n.map(t=>t.\u0275providers)])}function ax(e){return e.routerState.root}function sx(){let e=$(ar);return n=>{let t=e.get(pr);if(n!==t.components[0])return;let i=e.get(Oh),r=e.get(lx);e.get(cx)===1&&i.initialNavigation(),e.get(dx,null,Cl.Optional)?.setUpPreloading(),e.get(ox,null,Cl.Optional)?.init(),i.resetRootComponentType(t.componentTypes[0]),r.closed||(r.next(),r.complete(),r.unsubscribe())}}var lx=new Q("",{factory:()=>new Se}),cx=new Q("",{providedIn:"root",factory:()=>1});var dx=new Q("");var Th=[];var ux="@",px=(()=>{class e{constructor(t,i,r,o,a){this.doc=t,this.delegate=i,this.zone=r,this.animationType=o,this.moduleImpl=a,this._rendererFactoryPromise=null,this.scheduler=$(Ku,{optional:!0}),this.loadingSchedulerFn=$(hx,{optional:!0})}ngOnDestroy(){this._engine?.flush()}loadImpl(){let t=()=>this.moduleImpl??import("./chunk-M63TN2GJ.js").then(r=>r),i;return this.loadingSchedulerFn?i=this.loadingSchedulerFn(t):i=t(),i.catch(r=>{throw new _e(5300,!1)}).then(({\u0275createEngine:r,\u0275AnimationRendererFactory:o})=>{this._engine=r(this.animationType,this.doc);let a=new o(this.delegate,this._engine,this.zone);return this.delegate=a,a})}createRenderer(t,i){let r=this.delegate.createRenderer(t,i);if(r.\u0275type===0)return r;typeof r.throwOnSyntheticProps=="boolean"&&(r.throwOnSyntheticProps=!1);let o=new kc(r);return i?.data?.animation&&!this._rendererFactoryPromise&&(this._rendererFactoryPromise=this.loadImpl()),this._rendererFactoryPromise?.then(a=>{let s=a.createRenderer(t,i);o.use(s),this.scheduler?.notify(10)}).catch(a=>{o.use(r)}),o}begin(){this.delegate.begin?.()}end(){this.delegate.end?.()}whenRenderingDone(){return this.delegate.whenRenderingDone?.()??Promise.resolve()}static{this.\u0275fac=function(i){El()}}static{this.\u0275prov=G({token:e,factory:e.\u0275fac})}}return e})(),kc=class{constructor(n){this.delegate=n,this.replay=[],this.\u0275type=1}use(n){if(this.delegate=n,this.replay!==null){for(let t of this.replay)t(n);this.replay=null}}get data(){return this.delegate.data}destroy(){this.replay=null,this.delegate.destroy()}createElement(n,t){return this.delegate.createElement(n,t)}createComment(n){return this.delegate.createComment(n)}createText(n){return this.delegate.createText(n)}get destroyNode(){return this.delegate.destroyNode}appendChild(n,t){this.delegate.appendChild(n,t)}insertBefore(n,t,i,r){this.delegate.insertBefore(n,t,i,r)}removeChild(n,t,i){this.delegate.removeChild(n,t,i)}selectRootElement(n,t){return this.delegate.selectRootElement(n,t)}parentNode(n){return this.delegate.parentNode(n)}nextSibling(n){return this.delegate.nextSibling(n)}setAttribute(n,t,i,r){this.delegate.setAttribute(n,t,i,r)}removeAttribute(n,t,i){this.delegate.removeAttribute(n,t,i)}addClass(n,t){this.delegate.addClass(n,t)}removeClass(n,t){this.delegate.removeClass(n,t)}setStyle(n,t,i,r){this.delegate.setStyle(n,t,i,r)}removeStyle(n,t,i){this.delegate.removeStyle(n,t,i)}setProperty(n,t,i){this.shouldReplay(t)&&this.replay.push(r=>r.setProperty(n,t,i)),this.delegate.setProperty(n,t,i)}setValue(n,t){this.delegate.setValue(n,t)}listen(n,t,i){return this.shouldReplay(t)&&this.replay.push(r=>r.listen(n,t,i)),this.delegate.listen(n,t,i)}shouldReplay(n){return this.replay!==null&&n.startsWith(ux)}},hx=new Q("");function Ph(e="animations"){return Xo("NgAsyncAnimations"),fn([{provide:Yo,useFactory:(n,t,i)=>new px(n,t,i,e),deps:[Ee,ha,Le]},{provide:mn,useValue:e==="noop"?"NoopAnimations":"BrowserAnimations"}])}var kh={providers:[ip({eventCoalescing:!0}),Ah(Th),Wp(),Ph()]};var Bh=(()=>{class e{constructor(t,i){this._renderer=t,this._elementRef=i,this.onChange=r=>{},this.onTouched=()=>{}}setProperty(t,i){this._renderer.setProperty(this._elementRef.nativeElement,t,i)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}static{this.\u0275fac=function(i){return new(i||e)(V(fi),V(De))}}static{this.\u0275dir=se({type:e})}}return e})(),Xr=(()=>{class e extends Bh{static{this.\u0275fac=(()=>{let t;return function(r){return(t||(t=it(e)))(r||e)}})()}static{this.\u0275dir=se({type:e,features:[Fe]})}}return e})(),ki=new Q(""),fx={provide:ki,useExisting:$t(()=>Uc),multi:!0},Uc=(()=>{class e extends Xr{writeValue(t){this.setProperty("checked",t)}static{this.\u0275fac=(()=>{let t;return function(r){return(t||(t=it(e)))(r||e)}})()}static{this.\u0275dir=se({type:e,selectors:[["input","type","checkbox","formControlName",""],["input","type","checkbox","formControl",""],["input","type","checkbox","ngModel",""]],hostBindings:function(i,r){i&1&&k("change",function(a){return r.onChange(a.target.checked)})("blur",function(){return r.onTouched()})},features:[Ie([fx]),Fe]})}}return e})(),mx={provide:ki,useExisting:$t(()=>Ri),multi:!0};function gx(){let e=_i()?_i().getUserAgent():"";return/android (\d+)/.test(e.toLowerCase())}var _x=new Q(""),Ri=(()=>{class e extends Bh{constructor(t,i,r){super(t,i),this._compositionMode=r,this._composing=!1,this._compositionMode==null&&(this._compositionMode=!gx())}writeValue(t){let i=t??"";this.setProperty("value",i)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}static{this.\u0275fac=function(i){return new(i||e)(V(fi),V(De),V(_x,8))}}static{this.\u0275dir=se({type:e,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(i,r){i&1&&k("input",function(a){return r._handleInput(a.target.value)})("blur",function(){return r.onTouched()})("compositionstart",function(){return r._compositionStart()})("compositionend",function(a){return r._compositionEnd(a.target.value)})},features:[Ie([mx]),Fe]})}}return e})();function Cn(e){return e==null||(typeof e=="string"||Array.isArray(e))&&e.length===0}function Hh(e){return e!=null&&typeof e.length=="number"}var $a=new Q(""),Gh=new Q(""),vx=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/,Pa=class{static min(n){return qh(n)}static max(n){return Wh(n)}static required(n){return yx(n)}static requiredTrue(n){return xx(n)}static email(n){return bx(n)}static minLength(n){return Cx(n)}static maxLength(n){return wx(n)}static pattern(n){return Mx(n)}static nullValidator(n){return ka(n)}static compose(n){return Jh(n)}static composeAsync(n){return tf(n)}};function qh(e){return n=>{if(Cn(n.value)||Cn(e))return null;let t=parseFloat(n.value);return!isNaN(t)&&t<e?{min:{min:e,actual:n.value}}:null}}function Wh(e){return n=>{if(Cn(n.value)||Cn(e))return null;let t=parseFloat(n.value);return!isNaN(t)&&t>e?{max:{max:e,actual:n.value}}:null}}function yx(e){return Cn(e.value)?{required:!0}:null}function xx(e){return e.value===!0?null:{required:!0}}function bx(e){return Cn(e.value)||vx.test(e.value)?null:{email:!0}}function Cx(e){return n=>Cn(n.value)||!Hh(n.value)?null:n.value.length<e?{minlength:{requiredLength:e,actualLength:n.value.length}}:null}function wx(e){return n=>Hh(n.value)&&n.value.length>e?{maxlength:{requiredLength:e,actualLength:n.value.length}}:null}function Mx(e){if(!e)return ka;let n,t;return typeof e=="string"?(t="",e.charAt(0)!=="^"&&(t+="^"),t+=e,e.charAt(e.length-1)!=="$"&&(t+="$"),n=new RegExp(t)):(t=e.toString(),n=e),i=>{if(Cn(i.value))return null;let r=i.value;return n.test(r)?null:{pattern:{requiredPattern:t,actualValue:r}}}}function ka(e){return null}function Yh(e){return e!=null}function Xh(e){return ea(e)?We(e):e}function Kh(e){let n={};return e.forEach(t=>{n=t!=null?N(N({},n),t):n}),Object.keys(n).length===0?null:n}function Qh(e,n){return n.map(t=>t(e))}function Ex(e){return!e.validate}function Zh(e){return e.map(n=>Ex(n)?n:t=>n.validate(t))}function Jh(e){if(!e)return null;let n=e.filter(Yh);return n.length==0?null:function(t){return Kh(Qh(t,n))}}function ef(e){return e!=null?Jh(Zh(e)):null}function tf(e){if(!e)return null;let n=e.filter(Yh);return n.length==0?null:function(t){let i=Qh(t,n).map(Xh);return ju(i).pipe(J(Kh))}}function nf(e){return e!=null?tf(Zh(e)):null}function Rh(e,n){return e===null?[n]:Array.isArray(e)?[...e,n]:[e,n]}function rf(e){return e._rawValidators}function of(e){return e._rawAsyncValidators}function Rc(e){return e?Array.isArray(e)?e:[e]:[]}function Ra(e,n){return Array.isArray(e)?e.includes(n):e===n}function Fh(e,n){let t=Rc(n);return Rc(e).forEach(r=>{Ra(t,r)||t.push(r)}),t}function Nh(e,n){return Rc(n).filter(t=>!Ra(e,t))}var Fa=class{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(n){this._rawValidators=n||[],this._composedValidatorFn=ef(this._rawValidators)}_setAsyncValidators(n){this._rawAsyncValidators=n||[],this._composedAsyncValidatorFn=nf(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(n){this._onDestroyCallbacks.push(n)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(n=>n()),this._onDestroyCallbacks=[]}reset(n=void 0){this.control&&this.control.reset(n)}hasError(n,t){return this.control?this.control.hasError(n,t):!1}getError(n,t){return this.control?this.control.getError(n,t):null}},Ti=class extends Fa{get formDirective(){return null}get path(){return null}},Yr=class extends Fa{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}},Na=class{constructor(n){this._cd=n}get isTouched(){return this._cd?.control?._touched?.(),!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return this._cd?.control?._pristine?.(),!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return this._cd?.control?._status?.(),!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return this._cd?._submitted?.(),!!this._cd?.submitted}},Sx={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},rO=fe(N({},Sx),{"[class.ng-submitted]":"isSubmitted"}),za=(()=>{class e extends Na{constructor(t){super(t)}static{this.\u0275fac=function(i){return new(i||e)(V(Yr,2))}}static{this.\u0275dir=se({type:e,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(i,r){i&2&&xt("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)},features:[Fe]})}}return e})(),af=(()=>{class e extends Na{constructor(t){super(t)}static{this.\u0275fac=function(i){return new(i||e)(V(Ti,10))}}static{this.\u0275dir=se({type:e,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(i,r){i&2&&xt("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)("ng-submitted",r.isSubmitted)},features:[Fe]})}}return e})();var Br="VALID",Ta="INVALID",Oi="PENDING",Hr="DISABLED",wn=class{},Va=class extends wn{constructor(n,t){super(),this.value=n,this.source=t}},Gr=class extends wn{constructor(n,t){super(),this.pristine=n,this.source=t}},qr=class extends wn{constructor(n,t){super(),this.touched=n,this.source=t}},Ai=class extends wn{constructor(n,t){super(),this.status=n,this.source=t}},Fc=class extends wn{constructor(n){super(),this.source=n}},Nc=class extends wn{constructor(n){super(),this.source=n}};function $c(e){return(Ba(e)?e.validators:e)||null}function Ix(e){return Array.isArray(e)?ef(e):e||null}function zc(e,n){return(Ba(n)?n.asyncValidators:e)||null}function Dx(e){return Array.isArray(e)?nf(e):e||null}function Ba(e){return e!=null&&!Array.isArray(e)&&typeof e=="object"}function sf(e,n,t){let i=e.controls;if(!(n?Object.keys(i):i).length)throw new _e(1e3,"");if(!i[t])throw new _e(1001,"")}function lf(e,n,t){e._forEachChild((i,r)=>{if(t[r]===void 0)throw new _e(1002,"")})}var Pi=class{constructor(n,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=null,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this._status=hr(()=>this.statusReactive()),this.statusReactive=Un(void 0),this._pristine=hr(()=>this.pristineReactive()),this.pristineReactive=Un(!0),this._touched=hr(()=>this.touchedReactive()),this.touchedReactive=Un(!1),this._events=new Se,this.events=this._events.asObservable(),this._onDisabledChange=[],this._assignValidators(n),this._assignAsyncValidators(t)}get validator(){return this._composedValidatorFn}set validator(n){this._rawValidators=this._composedValidatorFn=n}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(n){this._rawAsyncValidators=this._composedAsyncValidatorFn=n}get parent(){return this._parent}get status(){return _n(this.statusReactive)}set status(n){_n(()=>this.statusReactive.set(n))}get valid(){return this.status===Br}get invalid(){return this.status===Ta}get pending(){return this.status==Oi}get disabled(){return this.status===Hr}get enabled(){return this.status!==Hr}get pristine(){return _n(this.pristineReactive)}set pristine(n){_n(()=>this.pristineReactive.set(n))}get dirty(){return!this.pristine}get touched(){return _n(this.touchedReactive)}set touched(n){_n(()=>this.touchedReactive.set(n))}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(n){this._assignValidators(n)}setAsyncValidators(n){this._assignAsyncValidators(n)}addValidators(n){this.setValidators(Fh(n,this._rawValidators))}addAsyncValidators(n){this.setAsyncValidators(Fh(n,this._rawAsyncValidators))}removeValidators(n){this.setValidators(Nh(n,this._rawValidators))}removeAsyncValidators(n){this.setAsyncValidators(Nh(n,this._rawAsyncValidators))}hasValidator(n){return Ra(this._rawValidators,n)}hasAsyncValidator(n){return Ra(this._rawAsyncValidators,n)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(n={}){let t=this.touched===!1;this.touched=!0;let i=n.sourceControl??this;this._parent&&!n.onlySelf&&this._parent.markAsTouched(fe(N({},n),{sourceControl:i})),t&&n.emitEvent!==!1&&this._events.next(new qr(!0,i))}markAllAsTouched(n={}){this.markAsTouched({onlySelf:!0,emitEvent:n.emitEvent,sourceControl:this}),this._forEachChild(t=>t.markAllAsTouched(n))}markAsUntouched(n={}){let t=this.touched===!0;this.touched=!1,this._pendingTouched=!1;let i=n.sourceControl??this;this._forEachChild(r=>{r.markAsUntouched({onlySelf:!0,emitEvent:n.emitEvent,sourceControl:i})}),this._parent&&!n.onlySelf&&this._parent._updateTouched(n,i),t&&n.emitEvent!==!1&&this._events.next(new qr(!1,i))}markAsDirty(n={}){let t=this.pristine===!0;this.pristine=!1;let i=n.sourceControl??this;this._parent&&!n.onlySelf&&this._parent.markAsDirty(fe(N({},n),{sourceControl:i})),t&&n.emitEvent!==!1&&this._events.next(new Gr(!1,i))}markAsPristine(n={}){let t=this.pristine===!1;this.pristine=!0,this._pendingDirty=!1;let i=n.sourceControl??this;this._forEachChild(r=>{r.markAsPristine({onlySelf:!0,emitEvent:n.emitEvent})}),this._parent&&!n.onlySelf&&this._parent._updatePristine(n,i),t&&n.emitEvent!==!1&&this._events.next(new Gr(!0,i))}markAsPending(n={}){this.status=Oi;let t=n.sourceControl??this;n.emitEvent!==!1&&(this._events.next(new Ai(this.status,t)),this.statusChanges.emit(this.status)),this._parent&&!n.onlySelf&&this._parent.markAsPending(fe(N({},n),{sourceControl:t}))}disable(n={}){let t=this._parentMarkedDirty(n.onlySelf);this.status=Hr,this.errors=null,this._forEachChild(r=>{r.disable(fe(N({},n),{onlySelf:!0}))}),this._updateValue();let i=n.sourceControl??this;n.emitEvent!==!1&&(this._events.next(new Va(this.value,i)),this._events.next(new Ai(this.status,i)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(fe(N({},n),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(r=>r(!0))}enable(n={}){let t=this._parentMarkedDirty(n.onlySelf);this.status=Br,this._forEachChild(i=>{i.enable(fe(N({},n),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:n.emitEvent}),this._updateAncestors(fe(N({},n),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(i=>i(!1))}_updateAncestors(n,t){this._parent&&!n.onlySelf&&(this._parent.updateValueAndValidity(n),n.skipPristineCheck||this._parent._updatePristine({},t),this._parent._updateTouched({},t))}setParent(n){this._parent=n}getRawValue(){return this.value}updateValueAndValidity(n={}){if(this._setInitialStatus(),this._updateValue(),this.enabled){let i=this._cancelExistingSubscription();this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Br||this.status===Oi)&&this._runAsyncValidator(i,n.emitEvent)}let t=n.sourceControl??this;n.emitEvent!==!1&&(this._events.next(new Va(this.value,t)),this._events.next(new Ai(this.status,t)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!n.onlySelf&&this._parent.updateValueAndValidity(fe(N({},n),{sourceControl:t}))}_updateTreeValidity(n={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(n)),this.updateValueAndValidity({onlySelf:!0,emitEvent:n.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Hr:Br}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(n,t){if(this.asyncValidator){this.status=Oi,this._hasOwnPendingAsyncValidator={emitEvent:t!==!1};let i=Xh(this.asyncValidator(this));this._asyncValidationSubscription=i.subscribe(r=>{this._hasOwnPendingAsyncValidator=null,this.setErrors(r,{emitEvent:t,shouldHaveEmitted:n})})}}_cancelExistingSubscription(){if(this._asyncValidationSubscription){this._asyncValidationSubscription.unsubscribe();let n=this._hasOwnPendingAsyncValidator?.emitEvent??!1;return this._hasOwnPendingAsyncValidator=null,n}return!1}setErrors(n,t={}){this.errors=n,this._updateControlsErrors(t.emitEvent!==!1,this,t.shouldHaveEmitted)}get(n){let t=n;return t==null||(Array.isArray(t)||(t=t.split(".")),t.length===0)?null:t.reduce((i,r)=>i&&i._find(r),this)}getError(n,t){let i=t?this.get(t):this;return i&&i.errors?i.errors[n]:null}hasError(n,t){return!!this.getError(n,t)}get root(){let n=this;for(;n._parent;)n=n._parent;return n}_updateControlsErrors(n,t,i){this.status=this._calculateStatus(),n&&this.statusChanges.emit(this.status),(n||i)&&this._events.next(new Ai(this.status,t)),this._parent&&this._parent._updateControlsErrors(n,t,i)}_initObservables(){this.valueChanges=new te,this.statusChanges=new te}_calculateStatus(){return this._allControlsDisabled()?Hr:this.errors?Ta:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Oi)?Oi:this._anyControlsHaveStatus(Ta)?Ta:Br}_anyControlsHaveStatus(n){return this._anyControls(t=>t.status===n)}_anyControlsDirty(){return this._anyControls(n=>n.dirty)}_anyControlsTouched(){return this._anyControls(n=>n.touched)}_updatePristine(n,t){let i=!this._anyControlsDirty(),r=this.pristine!==i;this.pristine=i,this._parent&&!n.onlySelf&&this._parent._updatePristine(n,t),r&&this._events.next(new Gr(this.pristine,t))}_updateTouched(n={},t){this.touched=this._anyControlsTouched(),this._events.next(new qr(this.touched,t)),this._parent&&!n.onlySelf&&this._parent._updateTouched(n,t)}_registerOnCollectionChange(n){this._onCollectionChange=n}_setUpdateStrategy(n){Ba(n)&&n.updateOn!=null&&(this._updateOn=n.updateOn)}_parentMarkedDirty(n){let t=this._parent&&this._parent.dirty;return!n&&!!t&&!this._parent._anyControlsDirty()}_find(n){return null}_assignValidators(n){this._rawValidators=Array.isArray(n)?n.slice():n,this._composedValidatorFn=Ix(this._rawValidators)}_assignAsyncValidators(n){this._rawAsyncValidators=Array.isArray(n)?n.slice():n,this._composedAsyncValidatorFn=Dx(this._rawAsyncValidators)}},La=class extends Pi{constructor(n,t,i){super($c(t),zc(i,t)),this.controls=n,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(n,t){return this.controls[n]?this.controls[n]:(this.controls[n]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(n,t,i={}){this.registerControl(n,t),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}removeControl(n,t={}){this.controls[n]&&this.controls[n]._registerOnCollectionChange(()=>{}),delete this.controls[n],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(n,t,i={}){this.controls[n]&&this.controls[n]._registerOnCollectionChange(()=>{}),delete this.controls[n],t&&this.registerControl(n,t),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}contains(n){return this.controls.hasOwnProperty(n)&&this.controls[n].enabled}setValue(n,t={}){lf(this,!0,n),Object.keys(n).forEach(i=>{sf(this,!0,i),this.controls[i].setValue(n[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(n,t={}){n!=null&&(Object.keys(n).forEach(i=>{let r=this.controls[i];r&&r.patchValue(n[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(n={},t={}){this._forEachChild((i,r)=>{i.reset(n?n[r]:null,{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t,this),this._updateTouched(t,this),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(n,t,i)=>(n[i]=t.getRawValue(),n))}_syncPendingControls(){let n=this._reduceChildren(!1,(t,i)=>i._syncPendingControls()?!0:t);return n&&this.updateValueAndValidity({onlySelf:!0}),n}_forEachChild(n){Object.keys(this.controls).forEach(t=>{let i=this.controls[t];i&&n(i,t)})}_setUpControls(){this._forEachChild(n=>{n.setParent(this),n._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(n){for(let[t,i]of Object.entries(this.controls))if(this.contains(t)&&n(i))return!0;return!1}_reduceValue(){let n={};return this._reduceChildren(n,(t,i,r)=>((i.enabled||this.disabled)&&(t[r]=i.value),t))}_reduceChildren(n,t){let i=n;return this._forEachChild((r,o)=>{i=t(i,r,o)}),i}_allControlsDisabled(){for(let n of Object.keys(this.controls))if(this.controls[n].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(n){return this.controls.hasOwnProperty(n)?this.controls[n]:null}};var Vc=class extends La{};var Ha=new Q("CallSetDisabledState",{providedIn:"root",factory:()=>Ga}),Ga="always";function Ox(e,n){return[...n.path,e]}function Lc(e,n,t=Ga){Bc(e,n),n.valueAccessor.writeValue(e.value),(e.disabled||t==="always")&&n.valueAccessor.setDisabledState?.(e.disabled),Tx(e,n),kx(e,n),Px(e,n),Ax(e,n)}function Vh(e,n,t=!0){let i=()=>{};n.valueAccessor&&(n.valueAccessor.registerOnChange(i),n.valueAccessor.registerOnTouched(i)),Ua(e,n),e&&(n._invokeOnDestroyCallbacks(),e._registerOnCollectionChange(()=>{}))}function ja(e,n){e.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(n)})}function Ax(e,n){if(n.valueAccessor.setDisabledState){let t=i=>{n.valueAccessor.setDisabledState(i)};e.registerOnDisabledChange(t),n._registerOnDestroy(()=>{e._unregisterOnDisabledChange(t)})}}function Bc(e,n){let t=rf(e);n.validator!==null?e.setValidators(Rh(t,n.validator)):typeof t=="function"&&e.setValidators([t]);let i=of(e);n.asyncValidator!==null?e.setAsyncValidators(Rh(i,n.asyncValidator)):typeof i=="function"&&e.setAsyncValidators([i]);let r=()=>e.updateValueAndValidity();ja(n._rawValidators,r),ja(n._rawAsyncValidators,r)}function Ua(e,n){let t=!1;if(e!==null){if(n.validator!==null){let r=rf(e);if(Array.isArray(r)&&r.length>0){let o=r.filter(a=>a!==n.validator);o.length!==r.length&&(t=!0,e.setValidators(o))}}if(n.asyncValidator!==null){let r=of(e);if(Array.isArray(r)&&r.length>0){let o=r.filter(a=>a!==n.asyncValidator);o.length!==r.length&&(t=!0,e.setAsyncValidators(o))}}}let i=()=>{};return ja(n._rawValidators,i),ja(n._rawAsyncValidators,i),t}function Tx(e,n){n.valueAccessor.registerOnChange(t=>{e._pendingValue=t,e._pendingChange=!0,e._pendingDirty=!0,e.updateOn==="change"&&cf(e,n)})}function Px(e,n){n.valueAccessor.registerOnTouched(()=>{e._pendingTouched=!0,e.updateOn==="blur"&&e._pendingChange&&cf(e,n),e.updateOn!=="submit"&&e.markAsTouched()})}function cf(e,n){e._pendingDirty&&e.markAsDirty(),e.setValue(e._pendingValue,{emitModelToViewChange:!1}),n.viewToModelUpdate(e._pendingValue),e._pendingChange=!1}function kx(e,n){let t=(i,r)=>{n.valueAccessor.writeValue(i),r&&n.viewToModelUpdate(i)};e.registerOnChange(t),n._registerOnDestroy(()=>{e._unregisterOnChange(t)})}function Rx(e,n){e==null,Bc(e,n)}function Fx(e,n){return Ua(e,n)}function Nx(e,n){if(!e.hasOwnProperty("model"))return!1;let t=e.model;return t.isFirstChange()?!0:!Object.is(n,t.currentValue)}function Vx(e){return Object.getPrototypeOf(e.constructor)===Xr}function Lx(e,n){e._syncPendingControls(),n.forEach(t=>{let i=t.control;i.updateOn==="submit"&&i._pendingChange&&(t.viewToModelUpdate(i._pendingValue),i._pendingChange=!1)})}function jx(e,n){if(!n)return null;Array.isArray(n);let t,i,r;return n.forEach(o=>{o.constructor===Ri?t=o:Vx(o)?i=o:r=o}),r||i||t||null}function Ux(e,n){let t=e.indexOf(n);t>-1&&e.splice(t,1)}function Lh(e,n){let t=e.indexOf(n);t>-1&&e.splice(t,1)}function jh(e){return typeof e=="object"&&e!==null&&Object.keys(e).length===2&&"value"in e&&"disabled"in e}var Wr=class extends Pi{constructor(n=null,t,i){super($c(t),zc(i,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(n),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),Ba(t)&&(t.nonNullable||t.initialValueIsDefault)&&(jh(n)?this.defaultValue=n.value:this.defaultValue=n)}setValue(n,t={}){this.value=this._pendingValue=n,this._onChange.length&&t.emitModelToViewChange!==!1&&this._onChange.forEach(i=>i(this.value,t.emitViewToModelChange!==!1)),this.updateValueAndValidity(t)}patchValue(n,t={}){this.setValue(n,t)}reset(n=this.defaultValue,t={}){this._applyFormState(n),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(n){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(n){this._onChange.push(n)}_unregisterOnChange(n){Lh(this._onChange,n)}registerOnDisabledChange(n){this._onDisabledChange.push(n)}_unregisterOnDisabledChange(n){Lh(this._onDisabledChange,n)}_forEachChild(n){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(n){jh(n)?(this.value=this._pendingValue=n.value,n.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=n}};var $x=e=>e instanceof Wr;var zx={provide:Yr,useExisting:$t(()=>Kr)},Uh=Promise.resolve(),Kr=(()=>{class e extends Yr{constructor(t,i,r,o,a,s){super(),this._changeDetectorRef=a,this.callSetDisabledState=s,this.control=new Wr,this._registered=!1,this.name="",this.update=new te,this._parent=t,this._setValidators(i),this._setAsyncValidators(r),this.valueAccessor=jx(this,o)}ngOnChanges(t){if(this._checkForErrors(),!this._registered||"name"in t){if(this._registered&&(this._checkName(),this.formDirective)){let i=t.name.previousValue;this.formDirective.removeControl({name:i,path:this._getPath(i)})}this._setUpControl()}"isDisabled"in t&&this._updateDisabled(t),Nx(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){Lc(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(t){Uh.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(t){let i=t.isDisabled.currentValue,r=i!==0&&wt(i);Uh.then(()=>{r&&!this.control.disabled?this.control.disable():!r&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(t){return this._parent?Ox(t,this._parent):[t]}static{this.\u0275fac=function(i){return new(i||e)(V(Ti,9),V($a,10),V(Gh,10),V(ki,10),V(Pt,8),V(Ha,8))}}static{this.\u0275dir=se({type:e,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"],options:[0,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[Ie([zx]),Fe,Ae]})}}return e})(),df=(()=>{class e{static{this.\u0275fac=function(i){return new(i||e)}}static{this.\u0275dir=se({type:e,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]})}}return e})(),Bx={provide:ki,useExisting:$t(()=>Qr),multi:!0},Qr=(()=>{class e extends Xr{writeValue(t){let i=t??"";this.setProperty("value",i)}registerOnChange(t){this.onChange=i=>{t(i==""?null:parseFloat(i))}}static{this.\u0275fac=(()=>{let t;return function(r){return(t||(t=it(e)))(r||e)}})()}static{this.\u0275dir=se({type:e,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(i,r){i&1&&k("input",function(a){return r.onChange(a.target.value)})("blur",function(){return r.onTouched()})},features:[Ie([Bx]),Fe]})}}return e})();var Hx=new Q("");var Gx={provide:Ti,useExisting:$t(()=>Hc)},Hc=(()=>{class e extends Ti{get submitted(){return _n(this._submittedReactive)}set submitted(t){this._submittedReactive.set(t)}constructor(t,i,r){super(),this.callSetDisabledState=r,this._submitted=hr(()=>this._submittedReactive()),this._submittedReactive=Un(!1),this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new te,this._setValidators(t),this._setAsyncValidators(i)}ngOnChanges(t){this._checkFormPresent(),t.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(Ua(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(t){let i=this.form.get(t.path);return Lc(i,t,this.callSetDisabledState),i.updateValueAndValidity({emitEvent:!1}),this.directives.push(t),i}getControl(t){return this.form.get(t.path)}removeControl(t){Vh(t.control||null,t,!1),Ux(this.directives,t)}addFormGroup(t){this._setUpFormContainer(t)}removeFormGroup(t){this._cleanUpFormContainer(t)}getFormGroup(t){return this.form.get(t.path)}addFormArray(t){this._setUpFormContainer(t)}removeFormArray(t){this._cleanUpFormContainer(t)}getFormArray(t){return this.form.get(t.path)}updateModel(t,i){this.form.get(t.path).setValue(i)}onSubmit(t){return this._submittedReactive.set(!0),Lx(this.form,this.directives),this.ngSubmit.emit(t),this.form._events.next(new Fc(this.control)),t?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(t=void 0){this.form.reset(t),this._submittedReactive.set(!1),this.form._events.next(new Nc(this.form))}_updateDomValue(){this.directives.forEach(t=>{let i=t.control,r=this.form.get(t.path);i!==r&&(Vh(i||null,t),$x(r)&&(Lc(r,t,this.callSetDisabledState),t.control=r))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(t){let i=this.form.get(t.path);Rx(i,t),i.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(t){if(this.form){let i=this.form.get(t.path);i&&Fx(i,t)&&i.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){Bc(this.form,this),this._oldForm&&Ua(this._oldForm,this)}_checkFormPresent(){this.form}static{this.\u0275fac=function(i){return new(i||e)(V($a,10),V(Gh,10),V(Ha,8))}}static{this.\u0275dir=se({type:e,selectors:[["","formGroup",""]],hostBindings:function(i,r){i&1&&k("submit",function(a){return r.onSubmit(a)})("reset",function(){return r.onReset()})},inputs:{form:[0,"formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[Ie([Gx]),Fe,Ae]})}}return e})();var qx={provide:ki,useExisting:$t(()=>qa),multi:!0};function uf(e,n){return e==null?`${n}`:(n&&typeof n=="object"&&(n="Object"),`${e}: ${n}`.slice(0,50))}function Wx(e){return e.split(":")[0]}var qa=(()=>{class e extends Xr{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(t){this._compareWith=t}writeValue(t){this.value=t;let i=this._getOptionId(t),r=uf(i,t);this.setProperty("value",r)}registerOnChange(t){this.onChange=i=>{this.value=this._getOptionValue(i),t(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(t){for(let i of this._optionMap.keys())if(this._compareWith(this._optionMap.get(i),t))return i;return null}_getOptionValue(t){let i=Wx(t);return this._optionMap.has(i)?this._optionMap.get(i):t}static{this.\u0275fac=(()=>{let t;return function(r){return(t||(t=it(e)))(r||e)}})()}static{this.\u0275dir=se({type:e,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(i,r){i&1&&k("change",function(a){return r.onChange(a.target.value)})("blur",function(){return r.onTouched()})},inputs:{compareWith:"compareWith"},features:[Ie([qx]),Fe]})}}return e})(),pf=(()=>{class e{constructor(t,i,r){this._element=t,this._renderer=i,this._select=r,this._select&&(this.id=this._select._registerOption())}set ngValue(t){this._select!=null&&(this._select._optionMap.set(this.id,t),this._setElementValue(uf(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._setElementValue(t),this._select&&this._select.writeValue(this._select.value)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static{this.\u0275fac=function(i){return new(i||e)(V(De),V(fi),V(qa,9))}}static{this.\u0275dir=se({type:e,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}})}}return e})(),Yx={provide:ki,useExisting:$t(()=>hf),multi:!0};function $h(e,n){return e==null?`${n}`:(typeof n=="string"&&(n=`'${n}'`),n&&typeof n=="object"&&(n="Object"),`${e}: ${n}`.slice(0,50))}function Xx(e){return e.split(":")[0]}var hf=(()=>{class e extends Xr{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(t){this._compareWith=t}writeValue(t){this.value=t;let i;if(Array.isArray(t)){let r=t.map(o=>this._getOptionId(o));i=(o,a)=>{o._setSelected(r.indexOf(a.toString())>-1)}}else i=(r,o)=>{r._setSelected(!1)};this._optionMap.forEach(i)}registerOnChange(t){this.onChange=i=>{let r=[],o=i.selectedOptions;if(o!==void 0){let a=o;for(let s=0;s<a.length;s++){let l=a[s],c=this._getOptionValue(l.value);r.push(c)}}else{let a=i.options;for(let s=0;s<a.length;s++){let l=a[s];if(l.selected){let c=this._getOptionValue(l.value);r.push(c)}}}this.value=r,t(r)}}_registerOption(t){let i=(this._idCounter++).toString();return this._optionMap.set(i,t),i}_getOptionId(t){for(let i of this._optionMap.keys())if(this._compareWith(this._optionMap.get(i)._value,t))return i;return null}_getOptionValue(t){let i=Xx(t);return this._optionMap.has(i)?this._optionMap.get(i)._value:t}static{this.\u0275fac=(()=>{let t;return function(r){return(t||(t=it(e)))(r||e)}})()}static{this.\u0275dir=se({type:e,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(i,r){i&1&&k("change",function(a){return r.onChange(a.target)})("blur",function(){return r.onTouched()})},inputs:{compareWith:"compareWith"},features:[Ie([Yx]),Fe]})}}return e})(),ff=(()=>{class e{constructor(t,i,r){this._element=t,this._renderer=i,this._select=r,this._select&&(this.id=this._select._registerOption(this))}set ngValue(t){this._select!=null&&(this._value=t,this._setElementValue($h(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._select?(this._value=t,this._setElementValue($h(this.id,t)),this._select.writeValue(this._select.value)):this._setElementValue(t)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}_setSelected(t){this._renderer.setProperty(this._element.nativeElement,"selected",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static{this.\u0275fac=function(i){return new(i||e)(V(De),V(fi),V(hf,9))}}static{this.\u0275dir=se({type:e,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}})}}return e})();function mf(e){return typeof e=="number"?e:parseFloat(e)}var gf=(()=>{class e{constructor(){this._validator=ka}ngOnChanges(t){if(this.inputName in t){let i=this.normalizeInput(t[this.inputName].currentValue);this._enabled=this.enabled(i),this._validator=this._enabled?this.createValidator(i):ka,this._onChange&&this._onChange()}}validate(t){return this._validator(t)}registerOnValidatorChange(t){this._onChange=t}enabled(t){return t!=null}static{this.\u0275fac=function(i){return new(i||e)}}static{this.\u0275dir=se({type:e,features:[Ae]})}}return e})(),Kx={provide:$a,useExisting:$t(()=>Gc),multi:!0},Gc=(()=>{class e extends gf{constructor(){super(...arguments),this.inputName="max",this.normalizeInput=t=>mf(t),this.createValidator=t=>Wh(t)}static{this.\u0275fac=(()=>{let t;return function(r){return(t||(t=it(e)))(r||e)}})()}static{this.\u0275dir=se({type:e,selectors:[["input","type","number","max","","formControlName",""],["input","type","number","max","","formControl",""],["input","type","number","max","","ngModel",""]],hostVars:1,hostBindings:function(i,r){i&2&&Ge("max",r._enabled?r.max:null)},inputs:{max:"max"},features:[Ie([Kx]),Fe]})}}return e})(),Qx={provide:$a,useExisting:$t(()=>qc),multi:!0},qc=(()=>{class e extends gf{constructor(){super(...arguments),this.inputName="min",this.normalizeInput=t=>mf(t),this.createValidator=t=>qh(t)}static{this.\u0275fac=(()=>{let t;return function(r){return(t||(t=it(e)))(r||e)}})()}static{this.\u0275dir=se({type:e,selectors:[["input","type","number","min","","formControlName",""],["input","type","number","min","","formControl",""],["input","type","number","min","","ngModel",""]],hostVars:1,hostBindings:function(i,r){i&2&&Ge("min",r._enabled?r.min:null)},inputs:{min:"min"},features:[Ie([Qx]),Fe]})}}return e})();var _f=(()=>{class e{static{this.\u0275fac=function(i){return new(i||e)}}static{this.\u0275mod=we({type:e})}static{this.\u0275inj=be({})}}return e})(),jc=class extends Pi{constructor(n,t,i){super($c(t),zc(i,t)),this.controls=n,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(n){return this.controls[this._adjustIndex(n)]}push(n,t={}){this.controls.push(n),this._registerControl(n),this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}insert(n,t,i={}){this.controls.splice(n,0,t),this._registerControl(t),this.updateValueAndValidity({emitEvent:i.emitEvent})}removeAt(n,t={}){let i=this._adjustIndex(n);i<0&&(i=0),this.controls[i]&&this.controls[i]._registerOnCollectionChange(()=>{}),this.controls.splice(i,1),this.updateValueAndValidity({emitEvent:t.emitEvent})}setControl(n,t,i={}){let r=this._adjustIndex(n);r<0&&(r=0),this.controls[r]&&this.controls[r]._registerOnCollectionChange(()=>{}),this.controls.splice(r,1),t&&(this.controls.splice(r,0,t),this._registerControl(t)),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(n,t={}){lf(this,!1,n),n.forEach((i,r)=>{sf(this,!1,r),this.at(r).setValue(i,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(n,t={}){n!=null&&(n.forEach((i,r)=>{this.at(r)&&this.at(r).patchValue(i,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(n=[],t={}){this._forEachChild((i,r)=>{i.reset(n[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t,this),this._updateTouched(t,this),this.updateValueAndValidity(t)}getRawValue(){return this.controls.map(n=>n.getRawValue())}clear(n={}){this.controls.length<1||(this._forEachChild(t=>t._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:n.emitEvent}))}_adjustIndex(n){return n<0?n+this.length:n}_syncPendingControls(){let n=this.controls.reduce((t,i)=>i._syncPendingControls()?!0:t,!1);return n&&this.updateValueAndValidity({onlySelf:!0}),n}_forEachChild(n){this.controls.forEach((t,i)=>{n(t,i)})}_updateValue(){this.value=this.controls.filter(n=>n.enabled||this.disabled).map(n=>n.value)}_anyControls(n){return this.controls.some(t=>t.enabled&&n(t))}_setUpControls(){this._forEachChild(n=>this._registerControl(n))}_allControlsDisabled(){for(let n of this.controls)if(n.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(n){n.setParent(this),n._registerOnCollectionChange(this._onCollectionChange)}_find(n){return this.at(n)??null}};function zh(e){return!!e&&(e.asyncValidators!==void 0||e.validators!==void 0||e.updateOn!==void 0)}var vf=(()=>{class e{constructor(){this.useNonNullable=!1}get nonNullable(){let t=new e;return t.useNonNullable=!0,t}group(t,i=null){let r=this._reduceControls(t),o={};return zh(i)?o=i:i!==null&&(o.validators=i.validator,o.asyncValidators=i.asyncValidator),new La(r,o)}record(t,i=null){let r=this._reduceControls(t);return new Vc(r,i)}control(t,i,r){let o={};return this.useNonNullable?(zh(i)?o=i:(o.validators=i,o.asyncValidators=r),new Wr(t,fe(N({},o),{nonNullable:!0}))):new Wr(t,i,r)}array(t,i,r){let o=t.map(a=>this._createControl(a));return new jc(o,i,r)}_reduceControls(t){let i={};return Object.keys(t).forEach(r=>{i[r]=this._createControl(t[r])}),i}_createControl(t){if(t instanceof Wr)return t;if(t instanceof Pi)return t;if(Array.isArray(t)){let i=t[0],r=t.length>1?t[1]:null,o=t.length>2?t[2]:null;return this.control(i,r,o)}else return this.control(t)}static{this.\u0275fac=function(i){return new(i||e)}}static{this.\u0275prov=G({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();var Fi=(()=>{class e{static withConfig(t){return{ngModule:e,providers:[{provide:Ha,useValue:t.callSetDisabledState??Ga}]}}static{this.\u0275fac=function(i){return new(i||e)}}static{this.\u0275mod=we({type:e})}static{this.\u0275inj=be({imports:[_f]})}}return e})(),yf=(()=>{class e{static withConfig(t){return{ngModule:e,providers:[{provide:Hx,useValue:t.warnOnNgModelWithFormControl??"always"},{provide:Ha,useValue:t.callSetDisabledState??Ga}]}}static{this.\u0275fac=function(i){return new(i||e)}}static{this.\u0275mod=we({type:e})}static{this.\u0275inj=be({imports:[_f]})}}return e})();var Zx=e=>({selected:e});function Jx(e,n){if(e&1){let t=U();f(0,"div",1)(1,"div",2)(2,"h2"),v(3,"Searchable Literature Database for Genitourinary Cancer"),p(),f(4,"p",3),v(5,"Find evidence-based information to support clinical decisions"),p()(),f(6,"form",4),k("ngSubmit",function(){E(t);let r=m();return S(r.onSubmit())}),f(7,"div",5)(8,"div",6)(9,"div",7)(10,"h3"),v(11,"Cancer Type Selection"),p(),f(12,"p",8),v(13,"Required field "),f(14,"span",9),v(15,"*"),p()()(),f(16,"div",10)(17,"div",11)(18,"label"),v(19,"Genitourinary Cancer Type: "),f(20,"span",9),v(21,"*"),p()(),f(22,"div",12)(23,"button",13),k("click",function(){E(t);let r=m();return r.selectCancerType("Prostate Cancer"),S(r.onSubmit())}),f(24,"span",14),Tt(),f(25,"svg",15),pe(26,"circle",16),f(27,"foreignObject",17),jn(),pe(28,"img",18),p()()(),v(29," Prostate "),p(),f(30,"button",19)(31,"span",14),Tt(),f(32,"svg",20),pe(33,"ellipse",21),f(34,"text",22),v(35,"\u{1F7E2}"),p()()(),v(36," Renal Cell "),p(),jn(),f(37,"button",23)(38,"span",14),Tt(),f(39,"svg",20),pe(40,"rect",24),f(41,"text",22),v(42,"\u{1F9B4}"),p()()(),v(43," Pelvis "),p(),jn(),f(44,"button",25)(45,"span",14),Tt(),f(46,"svg",20),pe(47,"ellipse",26)(48,"ellipse",27),f(49,"text",28),v(50,"\u2642\uFE0F"),p()()(),v(51," Testicular "),p(),jn(),f(52,"button",29)(53,"span",14),Tt(),f(54,"svg",20),pe(55,"rect",30),f(56,"text",31),v(57,"\u{1F9EC}"),p()()(),v(58," Urethral "),p()()()()()()()()}if(e&2){let t,i=m();g(6),y("formGroup",i.patientForm),g(17),y("ngClass",ep(2,Zx,((t=i.patientForm.get("cancerType"))==null?null:t.value)==="Prostate Cancer"))}}var Wa=class e{constructor(n){this.fb=n;this.patientForm=this.fb.group({})}patientForm;showProstateFields=!1;showCancerTypeButtons=!0;formSubmitted=new te;cancerTypeSelected=new te;ngOnInit(){this.initForm()}initForm(){this.patientForm=this.fb.group({cancerType:["",Pa.required],gender:[""],age:[""],ecog:[""],ethnicity:[""],query:[""],diseaseSensitivity:[""],tStage:[""],nStage:[""],mStage:[""],stagingGroup:[""],metastasisLocation:[""],timepointOfDiagnosis:[""],treatmentHistory:this.fb.group({adt:[!1],arpi:[!1],tripleTherapy:[!1]}),extraTreatmentHistory:[""],genomicFeatures:this.fb.group({ddr:[!1]}),genesInvolved:[""],variants:[""],psmaLevel:[""],alpLevel:[""],gleasonScore:[""],histologicVariants:[""],trialBasedClassifications:this.fb.group({highVolume:[!1],highRisk:[!1]})}),this.patientForm.get("cancerType")?.valueChanges.subscribe(n=>{this.toggleProstateFields(n),this.handleCancerTypeChange(n)})}toggleProstateFields(n){this.showProstateFields=n==="Prostate Cancer"}handleCancerTypeChange(n){n==="Prostate Cancer"||n==="Penile Cancer"||n==="Testicular Cancer"?(this.patientForm.get("gender")?.setValue("Male"),this.patientForm.get("gender")?.disable()):this.patientForm.get("gender")?.enable()}selectCancerType(n){this.patientForm.get("cancerType")?.setValue(n),this.patientForm.get("cancerType")?.markAsTouched(),this.cancerTypeSelected.emit(n)}onSubmit(){if(this.showCancerTypeButtons=!1,this.patientForm.invalid){console.error("Form is invalid");return}let n=this.patientForm.getRawValue(),t=JSON.parse(JSON.stringify(n)),i={rawValues:n,processedValues:{cancerType:n.cancerType,gender:n.gender,query:n.query,treatmentHistory:n.treatmentHistory,genomicFeatures:n.genomicFeatures,trialBasedClassifications:n.trialBasedClassifications}};this.formSubmitted.emit(i)}static \u0275fac=function(t){return new(t||e)(V(vf))};static \u0275cmp=Ce({type:e,selectors:[["app-search-query"]],outputs:{formSubmitted:"formSubmitted",cancerTypeSelected:"cancerTypeSelected"},standalone:!0,features:[Me],decls:1,vars:1,consts:[["class","container",4,"ngIf"],[1,"container"],[1,"header-section"],[1,"subtitle"],[1,"main-form",3,"ngSubmit","formGroup"],[1,"form-grid"],[1,"card"],[1,"card-header"],[1,"form-hint"],[1,"required"],[1,"card-body"],[1,"form-group"],[1,"cancer-type-buttons"],["type","button",1,"cancer-btn",3,"click","ngClass"],[1,"cancer-icon"],["width","30","height","30","viewBox","0 0 24 24"],["cx","12","cy","12","r","10","fill","#1976d2"],["x","4","y","4","width","16","height","16"],["src","assets/icons/prostate.png","width","16","height","16","alt","Prostate",2,"display","block"],["type","button","disabled","","title","Coming soon - Renal Cell Cancer support is in development",1,"cancer-btn",2,"opacity","0.5","cursor","not-allowed"],["width","20","height","20","viewBox","0 0 24 24"],["cx","12","cy","12","rx","9","ry","6","fill","#43a047"],["x","12","y","16","text-anchor","middle","font-size","10","fill","#fff"],["type","button","disabled","","title","Coming soon - Pelvis Cancer support is in development",1,"cancer-btn",2,"opacity","0.5","cursor","not-allowed"],["x","6","y","8","width","12","height","8","rx","4","fill","#fbc02d"],["type","button","disabled","","title","Coming soon - Testicular Cancer support is in development",1,"cancer-btn",2,"opacity","0.5","cursor","not-allowed"],["cx","8","cy","16","rx","4","ry","3","fill","#e53935"],["cx","16","cy","16","rx","4","ry","3","fill","#e53935"],["x","12","y","21","text-anchor","middle","font-size","10","fill","#fff"],["type","button","disabled","","title","Coming soon - Urethral Cancer support is in development",1,"cancer-btn",2,"opacity","0.5","cursor","not-allowed"],["x","10","y","4","width","4","height","16","rx","2","fill","#8e24aa"],["x","12","y","20","text-anchor","middle","font-size","10","fill","#fff"]],template:function(t,i){t&1&&P(0,Jx,59,4,"div",0),t&2&&y("ngIf",i.showCancerTypeButtons)},dependencies:[Xe,ra,Mt,Fi,df,af,yf,Hc],styles:['.container[_ngcontent-%COMP%]{max-width:1200px;margin:0 auto;padding:20px}.header-section[_ngcontent-%COMP%]{text-align:center;margin-bottom:30px}.subtitle[_ngcontent-%COMP%]{color:#666;font-size:1.1em}.card[_ngcontent-%COMP%]{background-color:#fff;border-radius:8px;box-shadow:0 2px 4px #0000001a;margin-bottom:20px;height:100%}.card-header[_ngcontent-%COMP%]{background-color:#f5f5f5;padding:15px;border-bottom:1px solid #e0e0e0;border-radius:8px 8px 0 0}.card-body[_ngcontent-%COMP%]{padding:20px;overflow-y:auto;max-height:650px}.main-form[_ngcontent-%COMP%]{display:flex;flex-direction:column}.form-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(350px,1fr));gap:20px;margin-bottom:20px}.full-width[_ngcontent-%COMP%]{grid-column:1 / -1}.form-hint[_ngcontent-%COMP%]{color:#666;font-size:.9em;margin-top:5px}.form-group[_ngcontent-%COMP%]{margin-bottom:20px}.form-row[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;margin-right:-15px;margin-left:-15px}.col-md-4[_ngcontent-%COMP%]{position:relative;width:100%;padding-right:15px;padding-left:15px;flex:0 0 33.333333%;max-width:33.333333%}.col-md-6[_ngcontent-%COMP%]{position:relative;width:100%;padding-right:15px;padding-left:15px;flex:0 0 50%;max-width:50%}.form-control[_ngcontent-%COMP%]{display:block;width:100%;padding:.375rem .75rem;font-size:1rem;line-height:1.5;color:#495057;background-color:#fff;background-clip:padding-box;border:1px solid #ced4da;border-radius:.25rem;transition:border-color .15s ease-in-out,box-shadow .15s ease-in-out}select.form-control[_ngcontent-%COMP%]{height:calc(1.5em + .75rem + 2px)}.form-check[_ngcontent-%COMP%]{position:relative;display:block;padding-left:1.25rem;margin-bottom:10px}.form-check-input[_ngcontent-%COMP%]{position:absolute;margin-top:.3rem;margin-left:-1.25rem}.form-check-label[_ngcontent-%COMP%]{margin-bottom:0}.checkbox-group[_ngcontent-%COMP%]{margin-top:10px}.section-divider[_ngcontent-%COMP%]{margin:20px 0;border:0;border-top:1px solid #eee}.section-title[_ngcontent-%COMP%]{text-align:center;margin-bottom:15px;color:#333;font-size:1.1rem}.section-content[_ngcontent-%COMP%]{margin-bottom:20px}.tnm-group[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:10px;margin-bottom:15px}.tnm-item[_ngcontent-%COMP%]{flex:1;min-width:150px}.mt-3[_ngcontent-%COMP%]{margin-top:1rem}.mb-3[_ngcontent-%COMP%]{margin-bottom:1rem}.text-center[_ngcontent-%COMP%]{text-align:center}.query-card[_ngcontent-%COMP%]{margin-top:20px}.query-textarea[_ngcontent-%COMP%]{min-height:120px;resize:vertical}.form-actions[_ngcontent-%COMP%]{margin-top:20px;text-align:center}.section-header[_ngcontent-%COMP%]{margin:25px 0 15px;padding-bottom:10px;border-bottom:1px solid #ddd;color:#2c3e50;font-weight:600}.prostate-fields[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(300px,1fr));gap:15px;margin-top:15px;padding-bottom:20px}.prostate-fields[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{height:100%;display:flex;flex-direction:column}.prostate-fields[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]{flex:1;display:flex;flex-direction:column}.checkbox-group[_ngcontent-%COMP%]{margin-top:8px;margin-bottom:15px}.checkbox-group[_ngcontent-%COMP%]   .form-check[_ngcontent-%COMP%]{margin-bottom:8px}.form-navigation[_ngcontent-%COMP%]{display:flex;justify-content:space-between;margin-top:25px;padding-top:20px;border-top:1px solid #e0e0e0}.form-navigation[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{min-width:120px;padding:10px 20px;font-size:16px;font-weight:500;border-radius:4px;transition:all .2s ease}.btn-primary[_ngcontent-%COMP%]{background-color:#3498db;border-color:#3498db}.btn-primary[_ngcontent-%COMP%]:hover{background-color:#2980b9;border-color:#2980b9}.btn-secondary[_ngcontent-%COMP%]{background-color:#95a5a6;border-color:#95a5a6}.btn-secondary[_ngcontent-%COMP%]:hover{background-color:#7f8c8d;border-color:#7f8c8d}.btn-submit[_ngcontent-%COMP%]{background-color:#2ecc71;color:#fff;border:none;padding:12px 25px;font-size:16px;font-weight:500;border-radius:4px;cursor:pointer;transition:background-color .2s ease}.btn-submit[_ngcontent-%COMP%]:hover{background-color:#27ae60}.btn-submit[_ngcontent-%COMP%]:disabled{background-color:#95a5a6;cursor:not-allowed}.nav-tabs[_ngcontent-%COMP%]{display:flex;border-bottom:1px solid #dee2e6;list-style:none;padding-left:0;margin-bottom:20px}.nav-item[_ngcontent-%COMP%]{margin-bottom:-1px}.nav-link[_ngcontent-%COMP%]{border:1px solid transparent;border-top-left-radius:.25rem;border-top-right-radius:.25rem;padding:.5rem 1rem;cursor:pointer;text-decoration:none;color:#495057}.nav-link.active[_ngcontent-%COMP%]{color:#007bff;background-color:#fff;border-color:#dee2e6 #dee2e6 #fff}.card[_ngcontent-%COMP%]:hover{box-shadow:0 4px 8px #00000026;transition:box-shadow .3s ease}@media (max-width: 768px){.form-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}.col-md-4[_ngcontent-%COMP%], .col-md-6[_ngcontent-%COMP%]{flex:0 0 100%;max-width:100%}.tnm-group[_ngcontent-%COMP%]{flex-direction:column;gap:10px}}.progress-indicator[_ngcontent-%COMP%]{display:flex;justify-content:space-between;margin-bottom:30px;position:relative}.progress-indicator[_ngcontent-%COMP%]:after{content:"";position:absolute;top:15px;left:0;width:100%;height:2px;background-color:#e0e0e0;z-index:1}.step[_ngcontent-%COMP%]{position:relative;z-index:2;text-align:center;color:#6c757d}.step.active[_ngcontent-%COMP%]{color:#007bff}.step-number[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;width:30px;height:30px;margin:0 auto 8px;background-color:#fff;border:2px solid #e0e0e0;border-radius:50%;font-weight:700;color:#6c757d}.step.active[_ngcontent-%COMP%]   .step-number[_ngcontent-%COMP%]{border-color:#007bff;background-color:#007bff;color:#fff}.form-navigation[_ngcontent-%COMP%]{display:flex;justify-content:space-between;margin-top:20px;padding-top:15px;border-top:1px solid #e0e0e0}.form-navigation[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{min-width:100px;padding:8px 16px}.form-navigation[_ngcontent-%COMP%]   .btn-secondary[_ngcontent-%COMP%]{background-color:#6c757d;color:#fff;border:none}.form-navigation[_ngcontent-%COMP%]   .btn-primary[_ngcontent-%COMP%]{background-color:#007bff;color:#fff;border:none}.step-container[_ngcontent-%COMP%]{position:relative;padding-bottom:70px;max-width:100%}.patient-details-content[_ngcontent-%COMP%]{width:100%;max-width:700px;margin:0 auto 2rem}.patient-details-content[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{min-height:unset;height:auto;max-height:520px;display:flex;flex-direction:column;justify-content:flex-start;box-sizing:border-box}.patient-details-content[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]{padding-bottom:1.5rem;overflow-y:auto}@media (max-width: 900px){.patient-details-content[_ngcontent-%COMP%]{max-width:100%}.patient-details-content[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{max-height:70vh}}.prostate-section[_ngcontent-%COMP%]{margin-top:20px}.step-container[_ngcontent-%COMP%]   .form-navigation[_ngcontent-%COMP%]{position:absolute;bottom:0;left:0;right:0;background-color:#fff;padding:15px 0;margin-top:0;display:flex;justify-content:space-between;border-top:1px solid #e0e0e0;z-index:10}.cancer-type-buttons[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:1rem;justify-content:center;margin-bottom:2rem}.cancer-btn[_ngcontent-%COMP%]{display:flex;align-items:center;padding:.75rem 1.5rem;border-radius:2rem;border:2px solid #e0e0e0;background:#fff;color:#333;font-weight:500;font-size:1rem;cursor:pointer;transition:border .2s,background .2s,color .2s;outline:none;box-shadow:0 1px 4px #00000008}.cancer-btn[_ngcontent-%COMP%]   .cancer-icon[_ngcontent-%COMP%]{margin-right:.5rem;display:flex;align-items:center}.cancer-btn.selected[_ngcontent-%COMP%]{border:2px solid #1976d2;background:#e3f2fd;color:#1976d2}.cancer-btn[_ngcontent-%COMP%]:focus{border:2px solid #1565c0}.prostate-details-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(3,1fr);gap:1.25rem;margin-bottom:2rem}@media (max-width: 900px){.prostate-details-grid[_ngcontent-%COMP%]{grid-template-columns:repeat(2,1fr)}}@media (max-width: 600px){.prostate-details-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}}']})};var Ya={production:!1,apiUrl:"http://localhost:5000",deepInfraKey:"W2oF2Q2NLaTmqj7LGOiJwp9Pdi47Rhhn"};var qt=class e{constructor(n){this.http=n}apiUrl=Ya.apiUrl;getDatabaseContents(){let n=new ot({"Content-Type":"application/json",Accept:"application/json"});return this.http.get(`${this.apiUrl}/api/view_database`,{headers:n}).pipe(J(t=>t.data||[]),vt(t=>(console.error("Error fetching database contents:",t),Dt(()=>new Error(`Failed to fetch database: ${t.message}`)))))}updateDocumentMetadata(n,t){return this.http.put(`${this.apiUrl}/api/document/${n}/metadata`,{metadata:t}).pipe(vt(i=>(console.error("Error updating metadata:",i),Dt(()=>new Error(`Failed to update metadata: ${i.message}`)))))}addMetadataField(n,t=null){return this.http.post(`${this.apiUrl}/api/metadata/add-field`,{field:n,defaultValue:t}).pipe(vt(i=>(console.error("Error adding metadata field:",i),Dt(()=>new Error(`Failed to add metadata field: ${i.message}`)))))}batchUpdateMetadata(n){return this.http.put(`${this.apiUrl}/api/metadata/batch-update`,{updates:n}).pipe(vt(t=>(console.error("Error batch updating metadata:",t),Dt(()=>new Error(`Failed to update metadata: ${t.message}`)))))}uploadCsvMetadata(n){let t=new FormData;return t.append("file",n),this.http.post(`${this.apiUrl}/api/metadata/import-csv`,t).pipe(vt(i=>(console.error("Error uploading CSV:",i),Dt(()=>new Error(`Failed to upload CSV: ${i.message}`)))))}exportMetadataCsv(){window.location.href=`${this.apiUrl}/api/metadata/export`}static \u0275fac=function(t){return new(t||e)(B(kt))};static \u0275prov=G({token:e,factory:e.\u0275fac,providedIn:"root"})};function Yn(e,n){return e==null||n==null?NaN:e<n?-1:e>n?1:e>=n?0:NaN}function Yc(e,n){return e==null||n==null?NaN:n<e?-1:n>e?1:n>=e?0:NaN}function Xa(e){let n,t,i;e.length!==2?(n=Yn,t=(s,l)=>Yn(e(s),l),i=(s,l)=>e(s)-l):(n=e===Yn||e===Yc?e:eb,t=e,i=e);function r(s,l,c=0,d=s.length){if(c<d){if(n(l,l)!==0)return d;do{let u=c+d>>>1;t(s[u],l)<0?c=u+1:d=u}while(c<d)}return c}function o(s,l,c=0,d=s.length){if(c<d){if(n(l,l)!==0)return d;do{let u=c+d>>>1;t(s[u],l)<=0?c=u+1:d=u}while(c<d)}return c}function a(s,l,c=0,d=s.length){let u=r(s,l,c,d-1);return u>c&&i(s[u-1],l)>-i(s[u],l)?u-1:u}return{left:r,center:a,right:o}}function eb(){return 0}function Xc(e){return e===null?NaN:+e}var bf=Xa(Yn),Cf=bf.right,tb=bf.left,nb=Xa(Xc).center,Kc=Cf;var ft=class{constructor(){this._partials=new Float64Array(32),this._n=0}add(n){let t=this._partials,i=0;for(let r=0;r<this._n&&r<32;r++){let o=t[r],a=n+o,s=Math.abs(n)<Math.abs(o)?n-(a-o):o-(a-n);s&&(t[i++]=s),n=a}return t[i]=n,this._n=i+1,this}valueOf(){let n=this._partials,t=this._n,i,r,o,a=0;if(t>0){for(a=n[--t];t>0&&(i=a,r=n[--t],a=i+r,o=r-(a-i),!o););t>0&&(o<0&&n[t-1]<0||o>0&&n[t-1]>0)&&(r=o*2,i=a+r,r==i-a&&(a=i))}return a}};var Ni=class extends Map{constructor(n,t=ob){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:t}}),n!=null)for(let[i,r]of n)this.set(i,r)}get(n){return super.get(wf(this,n))}has(n){return super.has(wf(this,n))}set(n,t){return super.set(ib(this,n),t)}delete(n){return super.delete(rb(this,n))}};function wf({_intern:e,_key:n},t){let i=n(t);return e.has(i)?e.get(i):t}function ib({_intern:e,_key:n},t){let i=n(t);return e.has(i)?e.get(i):(e.set(i,t),t)}function rb({_intern:e,_key:n},t){let i=n(t);return e.has(i)&&(t=e.get(i),e.delete(i)),t}function ob(e){return e!==null&&typeof e=="object"?e.valueOf():e}var ab=Math.sqrt(50),sb=Math.sqrt(10),lb=Math.sqrt(2);function Ka(e,n,t){let i=(n-e)/Math.max(0,t),r=Math.floor(Math.log10(i)),o=i/Math.pow(10,r),a=o>=ab?10:o>=sb?5:o>=lb?2:1,s,l,c;return r<0?(c=Math.pow(10,-r)/a,s=Math.round(e*c),l=Math.round(n*c),s/c<e&&++s,l/c>n&&--l,c=-c):(c=Math.pow(10,r)*a,s=Math.round(e/c),l=Math.round(n/c),s*c<e&&++s,l*c>n&&--l),l<s&&.5<=t&&t<2?Ka(e,n,t*2):[s,l,c]}function Qa(e,n,t){if(n=+n,e=+e,t=+t,!(t>0))return[];if(e===n)return[e];let i=n<e,[r,o,a]=i?Ka(n,e,t):Ka(e,n,t);if(!(o>=r))return[];let s=o-r+1,l=new Array(s);if(i)if(a<0)for(let c=0;c<s;++c)l[c]=(o-c)/-a;else for(let c=0;c<s;++c)l[c]=(o-c)*a;else if(a<0)for(let c=0;c<s;++c)l[c]=(r+c)/-a;else for(let c=0;c<s;++c)l[c]=(r+c)*a;return l}function Zr(e,n,t){return n=+n,e=+e,t=+t,Ka(e,n,t)[2]}function Qc(e,n,t){n=+n,e=+e,t=+t;let i=n<e,r=i?Zr(n,e,t):Zr(e,n,t);return(i?-1:1)*(r<0?1/-r:r)}function Ke(e,n){let t;if(n===void 0)for(let i of e)i!=null&&(t<i||t===void 0&&i>=i)&&(t=i);else{let i=-1;for(let r of e)(r=n(r,++i,e))!=null&&(t<r||t===void 0&&r>=r)&&(t=r)}return t}function Mn(e,n){let t;if(n===void 0)for(let i of e)i!=null&&(t>i||t===void 0&&i>=i)&&(t=i);else{let i=-1;for(let r of e)(r=n(r,++i,e))!=null&&(t>r||t===void 0&&r>=r)&&(t=r)}return t}function*cb(e){for(let n of e)yield*Nu(n)}function Vi(e){return Array.from(cb(e))}function Za(e,n,t){e=+e,n=+n,t=(r=arguments.length)<2?(n=e,e=0,1):r<3?1:+t;for(var i=-1,r=Math.max(0,Math.ceil((n-e)/t))|0,o=new Array(r);++i<r;)o[i]=e+i*t;return o}function Mf(e){return e}var Zc=1,Jc=2,ed=3,Jr=4,Ef=1e-6;function db(e){return"translate("+e+",0)"}function ub(e){return"translate(0,"+e+")"}function pb(e){return n=>+e(n)}function hb(e,n){return n=Math.max(0,e.bandwidth()-n*2)/2,e.round()&&(n=Math.round(n)),t=>+e(t)+n}function fb(){return!this.__axis}function Sf(e,n){var t=[],i=null,r=null,o=6,a=6,s=3,l=typeof window<"u"&&window.devicePixelRatio>1?0:.5,c=e===Zc||e===Jr?-1:1,d=e===Jr||e===Jc?"x":"y",u=e===Zc||e===ed?db:ub;function h(_){var x=i??(n.ticks?n.ticks.apply(n,t):n.domain()),C=r??(n.tickFormat?n.tickFormat.apply(n,t):Mf),w=Math.max(o,0)+s,M=n.range(),O=+M[0]+l,I=+M[M.length-1]+l,b=(n.bandwidth?hb:pb)(n.copy(),l),D=_.selection?_.selection():_,R=D.selectAll(".domain").data([null]),L=D.selectAll(".tick").data(x,n).order(),z=L.exit(),H=L.enter().append("g").attr("class","tick"),q=L.select("line"),A=L.select("text");R=R.merge(R.enter().insert("path",".tick").attr("class","domain").attr("stroke","currentColor")),L=L.merge(H),q=q.merge(H.append("line").attr("stroke","currentColor").attr(d+"2",c*o)),A=A.merge(H.append("text").attr("fill","currentColor").attr(d,c*w).attr("dy",e===Zc?"0em":e===ed?"0.71em":"0.32em")),_!==D&&(R=R.transition(_),L=L.transition(_),q=q.transition(_),A=A.transition(_),z=z.transition(_).attr("opacity",Ef).attr("transform",function(K){return isFinite(K=b(K))?u(K+l):this.getAttribute("transform")}),H.attr("opacity",Ef).attr("transform",function(K){var F=this.parentNode.__axis;return u((F&&isFinite(F=F(K))?F:b(K))+l)})),z.remove(),R.attr("d",e===Jr||e===Jc?a?"M"+c*a+","+O+"H"+l+"V"+I+"H"+c*a:"M"+l+","+O+"V"+I:a?"M"+O+","+c*a+"V"+l+"H"+I+"V"+c*a:"M"+O+","+l+"H"+I),L.attr("opacity",1).attr("transform",function(K){return u(b(K)+l)}),q.attr(d+"2",c*o),A.attr(d,c*w).text(C),D.filter(fb).attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor",e===Jc?"start":e===Jr?"end":"middle"),D.each(function(){this.__axis=b})}return h.scale=function(_){return arguments.length?(n=_,h):n},h.ticks=function(){return t=Array.from(arguments),h},h.tickArguments=function(_){return arguments.length?(t=_==null?[]:Array.from(_),h):t.slice()},h.tickValues=function(_){return arguments.length?(i=_==null?null:Array.from(_),h):i&&i.slice()},h.tickFormat=function(_){return arguments.length?(r=_,h):r},h.tickSize=function(_){return arguments.length?(o=a=+_,h):o},h.tickSizeInner=function(_){return arguments.length?(o=+_,h):o},h.tickSizeOuter=function(_){return arguments.length?(a=+_,h):a},h.tickPadding=function(_){return arguments.length?(s=+_,h):s},h.offset=function(_){return arguments.length?(l=+_,h):l},h}function on(e){return Sf(ed,e)}function Xn(e){return Sf(Jr,e)}var mb={value:()=>{}};function Df(){for(var e=0,n=arguments.length,t={},i;e<n;++e){if(!(i=arguments[e]+"")||i in t||/[\s.]/.test(i))throw new Error("illegal type: "+i);t[i]=[]}return new Ja(t)}function Ja(e){this._=e}function gb(e,n){return e.trim().split(/^|\s+/).map(function(t){var i="",r=t.indexOf(".");if(r>=0&&(i=t.slice(r+1),t=t.slice(0,r)),t&&!n.hasOwnProperty(t))throw new Error("unknown type: "+t);return{type:t,name:i}})}Ja.prototype=Df.prototype={constructor:Ja,on:function(e,n){var t=this._,i=gb(e+"",t),r,o=-1,a=i.length;if(arguments.length<2){for(;++o<a;)if((r=(e=i[o]).type)&&(r=_b(t[r],e.name)))return r;return}if(n!=null&&typeof n!="function")throw new Error("invalid callback: "+n);for(;++o<a;)if(r=(e=i[o]).type)t[r]=If(t[r],e.name,n);else if(n==null)for(r in t)t[r]=If(t[r],e.name,null);return this},copy:function(){var e={},n=this._;for(var t in n)e[t]=n[t].slice();return new Ja(e)},call:function(e,n){if((r=arguments.length-2)>0)for(var t=new Array(r),i=0,r,o;i<r;++i)t[i]=arguments[i+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(o=this._[e],i=0,r=o.length;i<r;++i)o[i].value.apply(n,t)},apply:function(e,n,t){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var i=this._[e],r=0,o=i.length;r<o;++r)i[r].value.apply(n,t)}};function _b(e,n){for(var t=0,i=e.length,r;t<i;++t)if((r=e[t]).name===n)return r.value}function If(e,n,t){for(var i=0,r=e.length;i<r;++i)if(e[i].name===n){e[i]=mb,e=e.slice(0,i).concat(e.slice(i+1));break}return t!=null&&e.push({name:n,value:t}),e}var eo=Df;var es="http://www.w3.org/1999/xhtml",td={svg:"http://www.w3.org/2000/svg",xhtml:es,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function an(e){var n=e+="",t=n.indexOf(":");return t>=0&&(n=e.slice(0,t))!=="xmlns"&&(e=e.slice(t+1)),td.hasOwnProperty(n)?{space:td[n],local:e}:e}function vb(e){return function(){var n=this.ownerDocument,t=this.namespaceURI;return t===es&&n.documentElement.namespaceURI===es?n.createElement(e):n.createElementNS(t,e)}}function yb(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function ts(e){var n=an(e);return(n.local?yb:vb)(n)}function xb(){}function Kn(e){return e==null?xb:function(){return this.querySelector(e)}}function Of(e){typeof e!="function"&&(e=Kn(e));for(var n=this._groups,t=n.length,i=new Array(t),r=0;r<t;++r)for(var o=n[r],a=o.length,s=i[r]=new Array(a),l,c,d=0;d<a;++d)(l=o[d])&&(c=e.call(l,l.__data__,d,o))&&("__data__"in l&&(c.__data__=l.__data__),s[d]=c);return new Oe(i,this._parents)}function nd(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function bb(){return[]}function to(e){return e==null?bb:function(){return this.querySelectorAll(e)}}function Cb(e){return function(){return nd(e.apply(this,arguments))}}function Af(e){typeof e=="function"?e=Cb(e):e=to(e);for(var n=this._groups,t=n.length,i=[],r=[],o=0;o<t;++o)for(var a=n[o],s=a.length,l,c=0;c<s;++c)(l=a[c])&&(i.push(e.call(l,l.__data__,c,a)),r.push(l));return new Oe(i,r)}function no(e){return function(){return this.matches(e)}}function ns(e){return function(n){return n.matches(e)}}var wb=Array.prototype.find;function Mb(e){return function(){return wb.call(this.children,e)}}function Eb(){return this.firstElementChild}function Tf(e){return this.select(e==null?Eb:Mb(typeof e=="function"?e:ns(e)))}var Sb=Array.prototype.filter;function Ib(){return Array.from(this.children)}function Db(e){return function(){return Sb.call(this.children,e)}}function Pf(e){return this.selectAll(e==null?Ib:Db(typeof e=="function"?e:ns(e)))}function kf(e){typeof e!="function"&&(e=no(e));for(var n=this._groups,t=n.length,i=new Array(t),r=0;r<t;++r)for(var o=n[r],a=o.length,s=i[r]=[],l,c=0;c<a;++c)(l=o[c])&&e.call(l,l.__data__,c,o)&&s.push(l);return new Oe(i,this._parents)}function is(e){return new Array(e.length)}function Rf(){return new Oe(this._enter||this._groups.map(is),this._parents)}function io(e,n){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=n}io.prototype={constructor:io,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,n){return this._parent.insertBefore(e,n)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function Ff(e){return function(){return e}}function Ob(e,n,t,i,r,o){for(var a=0,s,l=n.length,c=o.length;a<c;++a)(s=n[a])?(s.__data__=o[a],i[a]=s):t[a]=new io(e,o[a]);for(;a<l;++a)(s=n[a])&&(r[a]=s)}function Ab(e,n,t,i,r,o,a){var s,l,c=new Map,d=n.length,u=o.length,h=new Array(d),_;for(s=0;s<d;++s)(l=n[s])&&(h[s]=_=a.call(l,l.__data__,s,n)+"",c.has(_)?r[s]=l:c.set(_,l));for(s=0;s<u;++s)_=a.call(e,o[s],s,o)+"",(l=c.get(_))?(i[s]=l,l.__data__=o[s],c.delete(_)):t[s]=new io(e,o[s]);for(s=0;s<d;++s)(l=n[s])&&c.get(h[s])===l&&(r[s]=l)}function Tb(e){return e.__data__}function Nf(e,n){if(!arguments.length)return Array.from(this,Tb);var t=n?Ab:Ob,i=this._parents,r=this._groups;typeof e!="function"&&(e=Ff(e));for(var o=r.length,a=new Array(o),s=new Array(o),l=new Array(o),c=0;c<o;++c){var d=i[c],u=r[c],h=u.length,_=Pb(e.call(d,d&&d.__data__,c,i)),x=_.length,C=s[c]=new Array(x),w=a[c]=new Array(x),M=l[c]=new Array(h);t(d,u,C,w,M,_,n);for(var O=0,I=0,b,D;O<x;++O)if(b=C[O]){for(O>=I&&(I=O+1);!(D=w[I])&&++I<x;);b._next=D||null}}return a=new Oe(a,i),a._enter=s,a._exit=l,a}function Pb(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function Vf(){return new Oe(this._exit||this._groups.map(is),this._parents)}function Lf(e,n,t){var i=this.enter(),r=this,o=this.exit();return typeof e=="function"?(i=e(i),i&&(i=i.selection())):i=i.append(e+""),n!=null&&(r=n(r),r&&(r=r.selection())),t==null?o.remove():t(o),i&&r?i.merge(r).order():r}function jf(e){for(var n=e.selection?e.selection():e,t=this._groups,i=n._groups,r=t.length,o=i.length,a=Math.min(r,o),s=new Array(r),l=0;l<a;++l)for(var c=t[l],d=i[l],u=c.length,h=s[l]=new Array(u),_,x=0;x<u;++x)(_=c[x]||d[x])&&(h[x]=_);for(;l<r;++l)s[l]=t[l];return new Oe(s,this._parents)}function Uf(){for(var e=this._groups,n=-1,t=e.length;++n<t;)for(var i=e[n],r=i.length-1,o=i[r],a;--r>=0;)(a=i[r])&&(o&&a.compareDocumentPosition(o)^4&&o.parentNode.insertBefore(a,o),o=a);return this}function $f(e){e||(e=kb);function n(u,h){return u&&h?e(u.__data__,h.__data__):!u-!h}for(var t=this._groups,i=t.length,r=new Array(i),o=0;o<i;++o){for(var a=t[o],s=a.length,l=r[o]=new Array(s),c,d=0;d<s;++d)(c=a[d])&&(l[d]=c);l.sort(n)}return new Oe(r,this._parents).order()}function kb(e,n){return e<n?-1:e>n?1:e>=n?0:NaN}function zf(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function Bf(){return Array.from(this)}function Hf(){for(var e=this._groups,n=0,t=e.length;n<t;++n)for(var i=e[n],r=0,o=i.length;r<o;++r){var a=i[r];if(a)return a}return null}function Gf(){let e=0;for(let n of this)++e;return e}function qf(){return!this.node()}function Wf(e){for(var n=this._groups,t=0,i=n.length;t<i;++t)for(var r=n[t],o=0,a=r.length,s;o<a;++o)(s=r[o])&&e.call(s,s.__data__,o,r);return this}function Rb(e){return function(){this.removeAttribute(e)}}function Fb(e){return function(){this.removeAttributeNS(e.space,e.local)}}function Nb(e,n){return function(){this.setAttribute(e,n)}}function Vb(e,n){return function(){this.setAttributeNS(e.space,e.local,n)}}function Lb(e,n){return function(){var t=n.apply(this,arguments);t==null?this.removeAttribute(e):this.setAttribute(e,t)}}function jb(e,n){return function(){var t=n.apply(this,arguments);t==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,t)}}function Yf(e,n){var t=an(e);if(arguments.length<2){var i=this.node();return t.local?i.getAttributeNS(t.space,t.local):i.getAttribute(t)}return this.each((n==null?t.local?Fb:Rb:typeof n=="function"?t.local?jb:Lb:t.local?Vb:Nb)(t,n))}function rs(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function Ub(e){return function(){this.style.removeProperty(e)}}function $b(e,n,t){return function(){this.style.setProperty(e,n,t)}}function zb(e,n,t){return function(){var i=n.apply(this,arguments);i==null?this.style.removeProperty(e):this.style.setProperty(e,i,t)}}function Xf(e,n,t){return arguments.length>1?this.each((n==null?Ub:typeof n=="function"?zb:$b)(e,n,t??"")):En(this.node(),e)}function En(e,n){return e.style.getPropertyValue(n)||rs(e).getComputedStyle(e,null).getPropertyValue(n)}function Bb(e){return function(){delete this[e]}}function Hb(e,n){return function(){this[e]=n}}function Gb(e,n){return function(){var t=n.apply(this,arguments);t==null?delete this[e]:this[e]=t}}function Kf(e,n){return arguments.length>1?this.each((n==null?Bb:typeof n=="function"?Gb:Hb)(e,n)):this.node()[e]}function Qf(e){return e.trim().split(/^|\s+/)}function id(e){return e.classList||new Zf(e)}function Zf(e){this._node=e,this._names=Qf(e.getAttribute("class")||"")}Zf.prototype={add:function(e){var n=this._names.indexOf(e);n<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var n=this._names.indexOf(e);n>=0&&(this._names.splice(n,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function Jf(e,n){for(var t=id(e),i=-1,r=n.length;++i<r;)t.add(n[i])}function em(e,n){for(var t=id(e),i=-1,r=n.length;++i<r;)t.remove(n[i])}function qb(e){return function(){Jf(this,e)}}function Wb(e){return function(){em(this,e)}}function Yb(e,n){return function(){(n.apply(this,arguments)?Jf:em)(this,e)}}function tm(e,n){var t=Qf(e+"");if(arguments.length<2){for(var i=id(this.node()),r=-1,o=t.length;++r<o;)if(!i.contains(t[r]))return!1;return!0}return this.each((typeof n=="function"?Yb:n?qb:Wb)(t,n))}function Xb(){this.textContent=""}function Kb(e){return function(){this.textContent=e}}function Qb(e){return function(){var n=e.apply(this,arguments);this.textContent=n??""}}function nm(e){return arguments.length?this.each(e==null?Xb:(typeof e=="function"?Qb:Kb)(e)):this.node().textContent}function Zb(){this.innerHTML=""}function Jb(e){return function(){this.innerHTML=e}}function eC(e){return function(){var n=e.apply(this,arguments);this.innerHTML=n??""}}function im(e){return arguments.length?this.each(e==null?Zb:(typeof e=="function"?eC:Jb)(e)):this.node().innerHTML}function tC(){this.nextSibling&&this.parentNode.appendChild(this)}function rm(){return this.each(tC)}function nC(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function om(){return this.each(nC)}function am(e){var n=typeof e=="function"?e:ts(e);return this.select(function(){return this.appendChild(n.apply(this,arguments))})}function iC(){return null}function sm(e,n){var t=typeof e=="function"?e:ts(e),i=n==null?iC:typeof n=="function"?n:Kn(n);return this.select(function(){return this.insertBefore(t.apply(this,arguments),i.apply(this,arguments)||null)})}function rC(){var e=this.parentNode;e&&e.removeChild(this)}function lm(){return this.each(rC)}function oC(){var e=this.cloneNode(!1),n=this.parentNode;return n?n.insertBefore(e,this.nextSibling):e}function aC(){var e=this.cloneNode(!0),n=this.parentNode;return n?n.insertBefore(e,this.nextSibling):e}function cm(e){return this.select(e?aC:oC)}function dm(e){return arguments.length?this.property("__data__",e):this.node().__data__}function sC(e){return function(n){e.call(this,n,this.__data__)}}function lC(e){return e.trim().split(/^|\s+/).map(function(n){var t="",i=n.indexOf(".");return i>=0&&(t=n.slice(i+1),n=n.slice(0,i)),{type:n,name:t}})}function cC(e){return function(){var n=this.__on;if(n){for(var t=0,i=-1,r=n.length,o;t<r;++t)o=n[t],(!e.type||o.type===e.type)&&o.name===e.name?this.removeEventListener(o.type,o.listener,o.options):n[++i]=o;++i?n.length=i:delete this.__on}}}function dC(e,n,t){return function(){var i=this.__on,r,o=sC(n);if(i){for(var a=0,s=i.length;a<s;++a)if((r=i[a]).type===e.type&&r.name===e.name){this.removeEventListener(r.type,r.listener,r.options),this.addEventListener(r.type,r.listener=o,r.options=t),r.value=n;return}}this.addEventListener(e.type,o,t),r={type:e.type,name:e.name,value:n,listener:o,options:t},i?i.push(r):this.__on=[r]}}function um(e,n,t){var i=lC(e+""),r,o=i.length,a;if(arguments.length<2){var s=this.node().__on;if(s){for(var l=0,c=s.length,d;l<c;++l)for(r=0,d=s[l];r<o;++r)if((a=i[r]).type===d.type&&a.name===d.name)return d.value}return}for(s=n?dC:cC,r=0;r<o;++r)this.each(s(i[r],n,t));return this}function pm(e,n,t){var i=rs(e),r=i.CustomEvent;typeof r=="function"?r=new r(n,t):(r=i.document.createEvent("Event"),t?(r.initEvent(n,t.bubbles,t.cancelable),r.detail=t.detail):r.initEvent(n,!1,!1)),e.dispatchEvent(r)}function uC(e,n){return function(){return pm(this,e,n)}}function pC(e,n){return function(){return pm(this,e,n.apply(this,arguments))}}function hm(e,n){return this.each((typeof n=="function"?pC:uC)(e,n))}function*fm(){for(var e=this._groups,n=0,t=e.length;n<t;++n)for(var i=e[n],r=0,o=i.length,a;r<o;++r)(a=i[r])&&(yield a)}var rd=[null];function Oe(e,n){this._groups=e,this._parents=n}function mm(){return new Oe([[document.documentElement]],rd)}function hC(){return this}Oe.prototype=mm.prototype={constructor:Oe,select:Of,selectAll:Af,selectChild:Tf,selectChildren:Pf,filter:kf,data:Nf,enter:Rf,exit:Vf,join:Lf,merge:jf,selection:hC,order:Uf,sort:$f,call:zf,nodes:Bf,node:Hf,size:Gf,empty:qf,each:Wf,attr:Yf,style:Xf,property:Kf,classed:tm,text:nm,html:im,raise:rm,lower:om,append:am,insert:sm,remove:lm,clone:cm,datum:dm,on:um,dispatch:hm,[Symbol.iterator]:fm};var sn=mm;function ce(e){return typeof e=="string"?new Oe([[document.querySelector(e)]],[document.documentElement]):new Oe([[e]],rd)}function gm(e){let n;for(;n=e.sourceEvent;)e=n;return e}function os(e,n){if(e=gm(e),n===void 0&&(n=e.currentTarget),n){var t=n.ownerSVGElement||n;if(t.createSVGPoint){var i=t.createSVGPoint();return i.x=e.clientX,i.y=e.clientY,i=i.matrixTransform(n.getScreenCTM().inverse()),[i.x,i.y]}if(n.getBoundingClientRect){var r=n.getBoundingClientRect();return[e.clientX-r.left-n.clientLeft,e.clientY-r.top-n.clientTop]}}return[e.pageX,e.pageY]}var _m={passive:!1},Qn={capture:!0,passive:!1};function as(e){e.stopImmediatePropagation()}function Sn(e){e.preventDefault(),e.stopImmediatePropagation()}function vm(e){var n=e.document.documentElement,t=ce(e).on("dragstart.drag",Sn,Qn);"onselectstart"in n?t.on("selectstart.drag",Sn,Qn):(n.__noselect=n.style.MozUserSelect,n.style.MozUserSelect="none")}function ym(e,n){var t=e.document.documentElement,i=ce(e).on("dragstart.drag",null);n&&(i.on("click.drag",Sn,Qn),setTimeout(function(){i.on("click.drag",null)},0)),"onselectstart"in t?i.on("selectstart.drag",null):(t.style.MozUserSelect=t.__noselect,delete t.__noselect)}var ro=e=>()=>e;function oo(e,{sourceEvent:n,subject:t,target:i,identifier:r,active:o,x:a,y:s,dx:l,dy:c,dispatch:d}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:n,enumerable:!0,configurable:!0},subject:{value:t,enumerable:!0,configurable:!0},target:{value:i,enumerable:!0,configurable:!0},identifier:{value:r,enumerable:!0,configurable:!0},active:{value:o,enumerable:!0,configurable:!0},x:{value:a,enumerable:!0,configurable:!0},y:{value:s,enumerable:!0,configurable:!0},dx:{value:l,enumerable:!0,configurable:!0},dy:{value:c,enumerable:!0,configurable:!0},_:{value:d}})}oo.prototype.on=function(){var e=this._.on.apply(this._,arguments);return e===this._?this:e};function fC(e){return!e.ctrlKey&&!e.button}function mC(){return this.parentNode}function gC(e,n){return n??{x:e.x,y:e.y}}function _C(){return navigator.maxTouchPoints||"ontouchstart"in this}function od(){var e=fC,n=mC,t=gC,i=_C,r={},o=eo("start","drag","end"),a=0,s,l,c,d,u=0;function h(b){b.on("mousedown.drag",_).filter(i).on("touchstart.drag",w).on("touchmove.drag",M,_m).on("touchend.drag touchcancel.drag",O).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function _(b,D){if(!(d||!e.call(this,b,D))){var R=I(this,n.call(this,b,D),b,D,"mouse");R&&(ce(b.view).on("mousemove.drag",x,Qn).on("mouseup.drag",C,Qn),vm(b.view),as(b),c=!1,s=b.clientX,l=b.clientY,R("start",b))}}function x(b){if(Sn(b),!c){var D=b.clientX-s,R=b.clientY-l;c=D*D+R*R>u}r.mouse("drag",b)}function C(b){ce(b.view).on("mousemove.drag mouseup.drag",null),ym(b.view,c),Sn(b),r.mouse("end",b)}function w(b,D){if(e.call(this,b,D)){var R=b.changedTouches,L=n.call(this,b,D),z=R.length,H,q;for(H=0;H<z;++H)(q=I(this,L,b,D,R[H].identifier,R[H]))&&(as(b),q("start",b,R[H]))}}function M(b){var D=b.changedTouches,R=D.length,L,z;for(L=0;L<R;++L)(z=r[D[L].identifier])&&(Sn(b),z("drag",b,D[L]))}function O(b){var D=b.changedTouches,R=D.length,L,z;for(d&&clearTimeout(d),d=setTimeout(function(){d=null},500),L=0;L<R;++L)(z=r[D[L].identifier])&&(as(b),z("end",b,D[L]))}function I(b,D,R,L,z,H){var q=o.copy(),A=os(H||R,D),K,F,j;if((j=t.call(b,new oo("beforestart",{sourceEvent:R,target:h,identifier:z,active:a,x:A[0],y:A[1],dx:0,dy:0,dispatch:q}),L))!=null)return K=j.x-A[0]||0,F=j.y-A[1]||0,function T(W,oe,me){var ue=A,tt;switch(W){case"start":r[z]=T,tt=a++;break;case"end":delete r[z],--a;case"drag":A=os(me||oe,D),tt=a;break}q.call(W,b,new oo(W,{sourceEvent:oe,subject:j,target:h,identifier:z,active:tt,x:A[0]+K,y:A[1]+F,dx:A[0]-ue[0],dy:A[1]-ue[1],dispatch:q}),L)}}return h.filter=function(b){return arguments.length?(e=typeof b=="function"?b:ro(!!b),h):e},h.container=function(b){return arguments.length?(n=typeof b=="function"?b:ro(b),h):n},h.subject=function(b){return arguments.length?(t=typeof b=="function"?b:ro(b),h):t},h.touchable=function(b){return arguments.length?(i=typeof b=="function"?b:ro(!!b),h):i},h.on=function(){var b=o.on.apply(o,arguments);return b===o?h:b},h.clickDistance=function(b){return arguments.length?(u=(b=+b)*b,h):Math.sqrt(u)},h}function ss(e,n,t){e.prototype=n.prototype=t,t.constructor=e}function ad(e,n){var t=Object.create(e.prototype);for(var i in n)t[i]=n[i];return t}function lo(){}var ao=.7,ds=1/ao,Li="\\s*([+-]?\\d+)\\s*",so="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Wt="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",vC=/^#([0-9a-f]{3,8})$/,yC=new RegExp(`^rgb\\(${Li},${Li},${Li}\\)$`),xC=new RegExp(`^rgb\\(${Wt},${Wt},${Wt}\\)$`),bC=new RegExp(`^rgba\\(${Li},${Li},${Li},${so}\\)$`),CC=new RegExp(`^rgba\\(${Wt},${Wt},${Wt},${so}\\)$`),wC=new RegExp(`^hsl\\(${so},${Wt},${Wt}\\)$`),MC=new RegExp(`^hsla\\(${so},${Wt},${Wt},${so}\\)$`),xm={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};ss(lo,Nt,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:bm,formatHex:bm,formatHex8:EC,formatHsl:SC,formatRgb:Cm,toString:Cm});function bm(){return this.rgb().formatHex()}function EC(){return this.rgb().formatHex8()}function SC(){return Dm(this).formatHsl()}function Cm(){return this.rgb().formatRgb()}function Nt(e){var n,t;return e=(e+"").trim().toLowerCase(),(n=vC.exec(e))?(t=n[1].length,n=parseInt(n[1],16),t===6?wm(n):t===3?new at(n>>8&15|n>>4&240,n>>4&15|n&240,(n&15)<<4|n&15,1):t===8?ls(n>>24&255,n>>16&255,n>>8&255,(n&255)/255):t===4?ls(n>>12&15|n>>8&240,n>>8&15|n>>4&240,n>>4&15|n&240,((n&15)<<4|n&15)/255):null):(n=yC.exec(e))?new at(n[1],n[2],n[3],1):(n=xC.exec(e))?new at(n[1]*255/100,n[2]*255/100,n[3]*255/100,1):(n=bC.exec(e))?ls(n[1],n[2],n[3],n[4]):(n=CC.exec(e))?ls(n[1]*255/100,n[2]*255/100,n[3]*255/100,n[4]):(n=wC.exec(e))?Sm(n[1],n[2]/100,n[3]/100,1):(n=MC.exec(e))?Sm(n[1],n[2]/100,n[3]/100,n[4]):xm.hasOwnProperty(e)?wm(xm[e]):e==="transparent"?new at(NaN,NaN,NaN,0):null}function wm(e){return new at(e>>16&255,e>>8&255,e&255,1)}function ls(e,n,t,i){return i<=0&&(e=n=t=NaN),new at(e,n,t,i)}function IC(e){return e instanceof lo||(e=Nt(e)),e?(e=e.rgb(),new at(e.r,e.g,e.b,e.opacity)):new at}function ji(e,n,t,i){return arguments.length===1?IC(e):new at(e,n,t,i??1)}function at(e,n,t,i){this.r=+e,this.g=+n,this.b=+t,this.opacity=+i}ss(at,ji,ad(lo,{brighter(e){return e=e==null?ds:Math.pow(ds,e),new at(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?ao:Math.pow(ao,e),new at(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new at(Jn(this.r),Jn(this.g),Jn(this.b),us(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Mm,formatHex:Mm,formatHex8:DC,formatRgb:Em,toString:Em}));function Mm(){return`#${Zn(this.r)}${Zn(this.g)}${Zn(this.b)}`}function DC(){return`#${Zn(this.r)}${Zn(this.g)}${Zn(this.b)}${Zn((isNaN(this.opacity)?1:this.opacity)*255)}`}function Em(){let e=us(this.opacity);return`${e===1?"rgb(":"rgba("}${Jn(this.r)}, ${Jn(this.g)}, ${Jn(this.b)}${e===1?")":`, ${e})`}`}function us(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function Jn(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function Zn(e){return e=Jn(e),(e<16?"0":"")+e.toString(16)}function Sm(e,n,t,i){return i<=0?e=n=t=NaN:t<=0||t>=1?e=n=NaN:n<=0&&(e=NaN),new Ft(e,n,t,i)}function Dm(e){if(e instanceof Ft)return new Ft(e.h,e.s,e.l,e.opacity);if(e instanceof lo||(e=Nt(e)),!e)return new Ft;if(e instanceof Ft)return e;e=e.rgb();var n=e.r/255,t=e.g/255,i=e.b/255,r=Math.min(n,t,i),o=Math.max(n,t,i),a=NaN,s=o-r,l=(o+r)/2;return s?(n===o?a=(t-i)/s+(t<i)*6:t===o?a=(i-n)/s+2:a=(n-t)/s+4,s/=l<.5?o+r:2-o-r,a*=60):s=l>0&&l<1?0:a,new Ft(a,s,l,e.opacity)}function Om(e,n,t,i){return arguments.length===1?Dm(e):new Ft(e,n,t,i??1)}function Ft(e,n,t,i){this.h=+e,this.s=+n,this.l=+t,this.opacity=+i}ss(Ft,Om,ad(lo,{brighter(e){return e=e==null?ds:Math.pow(ds,e),new Ft(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?ao:Math.pow(ao,e),new Ft(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,n=isNaN(e)||isNaN(this.s)?0:this.s,t=this.l,i=t+(t<.5?t:1-t)*n,r=2*t-i;return new at(sd(e>=240?e-240:e+120,r,i),sd(e,r,i),sd(e<120?e+240:e-120,r,i),this.opacity)},clamp(){return new Ft(Im(this.h),cs(this.s),cs(this.l),us(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){let e=us(this.opacity);return`${e===1?"hsl(":"hsla("}${Im(this.h)}, ${cs(this.s)*100}%, ${cs(this.l)*100}%${e===1?")":`, ${e})`}`}}));function Im(e){return e=(e||0)%360,e<0?e+360:e}function cs(e){return Math.max(0,Math.min(1,e||0))}function sd(e,n,t){return(e<60?n+(t-n)*e/60:e<180?t:e<240?n+(t-n)*(240-e)/60:n)*255}function ld(e,n,t,i,r){var o=e*e,a=o*e;return((1-3*e+3*o-a)*n+(4-6*o+3*a)*t+(1+3*e+3*o-3*a)*i+a*r)/6}function Am(e){var n=e.length-1;return function(t){var i=t<=0?t=0:t>=1?(t=1,n-1):Math.floor(t*n),r=e[i],o=e[i+1],a=i>0?e[i-1]:2*r-o,s=i<n-1?e[i+2]:2*o-r;return ld((t-i/n)*n,a,r,o,s)}}function Tm(e){var n=e.length;return function(t){var i=Math.floor(((t%=1)<0?++t:t)*n),r=e[(i+n-1)%n],o=e[i%n],a=e[(i+1)%n],s=e[(i+2)%n];return ld((t-i/n)*n,r,o,a,s)}}var co=e=>()=>e;function OC(e,n){return function(t){return e+t*n}}function AC(e,n,t){return e=Math.pow(e,t),n=Math.pow(n,t)-e,t=1/t,function(i){return Math.pow(e+i*n,t)}}function Pm(e){return(e=+e)==1?ps:function(n,t){return t-n?AC(n,t,e):co(isNaN(n)?t:n)}}function ps(e,n){var t=n-e;return t?OC(e,t):co(isNaN(e)?n:e)}var ei=function e(n){var t=Pm(n);function i(r,o){var a=t((r=ji(r)).r,(o=ji(o)).r),s=t(r.g,o.g),l=t(r.b,o.b),c=ps(r.opacity,o.opacity);return function(d){return r.r=a(d),r.g=s(d),r.b=l(d),r.opacity=c(d),r+""}}return i.gamma=e,i}(1);function km(e){return function(n){var t=n.length,i=new Array(t),r=new Array(t),o=new Array(t),a,s;for(a=0;a<t;++a)s=ji(n[a]),i[a]=s.r||0,r[a]=s.g||0,o[a]=s.b||0;return i=e(i),r=e(r),o=e(o),s.opacity=1,function(l){return s.r=i(l),s.g=r(l),s.b=o(l),s+""}}}var cd=km(Am),TC=km(Tm);function Rm(e,n){n||(n=[]);var t=e?Math.min(n.length,e.length):0,i=n.slice(),r;return function(o){for(r=0;r<t;++r)i[r]=e[r]*(1-o)+n[r]*o;return i}}function Fm(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function Nm(e,n){var t=n?n.length:0,i=e?Math.min(t,e.length):0,r=new Array(i),o=new Array(t),a;for(a=0;a<i;++a)r[a]=ln(e[a],n[a]);for(;a<t;++a)o[a]=n[a];return function(s){for(a=0;a<i;++a)o[a]=r[a](s);return o}}function Vm(e,n){var t=new Date;return e=+e,n=+n,function(i){return t.setTime(e*(1-i)+n*i),t}}function Ue(e,n){return e=+e,n=+n,function(t){return e*(1-t)+n*t}}function Lm(e,n){var t={},i={},r;(e===null||typeof e!="object")&&(e={}),(n===null||typeof n!="object")&&(n={});for(r in n)r in e?t[r]=ln(e[r],n[r]):i[r]=n[r];return function(o){for(r in t)i[r]=t[r](o);return i}}var ud=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,dd=new RegExp(ud.source,"g");function PC(e){return function(){return e}}function kC(e){return function(n){return e(n)+""}}function uo(e,n){var t=ud.lastIndex=dd.lastIndex=0,i,r,o,a=-1,s=[],l=[];for(e=e+"",n=n+"";(i=ud.exec(e))&&(r=dd.exec(n));)(o=r.index)>t&&(o=n.slice(t,o),s[a]?s[a]+=o:s[++a]=o),(i=i[0])===(r=r[0])?s[a]?s[a]+=r:s[++a]=r:(s[++a]=null,l.push({i:a,x:Ue(i,r)})),t=dd.lastIndex;return t<n.length&&(o=n.slice(t),s[a]?s[a]+=o:s[++a]=o),s.length<2?l[0]?kC(l[0].x):PC(n):(n=l.length,function(c){for(var d=0,u;d<n;++d)s[(u=l[d]).i]=u.x(c);return s.join("")})}function ln(e,n){var t=typeof n,i;return n==null||t==="boolean"?co(n):(t==="number"?Ue:t==="string"?(i=Nt(n))?(n=i,ei):uo:n instanceof Nt?ei:n instanceof Date?Vm:Fm(n)?Rm:Array.isArray(n)?Nm:typeof n.valueOf!="function"&&typeof n.toString!="function"||isNaN(n)?Lm:Ue)(e,n)}function po(e,n){return e=+e,n=+n,function(t){return Math.round(e*(1-t)+n*t)}}var jm=180/Math.PI,hs={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function pd(e,n,t,i,r,o){var a,s,l;return(a=Math.sqrt(e*e+n*n))&&(e/=a,n/=a),(l=e*t+n*i)&&(t-=e*l,i-=n*l),(s=Math.sqrt(t*t+i*i))&&(t/=s,i/=s,l/=s),e*i<n*t&&(e=-e,n=-n,l=-l,a=-a),{translateX:r,translateY:o,rotate:Math.atan2(n,e)*jm,skewX:Math.atan(l)*jm,scaleX:a,scaleY:s}}var fs;function Um(e){let n=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return n.isIdentity?hs:pd(n.a,n.b,n.c,n.d,n.e,n.f)}function $m(e){return e==null?hs:(fs||(fs=document.createElementNS("http://www.w3.org/2000/svg","g")),fs.setAttribute("transform",e),(e=fs.transform.baseVal.consolidate())?(e=e.matrix,pd(e.a,e.b,e.c,e.d,e.e,e.f)):hs)}function zm(e,n,t,i){function r(c){return c.length?c.pop()+" ":""}function o(c,d,u,h,_,x){if(c!==u||d!==h){var C=_.push("translate(",null,n,null,t);x.push({i:C-4,x:Ue(c,u)},{i:C-2,x:Ue(d,h)})}else(u||h)&&_.push("translate("+u+n+h+t)}function a(c,d,u,h){c!==d?(c-d>180?d+=360:d-c>180&&(c+=360),h.push({i:u.push(r(u)+"rotate(",null,i)-2,x:Ue(c,d)})):d&&u.push(r(u)+"rotate("+d+i)}function s(c,d,u,h){c!==d?h.push({i:u.push(r(u)+"skewX(",null,i)-2,x:Ue(c,d)}):d&&u.push(r(u)+"skewX("+d+i)}function l(c,d,u,h,_,x){if(c!==u||d!==h){var C=_.push(r(_)+"scale(",null,",",null,")");x.push({i:C-4,x:Ue(c,u)},{i:C-2,x:Ue(d,h)})}else(u!==1||h!==1)&&_.push(r(_)+"scale("+u+","+h+")")}return function(c,d){var u=[],h=[];return c=e(c),d=e(d),o(c.translateX,c.translateY,d.translateX,d.translateY,u,h),a(c.rotate,d.rotate,u,h),s(c.skewX,d.skewX,u,h),l(c.scaleX,c.scaleY,d.scaleX,d.scaleY,u,h),c=d=null,function(_){for(var x=-1,C=h.length,w;++x<C;)u[(w=h[x]).i]=w.x(_);return u.join("")}}}var hd=zm(Um,"px, ","px)","deg)"),fd=zm($m,", ",")",")");var Ui=0,fo=0,ho=0,Hm=1e3,ms,mo,gs=0,ti=0,_s=0,go=typeof performance=="object"&&performance.now?performance:Date,Gm=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function vo(){return ti||(Gm(RC),ti=go.now()+_s)}function RC(){ti=0}function _o(){this._call=this._time=this._next=null}_o.prototype=$i.prototype={constructor:_o,restart:function(e,n,t){if(typeof e!="function")throw new TypeError("callback is not a function");t=(t==null?vo():+t)+(n==null?0:+n),!this._next&&mo!==this&&(mo?mo._next=this:ms=this,mo=this),this._call=e,this._time=t,md()},stop:function(){this._call&&(this._call=null,this._time=1/0,md())}};function $i(e,n,t){var i=new _o;return i.restart(e,n,t),i}function qm(){vo(),++Ui;for(var e=ms,n;e;)(n=ti-e._time)>=0&&e._call.call(void 0,n),e=e._next;--Ui}function Bm(){ti=(gs=go.now())+_s,Ui=fo=0;try{qm()}finally{Ui=0,NC(),ti=0}}function FC(){var e=go.now(),n=e-gs;n>Hm&&(_s-=n,gs=e)}function NC(){for(var e,n=ms,t,i=1/0;n;)n._call?(i>n._time&&(i=n._time),e=n,n=n._next):(t=n._next,n._next=null,n=e?e._next=t:ms=t);mo=e,md(i)}function md(e){if(!Ui){fo&&(fo=clearTimeout(fo));var n=e-ti;n>24?(e<1/0&&(fo=setTimeout(Bm,e-go.now()-_s)),ho&&(ho=clearInterval(ho))):(ho||(gs=go.now(),ho=setInterval(FC,Hm)),Ui=1,Gm(Bm))}}function vs(e,n,t){var i=new _o;return n=n==null?0:+n,i.restart(r=>{i.stop(),e(r+n)},n,t),i}var VC=eo("start","end","cancel","interrupt"),LC=[],Xm=0,Wm=1,xs=2,ys=3,Ym=4,bs=5,yo=6;function In(e,n,t,i,r,o){var a=e.__transition;if(!a)e.__transition={};else if(t in a)return;jC(e,t,{name:n,index:i,group:r,on:VC,tween:LC,time:o.time,delay:o.delay,duration:o.duration,ease:o.ease,timer:null,state:Xm})}function xo(e,n){var t=Re(e,n);if(t.state>Xm)throw new Error("too late; already scheduled");return t}function $e(e,n){var t=Re(e,n);if(t.state>ys)throw new Error("too late; already running");return t}function Re(e,n){var t=e.__transition;if(!t||!(t=t[n]))throw new Error("transition not found");return t}function jC(e,n,t){var i=e.__transition,r;i[n]=t,t.timer=$i(o,0,t.time);function o(c){t.state=Wm,t.timer.restart(a,t.delay,t.time),t.delay<=c&&a(c-t.delay)}function a(c){var d,u,h,_;if(t.state!==Wm)return l();for(d in i)if(_=i[d],_.name===t.name){if(_.state===ys)return vs(a);_.state===Ym?(_.state=yo,_.timer.stop(),_.on.call("interrupt",e,e.__data__,_.index,_.group),delete i[d]):+d<n&&(_.state=yo,_.timer.stop(),_.on.call("cancel",e,e.__data__,_.index,_.group),delete i[d])}if(vs(function(){t.state===ys&&(t.state=Ym,t.timer.restart(s,t.delay,t.time),s(c))}),t.state=xs,t.on.call("start",e,e.__data__,t.index,t.group),t.state===xs){for(t.state=ys,r=new Array(h=t.tween.length),d=0,u=-1;d<h;++d)(_=t.tween[d].value.call(e,e.__data__,t.index,t.group))&&(r[++u]=_);r.length=u+1}}function s(c){for(var d=c<t.duration?t.ease.call(null,c/t.duration):(t.timer.restart(l),t.state=bs,1),u=-1,h=r.length;++u<h;)r[u].call(e,d);t.state===bs&&(t.on.call("end",e,e.__data__,t.index,t.group),l())}function l(){t.state=yo,t.timer.stop(),delete i[n];for(var c in i)return;delete e.__transition}}function Cs(e,n){var t=e.__transition,i,r,o=!0,a;if(t){n=n==null?null:n+"";for(a in t){if((i=t[a]).name!==n){o=!1;continue}r=i.state>xs&&i.state<bs,i.state=yo,i.timer.stop(),i.on.call(r?"interrupt":"cancel",e,e.__data__,i.index,i.group),delete t[a]}o&&delete e.__transition}}function Km(e){return this.each(function(){Cs(this,e)})}function UC(e,n){var t,i;return function(){var r=$e(this,e),o=r.tween;if(o!==t){i=t=o;for(var a=0,s=i.length;a<s;++a)if(i[a].name===n){i=i.slice(),i.splice(a,1);break}}r.tween=i}}function $C(e,n,t){var i,r;if(typeof t!="function")throw new Error;return function(){var o=$e(this,e),a=o.tween;if(a!==i){r=(i=a).slice();for(var s={name:n,value:t},l=0,c=r.length;l<c;++l)if(r[l].name===n){r[l]=s;break}l===c&&r.push(s)}o.tween=r}}function Qm(e,n){var t=this._id;if(e+="",arguments.length<2){for(var i=Re(this.node(),t).tween,r=0,o=i.length,a;r<o;++r)if((a=i[r]).name===e)return a.value;return null}return this.each((n==null?UC:$C)(t,e,n))}function zi(e,n,t){var i=e._id;return e.each(function(){var r=$e(this,i);(r.value||(r.value={}))[n]=t.apply(this,arguments)}),function(r){return Re(r,i).value[n]}}function ws(e,n){var t;return(typeof n=="number"?Ue:n instanceof Nt?ei:(t=Nt(n))?(n=t,ei):uo)(e,n)}function zC(e){return function(){this.removeAttribute(e)}}function BC(e){return function(){this.removeAttributeNS(e.space,e.local)}}function HC(e,n,t){var i,r=t+"",o;return function(){var a=this.getAttribute(e);return a===r?null:a===i?o:o=n(i=a,t)}}function GC(e,n,t){var i,r=t+"",o;return function(){var a=this.getAttributeNS(e.space,e.local);return a===r?null:a===i?o:o=n(i=a,t)}}function qC(e,n,t){var i,r,o;return function(){var a,s=t(this),l;return s==null?void this.removeAttribute(e):(a=this.getAttribute(e),l=s+"",a===l?null:a===i&&l===r?o:(r=l,o=n(i=a,s)))}}function WC(e,n,t){var i,r,o;return function(){var a,s=t(this),l;return s==null?void this.removeAttributeNS(e.space,e.local):(a=this.getAttributeNS(e.space,e.local),l=s+"",a===l?null:a===i&&l===r?o:(r=l,o=n(i=a,s)))}}function Zm(e,n){var t=an(e),i=t==="transform"?fd:ws;return this.attrTween(e,typeof n=="function"?(t.local?WC:qC)(t,i,zi(this,"attr."+e,n)):n==null?(t.local?BC:zC)(t):(t.local?GC:HC)(t,i,n))}function YC(e,n){return function(t){this.setAttribute(e,n.call(this,t))}}function XC(e,n){return function(t){this.setAttributeNS(e.space,e.local,n.call(this,t))}}function KC(e,n){var t,i;function r(){var o=n.apply(this,arguments);return o!==i&&(t=(i=o)&&XC(e,o)),t}return r._value=n,r}function QC(e,n){var t,i;function r(){var o=n.apply(this,arguments);return o!==i&&(t=(i=o)&&YC(e,o)),t}return r._value=n,r}function Jm(e,n){var t="attr."+e;if(arguments.length<2)return(t=this.tween(t))&&t._value;if(n==null)return this.tween(t,null);if(typeof n!="function")throw new Error;var i=an(e);return this.tween(t,(i.local?KC:QC)(i,n))}function ZC(e,n){return function(){xo(this,e).delay=+n.apply(this,arguments)}}function JC(e,n){return n=+n,function(){xo(this,e).delay=n}}function eg(e){var n=this._id;return arguments.length?this.each((typeof e=="function"?ZC:JC)(n,e)):Re(this.node(),n).delay}function ew(e,n){return function(){$e(this,e).duration=+n.apply(this,arguments)}}function tw(e,n){return n=+n,function(){$e(this,e).duration=n}}function tg(e){var n=this._id;return arguments.length?this.each((typeof e=="function"?ew:tw)(n,e)):Re(this.node(),n).duration}function nw(e,n){if(typeof n!="function")throw new Error;return function(){$e(this,e).ease=n}}function ng(e){var n=this._id;return arguments.length?this.each(nw(n,e)):Re(this.node(),n).ease}function iw(e,n){return function(){var t=n.apply(this,arguments);if(typeof t!="function")throw new Error;$e(this,e).ease=t}}function ig(e){if(typeof e!="function")throw new Error;return this.each(iw(this._id,e))}function rg(e){typeof e!="function"&&(e=no(e));for(var n=this._groups,t=n.length,i=new Array(t),r=0;r<t;++r)for(var o=n[r],a=o.length,s=i[r]=[],l,c=0;c<a;++c)(l=o[c])&&e.call(l,l.__data__,c,o)&&s.push(l);return new Qe(i,this._parents,this._name,this._id)}function og(e){if(e._id!==this._id)throw new Error;for(var n=this._groups,t=e._groups,i=n.length,r=t.length,o=Math.min(i,r),a=new Array(i),s=0;s<o;++s)for(var l=n[s],c=t[s],d=l.length,u=a[s]=new Array(d),h,_=0;_<d;++_)(h=l[_]||c[_])&&(u[_]=h);for(;s<i;++s)a[s]=n[s];return new Qe(a,this._parents,this._name,this._id)}function rw(e){return(e+"").trim().split(/^|\s+/).every(function(n){var t=n.indexOf(".");return t>=0&&(n=n.slice(0,t)),!n||n==="start"})}function ow(e,n,t){var i,r,o=rw(n)?xo:$e;return function(){var a=o(this,e),s=a.on;s!==i&&(r=(i=s).copy()).on(n,t),a.on=r}}function ag(e,n){var t=this._id;return arguments.length<2?Re(this.node(),t).on.on(e):this.each(ow(t,e,n))}function aw(e){return function(){var n=this.parentNode;for(var t in this.__transition)if(+t!==e)return;n&&n.removeChild(this)}}function sg(){return this.on("end.remove",aw(this._id))}function lg(e){var n=this._name,t=this._id;typeof e!="function"&&(e=Kn(e));for(var i=this._groups,r=i.length,o=new Array(r),a=0;a<r;++a)for(var s=i[a],l=s.length,c=o[a]=new Array(l),d,u,h=0;h<l;++h)(d=s[h])&&(u=e.call(d,d.__data__,h,s))&&("__data__"in d&&(u.__data__=d.__data__),c[h]=u,In(c[h],n,t,h,c,Re(d,t)));return new Qe(o,this._parents,n,t)}function cg(e){var n=this._name,t=this._id;typeof e!="function"&&(e=to(e));for(var i=this._groups,r=i.length,o=[],a=[],s=0;s<r;++s)for(var l=i[s],c=l.length,d,u=0;u<c;++u)if(d=l[u]){for(var h=e.call(d,d.__data__,u,l),_,x=Re(d,t),C=0,w=h.length;C<w;++C)(_=h[C])&&In(_,n,t,C,h,x);o.push(h),a.push(d)}return new Qe(o,a,n,t)}var sw=sn.prototype.constructor;function dg(){return new sw(this._groups,this._parents)}function lw(e,n){var t,i,r;return function(){var o=En(this,e),a=(this.style.removeProperty(e),En(this,e));return o===a?null:o===t&&a===i?r:r=n(t=o,i=a)}}function ug(e){return function(){this.style.removeProperty(e)}}function cw(e,n,t){var i,r=t+"",o;return function(){var a=En(this,e);return a===r?null:a===i?o:o=n(i=a,t)}}function dw(e,n,t){var i,r,o;return function(){var a=En(this,e),s=t(this),l=s+"";return s==null&&(l=s=(this.style.removeProperty(e),En(this,e))),a===l?null:a===i&&l===r?o:(r=l,o=n(i=a,s))}}function uw(e,n){var t,i,r,o="style."+n,a="end."+o,s;return function(){var l=$e(this,e),c=l.on,d=l.value[o]==null?s||(s=ug(n)):void 0;(c!==t||r!==d)&&(i=(t=c).copy()).on(a,r=d),l.on=i}}function pg(e,n,t){var i=(e+="")=="transform"?hd:ws;return n==null?this.styleTween(e,lw(e,i)).on("end.style."+e,ug(e)):typeof n=="function"?this.styleTween(e,dw(e,i,zi(this,"style."+e,n))).each(uw(this._id,e)):this.styleTween(e,cw(e,i,n),t).on("end.style."+e,null)}function pw(e,n,t){return function(i){this.style.setProperty(e,n.call(this,i),t)}}function hw(e,n,t){var i,r;function o(){var a=n.apply(this,arguments);return a!==r&&(i=(r=a)&&pw(e,a,t)),i}return o._value=n,o}function hg(e,n,t){var i="style."+(e+="");if(arguments.length<2)return(i=this.tween(i))&&i._value;if(n==null)return this.tween(i,null);if(typeof n!="function")throw new Error;return this.tween(i,hw(e,n,t??""))}function fw(e){return function(){this.textContent=e}}function mw(e){return function(){var n=e(this);this.textContent=n??""}}function fg(e){return this.tween("text",typeof e=="function"?mw(zi(this,"text",e)):fw(e==null?"":e+""))}function gw(e){return function(n){this.textContent=e.call(this,n)}}function _w(e){var n,t;function i(){var r=e.apply(this,arguments);return r!==t&&(n=(t=r)&&gw(r)),n}return i._value=e,i}function mg(e){var n="text";if(arguments.length<1)return(n=this.tween(n))&&n._value;if(e==null)return this.tween(n,null);if(typeof e!="function")throw new Error;return this.tween(n,_w(e))}function gg(){for(var e=this._name,n=this._id,t=Ms(),i=this._groups,r=i.length,o=0;o<r;++o)for(var a=i[o],s=a.length,l,c=0;c<s;++c)if(l=a[c]){var d=Re(l,n);In(l,e,t,c,a,{time:d.time+d.delay+d.duration,delay:0,duration:d.duration,ease:d.ease})}return new Qe(i,this._parents,e,t)}function _g(){var e,n,t=this,i=t._id,r=t.size();return new Promise(function(o,a){var s={value:a},l={value:function(){--r===0&&o()}};t.each(function(){var c=$e(this,i),d=c.on;d!==e&&(n=(e=d).copy(),n._.cancel.push(s),n._.interrupt.push(s),n._.end.push(l)),c.on=n}),r===0&&o()})}var vw=0;function Qe(e,n,t,i){this._groups=e,this._parents=n,this._name=t,this._id=i}function vg(e){return sn().transition(e)}function Ms(){return++vw}var cn=sn.prototype;Qe.prototype=vg.prototype={constructor:Qe,select:lg,selectAll:cg,selectChild:cn.selectChild,selectChildren:cn.selectChildren,filter:rg,merge:og,selection:dg,transition:gg,call:cn.call,nodes:cn.nodes,node:cn.node,size:cn.size,empty:cn.empty,each:cn.each,on:ag,attr:Zm,attrTween:Jm,style:pg,styleTween:hg,text:fg,textTween:mg,remove:sg,tween:Qm,delay:eg,duration:tg,ease:ng,easeVarying:ig,end:_g,[Symbol.iterator]:cn[Symbol.iterator]};function Es(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var yw={time:null,delay:0,duration:250,ease:Es};function xw(e,n){for(var t;!(t=e.__transition)||!(t=t[n]);)if(!(e=e.parentNode))throw new Error(`transition ${n} not found`);return t}function yg(e){var n,t;e instanceof Qe?(n=e._id,e=e._name):(n=Ms(),(t=yw).time=vo(),e=e==null?null:e+"");for(var i=this._groups,r=i.length,o=0;o<r;++o)for(var a=i[o],s=a.length,l,c=0;c<s;++c)(l=a[c])&&In(l,e,n,c,a,t||xw(l,n));return new Qe(i,this._parents,e,n)}sn.prototype.interrupt=Km;sn.prototype.transition=yg;var{abs:VR,max:LR,min:jR}=Math;function xg(e){return[+e[0],+e[1]]}function bw(e){return[xg(e[0]),xg(e[1])]}var UR={name:"x",handles:["w","e"].map(gd),input:function(e,n){return e==null?null:[[+e[0],n[0][1]],[+e[1],n[1][1]]]},output:function(e){return e&&[e[0][0],e[1][0]]}},$R={name:"y",handles:["n","s"].map(gd),input:function(e,n){return e==null?null:[[n[0][0],+e[0]],[n[1][0],+e[1]]]},output:function(e){return e&&[e[0][1],e[1][1]]}},zR={name:"xy",handles:["n","w","e","s","nw","ne","sw","se"].map(gd),input:function(e){return e==null?null:bw(e)},output:function(e){return e}};function gd(e){return{type:e}}var _d=Math.PI,vd=2*_d,ni=1e-6,Cw=vd-ni;function bg(e){this._+=e[0];for(let n=1,t=e.length;n<t;++n)this._+=arguments[n]+e[n]}function ww(e){let n=Math.floor(e);if(!(n>=0))throw new Error(`invalid digits: ${e}`);if(n>15)return bg;let t=10**n;return function(i){this._+=i[0];for(let r=1,o=i.length;r<o;++r)this._+=Math.round(arguments[r]*t)/t+i[r]}}var ii=class{constructor(n){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=n==null?bg:ww(n)}moveTo(n,t){this._append`M${this._x0=this._x1=+n},${this._y0=this._y1=+t}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(n,t){this._append`L${this._x1=+n},${this._y1=+t}`}quadraticCurveTo(n,t,i,r){this._append`Q${+n},${+t},${this._x1=+i},${this._y1=+r}`}bezierCurveTo(n,t,i,r,o,a){this._append`C${+n},${+t},${+i},${+r},${this._x1=+o},${this._y1=+a}`}arcTo(n,t,i,r,o){if(n=+n,t=+t,i=+i,r=+r,o=+o,o<0)throw new Error(`negative radius: ${o}`);let a=this._x1,s=this._y1,l=i-n,c=r-t,d=a-n,u=s-t,h=d*d+u*u;if(this._x1===null)this._append`M${this._x1=n},${this._y1=t}`;else if(h>ni)if(!(Math.abs(u*l-c*d)>ni)||!o)this._append`L${this._x1=n},${this._y1=t}`;else{let _=i-a,x=r-s,C=l*l+c*c,w=_*_+x*x,M=Math.sqrt(C),O=Math.sqrt(h),I=o*Math.tan((_d-Math.acos((C+h-w)/(2*M*O)))/2),b=I/O,D=I/M;Math.abs(b-1)>ni&&this._append`L${n+b*d},${t+b*u}`,this._append`A${o},${o},0,0,${+(u*_>d*x)},${this._x1=n+D*l},${this._y1=t+D*c}`}}arc(n,t,i,r,o,a){if(n=+n,t=+t,i=+i,a=!!a,i<0)throw new Error(`negative radius: ${i}`);let s=i*Math.cos(r),l=i*Math.sin(r),c=n+s,d=t+l,u=1^a,h=a?r-o:o-r;this._x1===null?this._append`M${c},${d}`:(Math.abs(this._x1-c)>ni||Math.abs(this._y1-d)>ni)&&this._append`L${c},${d}`,i&&(h<0&&(h=h%vd+vd),h>Cw?this._append`A${i},${i},0,1,${u},${n-s},${t-l}A${i},${i},0,1,${u},${this._x1=c},${this._y1=d}`:h>ni&&this._append`A${i},${i},0,${+(h>=_d)},${u},${this._x1=n+i*Math.cos(o)},${this._y1=t+i*Math.sin(o)}`)}rect(n,t,i,r){this._append`M${this._x0=this._x1=+n},${this._y0=this._y1=+t}h${i=+i}v${+r}h${-i}Z`}toString(){return this._}};function Cg(){return new ii}Cg.prototype=ii.prototype;function Mw(e){if(!e.ok)throw new Error(e.status+" "+e.statusText);if(!(e.status===204||e.status===205))return e.json()}function yd(e,n){return fetch(e,n).then(Mw)}function wg(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function ri(e,n){if((t=(e=n?e.toExponential(n-1):e.toExponential()).indexOf("e"))<0)return null;var t,i=e.slice(0,t);return[i.length>1?i[0]+i.slice(2):i,+e.slice(t+1)]}function Yt(e){return e=ri(Math.abs(e)),e?e[1]:NaN}function Mg(e,n){return function(t,i){for(var r=t.length,o=[],a=0,s=e[0],l=0;r>0&&s>0&&(l+s+1>i&&(s=Math.max(1,i-l)),o.push(t.substring(r-=s,r+s)),!((l+=s+1)>i));)s=e[a=(a+1)%e.length];return o.reverse().join(n)}}function Eg(e){return function(n){return n.replace(/[0-9]/g,function(t){return e[+t]})}}var Ew=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Dn(e){if(!(n=Ew.exec(e)))throw new Error("invalid format: "+e);var n;return new Ss({fill:n[1],align:n[2],sign:n[3],symbol:n[4],zero:n[5],width:n[6],comma:n[7],precision:n[8]&&n[8].slice(1),trim:n[9],type:n[10]})}Dn.prototype=Ss.prototype;function Ss(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}Ss.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function Sg(e){e:for(var n=e.length,t=1,i=-1,r;t<n;++t)switch(e[t]){case".":i=r=t;break;case"0":i===0&&(i=t),r=t;break;default:if(!+e[t])break e;i>0&&(i=0);break}return i>0?e.slice(0,i)+e.slice(r+1):e}var xd;function Ig(e,n){var t=ri(e,n);if(!t)return e+"";var i=t[0],r=t[1],o=r-(xd=Math.max(-8,Math.min(8,Math.floor(r/3)))*3)+1,a=i.length;return o===a?i:o>a?i+new Array(o-a+1).join("0"):o>0?i.slice(0,o)+"."+i.slice(o):"0."+new Array(1-o).join("0")+ri(e,Math.max(0,n+o-1))[0]}function bd(e,n){var t=ri(e,n);if(!t)return e+"";var i=t[0],r=t[1];return r<0?"0."+new Array(-r).join("0")+i:i.length>r+1?i.slice(0,r+1)+"."+i.slice(r+1):i+new Array(r-i.length+2).join("0")}var Cd={"%":(e,n)=>(e*100).toFixed(n),b:e=>Math.round(e).toString(2),c:e=>e+"",d:wg,e:(e,n)=>e.toExponential(n),f:(e,n)=>e.toFixed(n),g:(e,n)=>e.toPrecision(n),o:e=>Math.round(e).toString(8),p:(e,n)=>bd(e*100,n),r:bd,s:Ig,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function wd(e){return e}var Dg=Array.prototype.map,Og=["y","z","a","f","p","n","\xB5","m","","k","M","G","T","P","E","Z","Y"];function Ag(e){var n=e.grouping===void 0||e.thousands===void 0?wd:Mg(Dg.call(e.grouping,Number),e.thousands+""),t=e.currency===void 0?"":e.currency[0]+"",i=e.currency===void 0?"":e.currency[1]+"",r=e.decimal===void 0?".":e.decimal+"",o=e.numerals===void 0?wd:Eg(Dg.call(e.numerals,String)),a=e.percent===void 0?"%":e.percent+"",s=e.minus===void 0?"\u2212":e.minus+"",l=e.nan===void 0?"NaN":e.nan+"";function c(u){u=Dn(u);var h=u.fill,_=u.align,x=u.sign,C=u.symbol,w=u.zero,M=u.width,O=u.comma,I=u.precision,b=u.trim,D=u.type;D==="n"?(O=!0,D="g"):Cd[D]||(I===void 0&&(I=12),b=!0,D="g"),(w||h==="0"&&_==="=")&&(w=!0,h="0",_="=");var R=C==="$"?t:C==="#"&&/[boxX]/.test(D)?"0"+D.toLowerCase():"",L=C==="$"?i:/[%p]/.test(D)?a:"",z=Cd[D],H=/[defgprs%]/.test(D);I=I===void 0?6:/[gprs]/.test(D)?Math.max(1,Math.min(21,I)):Math.max(0,Math.min(20,I));function q(A){var K=R,F=L,j,T,W;if(D==="c")F=z(A)+F,A="";else{A=+A;var oe=A<0||1/A<0;if(A=isNaN(A)?l:z(Math.abs(A),I),b&&(A=Sg(A)),oe&&+A==0&&x!=="+"&&(oe=!1),K=(oe?x==="("?x:s:x==="-"||x==="("?"":x)+K,F=(D==="s"?Og[8+xd/3]:"")+F+(oe&&x==="("?")":""),H){for(j=-1,T=A.length;++j<T;)if(W=A.charCodeAt(j),48>W||W>57){F=(W===46?r+A.slice(j+1):A.slice(j))+F,A=A.slice(0,j);break}}}O&&!w&&(A=n(A,1/0));var me=K.length+A.length+F.length,ue=me<M?new Array(M-me+1).join(h):"";switch(O&&w&&(A=n(ue+A,ue.length?M-F.length:1/0),ue=""),_){case"<":A=K+A+F+ue;break;case"=":A=K+ue+A+F;break;case"^":A=ue.slice(0,me=ue.length>>1)+K+A+F+ue.slice(me);break;default:A=ue+K+A+F;break}return o(A)}return q.toString=function(){return u+""},q}function d(u,h){var _=c((u=Dn(u),u.type="f",u)),x=Math.max(-8,Math.min(8,Math.floor(Yt(h)/3)))*3,C=Math.pow(10,-x),w=Og[8+x/3];return function(M){return _(C*M)+w}}return{format:c,formatPrefix:d}}var Is,Ds,Os;Md({thousands:",",grouping:[3],currency:["$",""]});function Md(e){return Is=Ag(e),Ds=Is.format,Os=Is.formatPrefix,Is}function Ed(e){return Math.max(0,-Yt(Math.abs(e)))}function Sd(e,n){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(Yt(n)/3)))*3-Yt(Math.abs(e)))}function Id(e,n){return e=Math.abs(e),n=Math.abs(n)-e,Math.max(0,Yt(n)-Yt(e))+1}var ne=1e-6,Tg=1e-12,ie=Math.PI,Ze=ie/2,Dd=ie/4,qe=ie*2,St=180/ie,Ne=ie/180,de=Math.abs,Pg=Math.atan,Vt=Math.atan2,ae=Math.cos;var le=Math.sin,kg=Math.sign||function(e){return e>0?1:e<0?-1:0},Je=Math.sqrt;function Rg(e){return e>1?0:e<-1?ie:Math.acos(e)}function mt(e){return e>1?Ze:e<-1?-Ze:Math.asin(e)}function Ve(){}function As(e,n){e&&Ng.hasOwnProperty(e.type)&&Ng[e.type](e,n)}var Fg={Feature:function(e,n){As(e.geometry,n)},FeatureCollection:function(e,n){for(var t=e.features,i=-1,r=t.length;++i<r;)As(t[i].geometry,n)}},Ng={Sphere:function(e,n){n.sphere()},Point:function(e,n){e=e.coordinates,n.point(e[0],e[1],e[2])},MultiPoint:function(e,n){for(var t=e.coordinates,i=-1,r=t.length;++i<r;)e=t[i],n.point(e[0],e[1],e[2])},LineString:function(e,n){Od(e.coordinates,n,0)},MultiLineString:function(e,n){for(var t=e.coordinates,i=-1,r=t.length;++i<r;)Od(t[i],n,0)},Polygon:function(e,n){Vg(e.coordinates,n)},MultiPolygon:function(e,n){for(var t=e.coordinates,i=-1,r=t.length;++i<r;)Vg(t[i],n)},GeometryCollection:function(e,n){for(var t=e.geometries,i=-1,r=t.length;++i<r;)As(t[i],n)}};function Od(e,n,t){var i=-1,r=e.length-t,o;for(n.lineStart();++i<r;)o=e[i],n.point(o[0],o[1],o[2]);n.lineEnd()}function Vg(e,n){var t=-1,i=e.length;for(n.polygonStart();++t<i;)Od(e[t],n,1);n.polygonEnd()}function On(e,n){e&&Fg.hasOwnProperty(e.type)?Fg[e.type](e,n):As(e,n)}function bo(e){return[Vt(e[1],e[0]),mt(e[2])]}function Xt(e){var n=e[0],t=e[1],i=ae(t);return[i*ae(n),i*le(n),le(t)]}function Co(e,n){return e[0]*n[0]+e[1]*n[1]+e[2]*n[2]}function Bi(e,n){return[e[1]*n[2]-e[2]*n[1],e[2]*n[0]-e[0]*n[2],e[0]*n[1]-e[1]*n[0]]}function Ts(e,n){e[0]+=n[0],e[1]+=n[1],e[2]+=n[2]}function wo(e,n){return[e[0]*n,e[1]*n,e[2]*n]}function Mo(e){var n=Je(e[0]*e[0]+e[1]*e[1]+e[2]*e[2]);e[0]/=n,e[1]/=n,e[2]/=n}function Eo(e,n){function t(i,r){return i=e(i,r),n(i[0],i[1])}return e.invert&&n.invert&&(t.invert=function(i,r){return i=n.invert(i,r),i&&e.invert(i[0],i[1])}),t}function Ad(e,n){return de(e)>ie&&(e-=Math.round(e/qe)*qe),[e,n]}Ad.invert=Ad;function $g(e,n,t){return(e%=qe)?n||t?Eo(jg(e),Ug(n,t)):jg(e):n||t?Ug(n,t):Ad}function Lg(e){return function(n,t){return n+=e,de(n)>ie&&(n-=Math.round(n/qe)*qe),[n,t]}}function jg(e){var n=Lg(e);return n.invert=Lg(-e),n}function Ug(e,n){var t=ae(e),i=le(e),r=ae(n),o=le(n);function a(s,l){var c=ae(l),d=ae(s)*c,u=le(s)*c,h=le(l),_=h*t+d*i;return[Vt(u*r-_*o,d*t-h*i),mt(_*r+u*o)]}return a.invert=function(s,l){var c=ae(l),d=ae(s)*c,u=le(s)*c,h=le(l),_=h*r-u*o;return[Vt(u*r+h*o,d*t+_*i),mt(_*t-d*i)]},a}function Bg(e,n,t,i,r,o){if(t){var a=ae(n),s=le(n),l=i*t;r==null?(r=n+i*qe,o=n-l/2):(r=zg(a,r),o=zg(a,o),(i>0?r<o:r>o)&&(r+=i*qe));for(var c,d=r;i>0?d>o:d<o;d-=l)c=bo([a,-s*ae(d),-s*le(d)]),e.point(c[0],c[1])}}function zg(e,n){n=Xt(n),n[0]-=e,Mo(n);var t=Rg(-n[1]);return((-n[2]<0?-t:t)+qe-ne)%qe}function Ps(){var e=[],n;return{point:function(t,i,r){n.push([t,i,r])},lineStart:function(){e.push(n=[])},lineEnd:Ve,rejoin:function(){e.length>1&&e.push(e.pop().concat(e.shift()))},result:function(){var t=e;return e=[],n=null,t}}}function Hi(e,n){return de(e[0]-n[0])<ne&&de(e[1]-n[1])<ne}function ks(e,n,t,i){this.x=e,this.z=n,this.o=t,this.e=i,this.v=!1,this.n=this.p=null}function Rs(e,n,t,i,r){var o=[],a=[],s,l;if(e.forEach(function(x){if(!((C=x.length-1)<=0)){var C,w=x[0],M=x[C],O;if(Hi(w,M)){if(!w[2]&&!M[2]){for(r.lineStart(),s=0;s<C;++s)r.point((w=x[s])[0],w[1]);r.lineEnd();return}M[0]+=2*ne}o.push(O=new ks(w,x,null,!0)),a.push(O.o=new ks(w,null,O,!1)),o.push(O=new ks(M,x,null,!1)),a.push(O.o=new ks(M,null,O,!0))}}),!!o.length){for(a.sort(n),Hg(o),Hg(a),s=0,l=a.length;s<l;++s)a[s].e=t=!t;for(var c=o[0],d,u;;){for(var h=c,_=!0;h.v;)if((h=h.n)===c)return;d=h.z,r.lineStart();do{if(h.v=h.o.v=!0,h.e){if(_)for(s=0,l=d.length;s<l;++s)r.point((u=d[s])[0],u[1]);else i(h.x,h.n.x,1,r);h=h.n}else{if(_)for(d=h.p.z,s=d.length-1;s>=0;--s)r.point((u=d[s])[0],u[1]);else i(h.x,h.p.x,-1,r);h=h.p}h=h.o,d=h.z,_=!_}while(!h.v);r.lineEnd()}}}function Hg(e){if(n=e.length){for(var n,t=0,i=e[0],r;++t<n;)i.n=r=e[t],r.p=i,i=r;i.n=r=e[0],r.p=i}}function Td(e){return de(e[0])<=ie?e[0]:kg(e[0])*((de(e[0])+ie)%qe-ie)}function Gg(e,n){var t=Td(n),i=n[1],r=le(i),o=[le(t),-ae(t),0],a=0,s=0,l=new ft;r===1?i=Ze+ne:r===-1&&(i=-Ze-ne);for(var c=0,d=e.length;c<d;++c)if(h=(u=e[c]).length)for(var u,h,_=u[h-1],x=Td(_),C=_[1]/2+Dd,w=le(C),M=ae(C),O=0;O<h;++O,x=b,w=R,M=L,_=I){var I=u[O],b=Td(I),D=I[1]/2+Dd,R=le(D),L=ae(D),z=b-x,H=z>=0?1:-1,q=H*z,A=q>ie,K=w*R;if(l.add(Vt(K*H*le(q),M*L+K*ae(q))),a+=A?z+H*qe:z,A^x>=t^b>=t){var F=Bi(Xt(_),Xt(I));Mo(F);var j=Bi(o,F);Mo(j);var T=(A^z>=0?-1:1)*mt(j[2]);(i>T||i===T&&(F[0]||F[1]))&&(s+=A^z>=0?1:-1)}}return(a<-ne||a<ne&&l<-Tg)^s&1}function Fs(e,n,t,i){return function(r){var o=n(r),a=Ps(),s=n(a),l=!1,c,d,u,h={point:_,lineStart:C,lineEnd:w,polygonStart:function(){h.point=M,h.lineStart=O,h.lineEnd=I,d=[],c=[]},polygonEnd:function(){h.point=_,h.lineStart=C,h.lineEnd=w,d=Vi(d);var b=Gg(c,i);d.length?(l||(r.polygonStart(),l=!0),Rs(d,Iw,b,t,r)):b&&(l||(r.polygonStart(),l=!0),r.lineStart(),t(null,null,1,r),r.lineEnd()),l&&(r.polygonEnd(),l=!1),d=c=null},sphere:function(){r.polygonStart(),r.lineStart(),t(null,null,1,r),r.lineEnd(),r.polygonEnd()}};function _(b,D){e(b,D)&&r.point(b,D)}function x(b,D){o.point(b,D)}function C(){h.point=x,o.lineStart()}function w(){h.point=_,o.lineEnd()}function M(b,D){u.push([b,D]),s.point(b,D)}function O(){s.lineStart(),u=[]}function I(){M(u[0][0],u[0][1]),s.lineEnd();var b=s.clean(),D=a.result(),R,L=D.length,z,H,q;if(u.pop(),c.push(u),u=null,!!L){if(b&1){if(H=D[0],(z=H.length-1)>0){for(l||(r.polygonStart(),l=!0),r.lineStart(),R=0;R<z;++R)r.point((q=H[R])[0],q[1]);r.lineEnd()}return}L>1&&b&2&&D.push(D.pop().concat(D.shift())),d.push(D.filter(Sw))}}return h}}function Sw(e){return e.length>1}function Iw(e,n){return((e=e.x)[0]<0?e[1]-Ze-ne:Ze-e[1])-((n=n.x)[0]<0?n[1]-Ze-ne:Ze-n[1])}var Pd=Fs(function(){return!0},Dw,Aw,[-ie,-Ze]);function Dw(e){var n=NaN,t=NaN,i=NaN,r;return{lineStart:function(){e.lineStart(),r=1},point:function(o,a){var s=o>0?ie:-ie,l=de(o-n);de(l-ie)<ne?(e.point(n,t=(t+a)/2>0?Ze:-Ze),e.point(i,t),e.lineEnd(),e.lineStart(),e.point(s,t),e.point(o,t),r=0):i!==s&&l>=ie&&(de(n-i)<ne&&(n-=i*ne),de(o-s)<ne&&(o-=s*ne),t=Ow(n,t,o,a),e.point(i,t),e.lineEnd(),e.lineStart(),e.point(s,t),r=0),e.point(n=o,t=a),i=s},lineEnd:function(){e.lineEnd(),n=t=NaN},clean:function(){return 2-r}}}function Ow(e,n,t,i){var r,o,a=le(e-t);return de(a)>ne?Pg((le(n)*(o=ae(i))*le(t)-le(i)*(r=ae(n))*le(e))/(r*o*a)):(n+i)/2}function Aw(e,n,t,i){var r;if(e==null)r=t*Ze,i.point(-ie,r),i.point(0,r),i.point(ie,r),i.point(ie,0),i.point(ie,-r),i.point(0,-r),i.point(-ie,-r),i.point(-ie,0),i.point(-ie,r);else if(de(e[0]-n[0])>ne){var o=e[0]<n[0]?ie:-ie;r=t*o/2,i.point(-o,r),i.point(0,r),i.point(o,r)}else i.point(n[0],n[1])}function qg(e){var n=ae(e),t=2*Ne,i=n>0,r=de(n)>ne;function o(d,u,h,_){Bg(_,e,t,h,d,u)}function a(d,u){return ae(d)*ae(u)>n}function s(d){var u,h,_,x,C;return{lineStart:function(){x=_=!1,C=1},point:function(w,M){var O=[w,M],I,b=a(w,M),D=i?b?0:c(w,M):b?c(w+(w<0?ie:-ie),M):0;if(!u&&(x=_=b)&&d.lineStart(),b!==_&&(I=l(u,O),(!I||Hi(u,I)||Hi(O,I))&&(O[2]=1)),b!==_)C=0,b?(d.lineStart(),I=l(O,u),d.point(I[0],I[1])):(I=l(u,O),d.point(I[0],I[1],2),d.lineEnd()),u=I;else if(r&&u&&i^b){var R;!(D&h)&&(R=l(O,u,!0))&&(C=0,i?(d.lineStart(),d.point(R[0][0],R[0][1]),d.point(R[1][0],R[1][1]),d.lineEnd()):(d.point(R[1][0],R[1][1]),d.lineEnd(),d.lineStart(),d.point(R[0][0],R[0][1],3)))}b&&(!u||!Hi(u,O))&&d.point(O[0],O[1]),u=O,_=b,h=D},lineEnd:function(){_&&d.lineEnd(),u=null},clean:function(){return C|(x&&_)<<1}}}function l(d,u,h){var _=Xt(d),x=Xt(u),C=[1,0,0],w=Bi(_,x),M=Co(w,w),O=w[0],I=M-O*O;if(!I)return!h&&d;var b=n*M/I,D=-n*O/I,R=Bi(C,w),L=wo(C,b),z=wo(w,D);Ts(L,z);var H=R,q=Co(L,H),A=Co(H,H),K=q*q-A*(Co(L,L)-1);if(!(K<0)){var F=Je(K),j=wo(H,(-q-F)/A);if(Ts(j,L),j=bo(j),!h)return j;var T=d[0],W=u[0],oe=d[1],me=u[1],ue;W<T&&(ue=T,T=W,W=ue);var tt=W-T,nt=de(tt-ie)<ne,gt=nt||tt<ne;if(!nt&&me<oe&&(ue=oe,oe=me,me=ue),gt?nt?oe+me>0^j[1]<(de(j[0]-T)<ne?oe:me):oe<=j[1]&&j[1]<=me:tt>ie^(T<=j[0]&&j[0]<=W)){var lt=wo(H,(-q+F)/A);return Ts(lt,L),[j,bo(lt)]}}}function c(d,u){var h=i?e:ie-e,_=0;return d<-h?_|=1:d>h&&(_|=2),u<-h?_|=4:u>h&&(_|=8),_}return Fs(a,s,o,i?[0,-e]:[-ie,e-ie])}function Wg(e,n,t,i,r,o){var a=e[0],s=e[1],l=n[0],c=n[1],d=0,u=1,h=l-a,_=c-s,x;if(x=t-a,!(!h&&x>0)){if(x/=h,h<0){if(x<d)return;x<u&&(u=x)}else if(h>0){if(x>u)return;x>d&&(d=x)}if(x=r-a,!(!h&&x<0)){if(x/=h,h<0){if(x>u)return;x>d&&(d=x)}else if(h>0){if(x<d)return;x<u&&(u=x)}if(x=i-s,!(!_&&x>0)){if(x/=_,_<0){if(x<d)return;x<u&&(u=x)}else if(_>0){if(x>u)return;x>d&&(d=x)}if(x=o-s,!(!_&&x<0)){if(x/=_,_<0){if(x>u)return;x>d&&(d=x)}else if(_>0){if(x<d)return;x<u&&(u=x)}return d>0&&(e[0]=a+d*h,e[1]=s+d*_),u<1&&(n[0]=a+u*h,n[1]=s+u*_),!0}}}}}var So=1e9,Ns=-So;function kd(e,n,t,i){function r(c,d){return e<=c&&c<=t&&n<=d&&d<=i}function o(c,d,u,h){var _=0,x=0;if(c==null||(_=a(c,u))!==(x=a(d,u))||l(c,d)<0^u>0)do h.point(_===0||_===3?e:t,_>1?i:n);while((_=(_+u+4)%4)!==x);else h.point(d[0],d[1])}function a(c,d){return de(c[0]-e)<ne?d>0?0:3:de(c[0]-t)<ne?d>0?2:1:de(c[1]-n)<ne?d>0?1:0:d>0?3:2}function s(c,d){return l(c.x,d.x)}function l(c,d){var u=a(c,1),h=a(d,1);return u!==h?u-h:u===0?d[1]-c[1]:u===1?c[0]-d[0]:u===2?c[1]-d[1]:d[0]-c[0]}return function(c){var d=c,u=Ps(),h,_,x,C,w,M,O,I,b,D,R,L={point:z,lineStart:K,lineEnd:F,polygonStart:q,polygonEnd:A};function z(T,W){r(T,W)&&d.point(T,W)}function H(){for(var T=0,W=0,oe=_.length;W<oe;++W)for(var me=_[W],ue=1,tt=me.length,nt=me[0],gt,lt,un=nt[0],Be=nt[1];ue<tt;++ue)gt=un,lt=Be,nt=me[ue],un=nt[0],Be=nt[1],lt<=i?Be>i&&(un-gt)*(i-lt)>(Be-lt)*(e-gt)&&++T:Be<=i&&(un-gt)*(i-lt)<(Be-lt)*(e-gt)&&--T;return T}function q(){d=u,h=[],_=[],R=!0}function A(){var T=H(),W=R&&T,oe=(h=Vi(h)).length;(W||oe)&&(c.polygonStart(),W&&(c.lineStart(),o(null,null,1,c),c.lineEnd()),oe&&Rs(h,s,T,o,c),c.polygonEnd()),d=c,h=_=x=null}function K(){L.point=j,_&&_.push(x=[]),D=!0,b=!1,O=I=NaN}function F(){h&&(j(C,w),M&&b&&u.rejoin(),h.push(u.result())),L.point=z,b&&d.lineEnd()}function j(T,W){var oe=r(T,W);if(_&&x.push([T,W]),D)C=T,w=W,M=oe,D=!1,oe&&(d.lineStart(),d.point(T,W));else if(oe&&b)d.point(T,W);else{var me=[O=Math.max(Ns,Math.min(So,O)),I=Math.max(Ns,Math.min(So,I))],ue=[T=Math.max(Ns,Math.min(So,T)),W=Math.max(Ns,Math.min(So,W))];Wg(me,ue,e,n,t,i)?(b||(d.lineStart(),d.point(me[0],me[1])),d.point(ue[0],ue[1]),oe||d.lineEnd(),R=!1):oe&&(d.lineStart(),d.point(T,W),R=!1)}O=T,I=W,b=oe}return L}}var Io=e=>e;var Rd=new ft,Fd=new ft,Yg,Xg,Nd,Vd,An={point:Ve,lineStart:Ve,lineEnd:Ve,polygonStart:function(){An.lineStart=Tw,An.lineEnd=kw},polygonEnd:function(){An.lineStart=An.lineEnd=An.point=Ve,Rd.add(de(Fd)),Fd=new ft},result:function(){var e=Rd/2;return Rd=new ft,e}};function Tw(){An.point=Pw}function Pw(e,n){An.point=Kg,Yg=Nd=e,Xg=Vd=n}function Kg(e,n){Fd.add(Vd*e-Nd*n),Nd=e,Vd=n}function kw(){Kg(Yg,Xg)}var Ld=An;var Gi=1/0,Vs=Gi,Do=-Gi,Ls=Do,Rw={point:Fw,lineStart:Ve,lineEnd:Ve,polygonStart:Ve,polygonEnd:Ve,result:function(){var e=[[Gi,Vs],[Do,Ls]];return Do=Ls=-(Vs=Gi=1/0),e}};function Fw(e,n){e<Gi&&(Gi=e),e>Do&&(Do=e),n<Vs&&(Vs=n),n>Ls&&(Ls=n)}var qi=Rw;var jd=0,Ud=0,Oo=0,js=0,Us=0,Wi=0,$d=0,zd=0,Ao=0,Jg,e0,Kt,Qt,Lt={point:oi,lineStart:Qg,lineEnd:Zg,polygonStart:function(){Lt.lineStart=Lw,Lt.lineEnd=jw},polygonEnd:function(){Lt.point=oi,Lt.lineStart=Qg,Lt.lineEnd=Zg},result:function(){var e=Ao?[$d/Ao,zd/Ao]:Wi?[js/Wi,Us/Wi]:Oo?[jd/Oo,Ud/Oo]:[NaN,NaN];return jd=Ud=Oo=js=Us=Wi=$d=zd=Ao=0,e}};function oi(e,n){jd+=e,Ud+=n,++Oo}function Qg(){Lt.point=Nw}function Nw(e,n){Lt.point=Vw,oi(Kt=e,Qt=n)}function Vw(e,n){var t=e-Kt,i=n-Qt,r=Je(t*t+i*i);js+=r*(Kt+e)/2,Us+=r*(Qt+n)/2,Wi+=r,oi(Kt=e,Qt=n)}function Zg(){Lt.point=oi}function Lw(){Lt.point=Uw}function jw(){t0(Jg,e0)}function Uw(e,n){Lt.point=t0,oi(Jg=Kt=e,e0=Qt=n)}function t0(e,n){var t=e-Kt,i=n-Qt,r=Je(t*t+i*i);js+=r*(Kt+e)/2,Us+=r*(Qt+n)/2,Wi+=r,r=Qt*e-Kt*n,$d+=r*(Kt+e),zd+=r*(Qt+n),Ao+=r*3,oi(Kt=e,Qt=n)}var Bd=Lt;function $s(e){this._context=e}$s.prototype={_radius:4.5,pointRadius:function(e){return this._radius=e,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._context.closePath(),this._point=NaN},point:function(e,n){switch(this._point){case 0:{this._context.moveTo(e,n),this._point=1;break}case 1:{this._context.lineTo(e,n);break}default:{this._context.moveTo(e+this._radius,n),this._context.arc(e,n,this._radius,0,qe);break}}},result:Ve};var Gd=new ft,Hd,n0,i0,To,Po,zs={point:Ve,lineStart:function(){zs.point=$w},lineEnd:function(){Hd&&r0(n0,i0),zs.point=Ve},polygonStart:function(){Hd=!0},polygonEnd:function(){Hd=null},result:function(){var e=+Gd;return Gd=new ft,e}};function $w(e,n){zs.point=r0,n0=To=e,i0=Po=n}function r0(e,n){To-=e,Po-=n,Gd.add(Je(To*To+Po*Po)),To=e,Po=n}var qd=zs;var o0,Bs,a0,s0,ko=class{constructor(n){this._append=n==null?l0:zw(n),this._radius=4.5,this._=""}pointRadius(n){return this._radius=+n,this}polygonStart(){this._line=0}polygonEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){this._line===0&&(this._+="Z"),this._point=NaN}point(n,t){switch(this._point){case 0:{this._append`M${n},${t}`,this._point=1;break}case 1:{this._append`L${n},${t}`;break}default:{if(this._append`M${n},${t}`,this._radius!==a0||this._append!==Bs){let i=this._radius,r=this._;this._="",this._append`m0,${i}a${i},${i} 0 1,1 0,${-2*i}a${i},${i} 0 1,1 0,${2*i}z`,a0=i,Bs=this._append,s0=this._,this._=r}this._+=s0;break}}}result(){let n=this._;return this._="",n.length?n:null}};function l0(e){let n=1;this._+=e[0];for(let t=e.length;n<t;++n)this._+=arguments[n]+e[n]}function zw(e){let n=Math.floor(e);if(!(n>=0))throw new RangeError(`invalid digits: ${e}`);if(n>15)return l0;if(n!==o0){let t=10**n;o0=n,Bs=function(r){let o=1;this._+=r[0];for(let a=r.length;o<a;++o)this._+=Math.round(arguments[o]*t)/t+r[o]}}return Bs}function Wd(e,n){let t=3,i=4.5,r,o;function a(s){return s&&(typeof i=="function"&&o.pointRadius(+i.apply(this,arguments)),On(s,r(o))),o.result()}return a.area=function(s){return On(s,r(Ld)),Ld.result()},a.measure=function(s){return On(s,r(qd)),qd.result()},a.bounds=function(s){return On(s,r(qi)),qi.result()},a.centroid=function(s){return On(s,r(Bd)),Bd.result()},a.projection=function(s){return arguments.length?(r=s==null?(e=null,Io):(e=s).stream,a):e},a.context=function(s){return arguments.length?(o=s==null?(n=null,new ko(t)):new $s(n=s),typeof i!="function"&&o.pointRadius(i),a):n},a.pointRadius=function(s){return arguments.length?(i=typeof s=="function"?s:(o.pointRadius(+s),+s),a):i},a.digits=function(s){if(!arguments.length)return t;if(s==null)t=null;else{let l=Math.floor(s);if(!(l>=0))throw new RangeError(`invalid digits: ${s}`);t=l}return n===null&&(o=new ko(t)),a},a.projection(e).digits(t).context(n)}function Ro(e){return function(n){var t=new Yd;for(var i in e)t[i]=e[i];return t.stream=n,t}}function Yd(){}Yd.prototype={constructor:Yd,point:function(e,n){this.stream.point(e,n)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};function Xd(e,n,t){var i=e.clipExtent&&e.clipExtent();return e.scale(150).translate([0,0]),i!=null&&e.clipExtent(null),On(t,e.stream(qi)),n(qi.result()),i!=null&&e.clipExtent(i),e}function Kd(e,n,t){return Xd(e,function(i){var r=n[1][0]-n[0][0],o=n[1][1]-n[0][1],a=Math.min(r/(i[1][0]-i[0][0]),o/(i[1][1]-i[0][1])),s=+n[0][0]+(r-a*(i[1][0]+i[0][0]))/2,l=+n[0][1]+(o-a*(i[1][1]+i[0][1]))/2;e.scale(150*a).translate([s,l])},t)}function c0(e,n,t){return Kd(e,[[0,0],n],t)}function d0(e,n,t){return Xd(e,function(i){var r=+n,o=r/(i[1][0]-i[0][0]),a=(r-o*(i[1][0]+i[0][0]))/2,s=-o*i[0][1];e.scale(150*o).translate([a,s])},t)}function u0(e,n,t){return Xd(e,function(i){var r=+n,o=r/(i[1][1]-i[0][1]),a=-o*i[0][0],s=(r-o*(i[1][1]+i[0][1]))/2;e.scale(150*o).translate([a,s])},t)}var p0=16,Bw=ae(30*Ne);function Qd(e,n){return+n?Gw(e,n):Hw(e)}function Hw(e){return Ro({point:function(n,t){n=e(n,t),this.stream.point(n[0],n[1])}})}function Gw(e,n){function t(i,r,o,a,s,l,c,d,u,h,_,x,C,w){var M=c-i,O=d-r,I=M*M+O*O;if(I>4*n&&C--){var b=a+h,D=s+_,R=l+x,L=Je(b*b+D*D+R*R),z=mt(R/=L),H=de(de(R)-1)<ne||de(o-u)<ne?(o+u)/2:Vt(D,b),q=e(H,z),A=q[0],K=q[1],F=A-i,j=K-r,T=O*F-M*j;(T*T/I>n||de((M*F+O*j)/I-.5)>.3||a*h+s*_+l*x<Bw)&&(t(i,r,o,a,s,l,A,K,H,b/=L,D/=L,R,C,w),w.point(A,K),t(A,K,H,b,D,R,c,d,u,h,_,x,C,w))}}return function(i){var r,o,a,s,l,c,d,u,h,_,x,C,w={point:M,lineStart:O,lineEnd:b,polygonStart:function(){i.polygonStart(),w.lineStart=D},polygonEnd:function(){i.polygonEnd(),w.lineStart=O}};function M(z,H){z=e(z,H),i.point(z[0],z[1])}function O(){u=NaN,w.point=I,i.lineStart()}function I(z,H){var q=Xt([z,H]),A=e(z,H);t(u,h,d,_,x,C,u=A[0],h=A[1],d=z,_=q[0],x=q[1],C=q[2],p0,i),i.point(u,h)}function b(){w.point=M,i.lineEnd()}function D(){O(),w.point=R,w.lineEnd=L}function R(z,H){I(r=z,H),o=u,a=h,s=_,l=x,c=C,w.point=I}function L(){t(u,h,d,_,x,C,o,a,r,s,l,c,p0,i),w.lineEnd=b,b()}return w}}var qw=Ro({point:function(e,n){this.stream.point(e*Ne,n*Ne)}});function Ww(e){return Ro({point:function(n,t){var i=e(n,t);return this.stream.point(i[0],i[1])}})}function Yw(e,n,t,i,r){function o(a,s){return a*=i,s*=r,[n+e*a,t-e*s]}return o.invert=function(a,s){return[(a-n)/e*i,(t-s)/e*r]},o}function h0(e,n,t,i,r,o){if(!o)return Yw(e,n,t,i,r);var a=ae(o),s=le(o),l=a*e,c=s*e,d=a/e,u=s/e,h=(s*t-a*n)/e,_=(s*n+a*t)/e;function x(C,w){return C*=i,w*=r,[l*C-c*w+n,t-c*C-l*w]}return x.invert=function(C,w){return[i*(d*C-u*w+h),r*(_-u*C-d*w)]},x}function Zd(e){return Xw(function(){return e})()}function Xw(e){var n,t=150,i=480,r=250,o=0,a=0,s=0,l=0,c=0,d,u=0,h=1,_=1,x=null,C=Pd,w=null,M,O,I,b=Io,D=.5,R,L,z,H,q;function A(T){return z(T[0]*Ne,T[1]*Ne)}function K(T){return T=z.invert(T[0],T[1]),T&&[T[0]*St,T[1]*St]}A.stream=function(T){return H&&q===T?H:H=qw(Ww(d)(C(R(b(q=T)))))},A.preclip=function(T){return arguments.length?(C=T,x=void 0,j()):C},A.postclip=function(T){return arguments.length?(b=T,w=M=O=I=null,j()):b},A.clipAngle=function(T){return arguments.length?(C=+T?qg(x=T*Ne):(x=null,Pd),j()):x*St},A.clipExtent=function(T){return arguments.length?(b=T==null?(w=M=O=I=null,Io):kd(w=+T[0][0],M=+T[0][1],O=+T[1][0],I=+T[1][1]),j()):w==null?null:[[w,M],[O,I]]},A.scale=function(T){return arguments.length?(t=+T,F()):t},A.translate=function(T){return arguments.length?(i=+T[0],r=+T[1],F()):[i,r]},A.center=function(T){return arguments.length?(o=T[0]%360*Ne,a=T[1]%360*Ne,F()):[o*St,a*St]},A.rotate=function(T){return arguments.length?(s=T[0]%360*Ne,l=T[1]%360*Ne,c=T.length>2?T[2]%360*Ne:0,F()):[s*St,l*St,c*St]},A.angle=function(T){return arguments.length?(u=T%360*Ne,F()):u*St},A.reflectX=function(T){return arguments.length?(h=T?-1:1,F()):h<0},A.reflectY=function(T){return arguments.length?(_=T?-1:1,F()):_<0},A.precision=function(T){return arguments.length?(R=Qd(L,D=T*T),j()):Je(D)},A.fitExtent=function(T,W){return Kd(A,T,W)},A.fitSize=function(T,W){return c0(A,T,W)},A.fitWidth=function(T,W){return d0(A,T,W)},A.fitHeight=function(T,W){return u0(A,T,W)};function F(){var T=h0(t,0,0,h,_,u).apply(null,n(o,a)),W=h0(t,i-T[0],r-T[1],h,_,u);return d=$g(s,l,c),L=Eo(n,W),z=Eo(d,L),R=Qd(L,D),j()}function j(){return H=q=null,A}return function(){return n=e.apply(this,arguments),A.invert=n.invert&&K,F()}}function f0(e){return function(n,t){var i=Je(n*n+t*t),r=e(i),o=le(r),a=ae(r);return[Vt(n*o,i*a),mt(i&&t*o/i)]}}function Jd(e,n){return[ae(n)*le(e),le(n)]}Jd.invert=f0(mt);function eu(){return Zd(Jd).scale(249.5).clipAngle(90+ne)}function Yi(e,n){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(n).domain(e);break}return this}function m0(e,n){switch(arguments.length){case 0:break;case 1:{typeof e=="function"?this.interpolator(e):this.range(e);break}default:{this.domain(e),typeof n=="function"?this.interpolator(n):this.range(n);break}}return this}var g0=Symbol("implicit");function Hs(){var e=new Ni,n=[],t=[],i=g0;function r(o){let a=e.get(o);if(a===void 0){if(i!==g0)return i;e.set(o,a=n.push(o)-1)}return t[a%t.length]}return r.domain=function(o){if(!arguments.length)return n.slice();n=[],e=new Ni;for(let a of o)e.has(a)||e.set(a,n.push(a)-1);return r},r.range=function(o){return arguments.length?(t=Array.from(o),r):t.slice()},r.unknown=function(o){return arguments.length?(i=o,r):i},r.copy=function(){return Hs(n,t).unknown(i)},Yi.apply(r,arguments),r}function Xi(){var e=Hs().unknown(void 0),n=e.domain,t=e.range,i=0,r=1,o,a,s=!1,l=0,c=0,d=.5;delete e.unknown;function u(){var h=n().length,_=r<i,x=_?r:i,C=_?i:r;o=(C-x)/Math.max(1,h-l+c*2),s&&(o=Math.floor(o)),x+=(C-x-o*(h-l))*d,a=o*(1-l),s&&(x=Math.round(x),a=Math.round(a));var w=Za(h).map(function(M){return x+o*M});return t(_?w.reverse():w)}return e.domain=function(h){return arguments.length?(n(h),u()):n()},e.range=function(h){return arguments.length?([i,r]=h,i=+i,r=+r,u()):[i,r]},e.rangeRound=function(h){return[i,r]=h,i=+i,r=+r,s=!0,u()},e.bandwidth=function(){return a},e.step=function(){return o},e.round=function(h){return arguments.length?(s=!!h,u()):s},e.padding=function(h){return arguments.length?(l=Math.min(1,c=+h),u()):l},e.paddingInner=function(h){return arguments.length?(l=Math.min(1,h),u()):l},e.paddingOuter=function(h){return arguments.length?(c=+h,u()):c},e.align=function(h){return arguments.length?(d=Math.max(0,Math.min(1,h)),u()):d},e.copy=function(){return Xi(n(),[i,r]).round(s).paddingInner(l).paddingOuter(c).align(d)},Yi.apply(u(),arguments)}function _0(e){var n=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,delete e.paddingOuter,e.copy=function(){return _0(n())},e}function Gs(){return _0(Xi.apply(null,arguments).paddingInner(1))}function tu(e){return function(){return e}}function nu(e){return+e}var v0=[0,1];function dn(e){return e}function iu(e,n){return(n-=e=+e)?function(t){return(t-e)/n}:tu(isNaN(n)?NaN:.5)}function Kw(e,n){var t;return e>n&&(t=e,e=n,n=t),function(i){return Math.max(e,Math.min(n,i))}}function Qw(e,n,t){var i=e[0],r=e[1],o=n[0],a=n[1];return r<i?(i=iu(r,i),o=t(a,o)):(i=iu(i,r),o=t(o,a)),function(s){return o(i(s))}}function Zw(e,n,t){var i=Math.min(e.length,n.length)-1,r=new Array(i),o=new Array(i),a=-1;for(e[i]<e[0]&&(e=e.slice().reverse(),n=n.slice().reverse());++a<i;)r[a]=iu(e[a],e[a+1]),o[a]=t(n[a],n[a+1]);return function(s){var l=Kc(e,s,1,i)-1;return o[l](r[l](s))}}function y0(e,n){return n.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function Jw(){var e=v0,n=v0,t=ln,i,r,o,a=dn,s,l,c;function d(){var h=Math.min(e.length,n.length);return a!==dn&&(a=Kw(e[0],e[h-1])),s=h>2?Zw:Qw,l=c=null,u}function u(h){return h==null||isNaN(h=+h)?o:(l||(l=s(e.map(i),n,t)))(i(a(h)))}return u.invert=function(h){return a(r((c||(c=s(n,e.map(i),Ue)))(h)))},u.domain=function(h){return arguments.length?(e=Array.from(h,nu),d()):e.slice()},u.range=function(h){return arguments.length?(n=Array.from(h),d()):n.slice()},u.rangeRound=function(h){return n=Array.from(h),t=po,d()},u.clamp=function(h){return arguments.length?(a=h?!0:dn,d()):a!==dn},u.interpolate=function(h){return arguments.length?(t=h,d()):t},u.unknown=function(h){return arguments.length?(o=h,u):o},function(h,_){return i=h,r=_,d()}}function ru(){return Jw()(dn,dn)}function ou(e,n,t,i){var r=Qc(e,n,t),o;switch(i=Dn(i??",f"),i.type){case"s":{var a=Math.max(Math.abs(e),Math.abs(n));return i.precision==null&&!isNaN(o=Sd(r,a))&&(i.precision=o),Os(i,a)}case"":case"e":case"g":case"p":case"r":{i.precision==null&&!isNaN(o=Id(r,Math.max(Math.abs(e),Math.abs(n))))&&(i.precision=o-(i.type==="e"));break}case"f":case"%":{i.precision==null&&!isNaN(o=Ed(r))&&(i.precision=o-(i.type==="%")*2);break}}return Ds(i)}function au(e){var n=e.domain;return e.ticks=function(t){var i=n();return Qa(i[0],i[i.length-1],t??10)},e.tickFormat=function(t,i){var r=n();return ou(r[0],r[r.length-1],t??10,i)},e.nice=function(t){t==null&&(t=10);var i=n(),r=0,o=i.length-1,a=i[r],s=i[o],l,c,d=10;for(s<a&&(c=a,a=s,s=c,c=r,r=o,o=c);d-- >0;){if(c=Zr(a,s,t),c===l)return i[r]=a,i[o]=s,n(i);if(c>0)a=Math.floor(a/c)*c,s=Math.ceil(s/c)*c;else if(c<0)a=Math.ceil(a*c)/c,s=Math.floor(s*c)/c;else break;l=c}return e},e}function st(){var e=ru();return e.copy=function(){return y0(e,st())},Yi.apply(e,arguments),au(e)}function e1(){var e=0,n=1,t,i,r,o,a=dn,s=!1,l;function c(u){return u==null||isNaN(u=+u)?l:a(r===0?.5:(u=(o(u)-t)*r,s?Math.max(0,Math.min(1,u)):u))}c.domain=function(u){return arguments.length?([e,n]=u,t=o(e=+e),i=o(n=+n),r=t===i?0:1/(i-t),c):[e,n]},c.clamp=function(u){return arguments.length?(s=!!u,c):s},c.interpolator=function(u){return arguments.length?(a=u,c):a};function d(u){return function(h){var _,x;return arguments.length?([_,x]=h,a=u(_,x),c):[a(0),a(1)]}}return c.range=d(ln),c.rangeRound=d(po),c.unknown=function(u){return arguments.length?(l=u,c):l},function(u){return o=u,t=u(e),i=u(n),r=t===i?0:1/(i-t),c}}function t1(e,n){return n.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function Fo(){var e=au(e1()(dn));return e.copy=function(){return t1(e,Fo())},m0.apply(e,arguments)}function x0(e){for(var n=e.length/6|0,t=new Array(n),i=0;i<n;)t[i]="#"+e.slice(i*6,++i*6);return t}var b0=e=>cd(e[e.length-1]);var C0=new Array(3).concat("deebf79ecae13182bd","eff3ffbdd7e76baed62171b5","eff3ffbdd7e76baed63182bd08519c","eff3ffc6dbef9ecae16baed63182bd08519c","eff3ffc6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b508519c08306b").map(x0),su=b0(C0);function re(e){return function(){return e}}var lu=Math.abs,ze=Math.atan2,Tn=Math.cos,w0=Math.max,qs=Math.min,jt=Math.sin,ai=Math.sqrt,et=1e-12,Ki=Math.PI,No=Ki/2,Qi=2*Ki;function M0(e){return e>1?0:e<-1?Ki:Math.acos(e)}function cu(e){return e>=1?No:e<=-1?-No:Math.asin(e)}function Zi(e){let n=3;return e.digits=function(t){if(!arguments.length)return n;if(t==null)n=null;else{let i=Math.floor(t);if(!(i>=0))throw new RangeError(`invalid digits: ${t}`);n=i}return e},()=>new ii(n)}function n1(e){return e.innerRadius}function i1(e){return e.outerRadius}function r1(e){return e.startAngle}function o1(e){return e.endAngle}function a1(e){return e&&e.padAngle}function s1(e,n,t,i,r,o,a,s){var l=t-e,c=i-n,d=a-r,u=s-o,h=u*l-d*c;if(!(h*h<et))return h=(d*(n-o)-u*(e-r))/h,[e+h*l,n+h*c]}function Ws(e,n,t,i,r,o,a){var s=e-t,l=n-i,c=(a?o:-o)/ai(s*s+l*l),d=c*l,u=-c*s,h=e+d,_=n+u,x=t+d,C=i+u,w=(h+x)/2,M=(_+C)/2,O=x-h,I=C-_,b=O*O+I*I,D=r-o,R=h*C-x*_,L=(I<0?-1:1)*ai(w0(0,D*D*b-R*R)),z=(R*I-O*L)/b,H=(-R*O-I*L)/b,q=(R*I+O*L)/b,A=(-R*O+I*L)/b,K=z-w,F=H-M,j=q-w,T=A-M;return K*K+F*F>j*j+T*T&&(z=q,H=A),{cx:z,cy:H,x01:-d,y01:-u,x11:z*(r/D-1),y11:H*(r/D-1)}}function Ys(){var e=n1,n=i1,t=re(0),i=null,r=r1,o=o1,a=a1,s=null,l=Zi(c);function c(){var d,u,h=+e.apply(this,arguments),_=+n.apply(this,arguments),x=r.apply(this,arguments)-No,C=o.apply(this,arguments)-No,w=lu(C-x),M=C>x;if(s||(s=d=l()),_<h&&(u=_,_=h,h=u),!(_>et))s.moveTo(0,0);else if(w>Qi-et)s.moveTo(_*Tn(x),_*jt(x)),s.arc(0,0,_,x,C,!M),h>et&&(s.moveTo(h*Tn(C),h*jt(C)),s.arc(0,0,h,C,x,M));else{var O=x,I=C,b=x,D=C,R=w,L=w,z=a.apply(this,arguments)/2,H=z>et&&(i?+i.apply(this,arguments):ai(h*h+_*_)),q=qs(lu(_-h)/2,+t.apply(this,arguments)),A=q,K=q,F,j;if(H>et){var T=cu(H/h*jt(z)),W=cu(H/_*jt(z));(R-=T*2)>et?(T*=M?1:-1,b+=T,D-=T):(R=0,b=D=(x+C)/2),(L-=W*2)>et?(W*=M?1:-1,O+=W,I-=W):(L=0,O=I=(x+C)/2)}var oe=_*Tn(O),me=_*jt(O),ue=h*Tn(D),tt=h*jt(D);if(q>et){var nt=_*Tn(I),gt=_*jt(I),lt=h*Tn(b),un=h*jt(b),Be;if(w<Ki)if(Be=s1(oe,me,lt,un,nt,gt,ue,tt)){var pl=oe-Be[0],hl=me-Be[1],fl=nt-Be[0],ml=gt-Be[1],ku=1/jt(M0((pl*fl+hl*ml)/(ai(pl*pl+hl*hl)*ai(fl*fl+ml*ml)))/2),Ru=ai(Be[0]*Be[0]+Be[1]*Be[1]);A=qs(q,(h-Ru)/(ku-1)),K=qs(q,(_-Ru)/(ku+1))}else A=K=0}L>et?K>et?(F=Ws(lt,un,oe,me,_,K,M),j=Ws(nt,gt,ue,tt,_,K,M),s.moveTo(F.cx+F.x01,F.cy+F.y01),K<q?s.arc(F.cx,F.cy,K,ze(F.y01,F.x01),ze(j.y01,j.x01),!M):(s.arc(F.cx,F.cy,K,ze(F.y01,F.x01),ze(F.y11,F.x11),!M),s.arc(0,0,_,ze(F.cy+F.y11,F.cx+F.x11),ze(j.cy+j.y11,j.cx+j.x11),!M),s.arc(j.cx,j.cy,K,ze(j.y11,j.x11),ze(j.y01,j.x01),!M))):(s.moveTo(oe,me),s.arc(0,0,_,O,I,!M)):s.moveTo(oe,me),!(h>et)||!(R>et)?s.lineTo(ue,tt):A>et?(F=Ws(ue,tt,nt,gt,h,-A,M),j=Ws(oe,me,lt,un,h,-A,M),s.lineTo(F.cx+F.x01,F.cy+F.y01),A<q?s.arc(F.cx,F.cy,A,ze(F.y01,F.x01),ze(j.y01,j.x01),!M):(s.arc(F.cx,F.cy,A,ze(F.y01,F.x01),ze(F.y11,F.x11),!M),s.arc(0,0,h,ze(F.cy+F.y11,F.cx+F.x11),ze(j.cy+j.y11,j.cx+j.x11),M),s.arc(j.cx,j.cy,A,ze(j.y11,j.x11),ze(j.y01,j.x01),!M))):s.arc(0,0,h,D,b,M)}if(s.closePath(),d)return s=null,d+""||null}return c.centroid=function(){var d=(+e.apply(this,arguments)+ +n.apply(this,arguments))/2,u=(+r.apply(this,arguments)+ +o.apply(this,arguments))/2-Ki/2;return[Tn(u)*d,jt(u)*d]},c.innerRadius=function(d){return arguments.length?(e=typeof d=="function"?d:re(+d),c):e},c.outerRadius=function(d){return arguments.length?(n=typeof d=="function"?d:re(+d),c):n},c.cornerRadius=function(d){return arguments.length?(t=typeof d=="function"?d:re(+d),c):t},c.padRadius=function(d){return arguments.length?(i=d==null?null:typeof d=="function"?d:re(+d),c):i},c.startAngle=function(d){return arguments.length?(r=typeof d=="function"?d:re(+d),c):r},c.endAngle=function(d){return arguments.length?(o=typeof d=="function"?d:re(+d),c):o},c.padAngle=function(d){return arguments.length?(a=typeof d=="function"?d:re(+d),c):a},c.context=function(d){return arguments.length?(s=d??null,c):s},c}var TV=Array.prototype.slice;function Ji(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function E0(e){this._context=e}E0.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,n){switch(e=+e,n=+n,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,n):this._context.moveTo(e,n);break;case 1:this._point=2;default:this._context.lineTo(e,n);break}}};function Xs(e){return new E0(e)}function Ks(e){return e[0]}function Qs(e){return e[1]}function Vo(e,n){var t=re(!0),i=null,r=Xs,o=null,a=Zi(s);e=typeof e=="function"?e:e===void 0?Ks:re(e),n=typeof n=="function"?n:n===void 0?Qs:re(n);function s(l){var c,d=(l=Ji(l)).length,u,h=!1,_;for(i==null&&(o=r(_=a())),c=0;c<=d;++c)!(c<d&&t(u=l[c],c,l))===h&&((h=!h)?o.lineStart():o.lineEnd()),h&&o.point(+e(u,c,l),+n(u,c,l));if(_)return o=null,_+""||null}return s.x=function(l){return arguments.length?(e=typeof l=="function"?l:re(+l),s):e},s.y=function(l){return arguments.length?(n=typeof l=="function"?l:re(+l),s):n},s.defined=function(l){return arguments.length?(t=typeof l=="function"?l:re(!!l),s):t},s.curve=function(l){return arguments.length?(r=l,i!=null&&(o=r(i)),s):r},s.context=function(l){return arguments.length?(l==null?i=o=null:o=r(i=l),s):i},s}function du(e,n,t){var i=null,r=re(!0),o=null,a=Xs,s=null,l=Zi(c);e=typeof e=="function"?e:e===void 0?Ks:re(+e),n=typeof n=="function"?n:n===void 0?re(0):re(+n),t=typeof t=="function"?t:t===void 0?Qs:re(+t);function c(u){var h,_,x,C=(u=Ji(u)).length,w,M=!1,O,I=new Array(C),b=new Array(C);for(o==null&&(s=a(O=l())),h=0;h<=C;++h){if(!(h<C&&r(w=u[h],h,u))===M)if(M=!M)_=h,s.areaStart(),s.lineStart();else{for(s.lineEnd(),s.lineStart(),x=h-1;x>=_;--x)s.point(I[x],b[x]);s.lineEnd(),s.areaEnd()}M&&(I[h]=+e(w,h,u),b[h]=+n(w,h,u),s.point(i?+i(w,h,u):I[h],t?+t(w,h,u):b[h]))}if(O)return s=null,O+""||null}function d(){return Vo().defined(r).curve(a).context(o)}return c.x=function(u){return arguments.length?(e=typeof u=="function"?u:re(+u),i=null,c):e},c.x0=function(u){return arguments.length?(e=typeof u=="function"?u:re(+u),c):e},c.x1=function(u){return arguments.length?(i=u==null?null:typeof u=="function"?u:re(+u),c):i},c.y=function(u){return arguments.length?(n=typeof u=="function"?u:re(+u),t=null,c):n},c.y0=function(u){return arguments.length?(n=typeof u=="function"?u:re(+u),c):n},c.y1=function(u){return arguments.length?(t=u==null?null:typeof u=="function"?u:re(+u),c):t},c.lineX0=c.lineY0=function(){return d().x(e).y(n)},c.lineY1=function(){return d().x(e).y(t)},c.lineX1=function(){return d().x(i).y(n)},c.defined=function(u){return arguments.length?(r=typeof u=="function"?u:re(!!u),c):r},c.curve=function(u){return arguments.length?(a=u,o!=null&&(s=a(o)),c):a},c.context=function(u){return arguments.length?(u==null?o=s=null:s=a(o=u),c):o},c}function S0(e,n){return n<e?-1:n>e?1:n>=e?0:NaN}function I0(e){return e}function uu(){var e=I0,n=S0,t=null,i=re(0),r=re(Qi),o=re(0);function a(s){var l,c=(s=Ji(s)).length,d,u,h=0,_=new Array(c),x=new Array(c),C=+i.apply(this,arguments),w=Math.min(Qi,Math.max(-Qi,r.apply(this,arguments)-C)),M,O=Math.min(Math.abs(w)/c,o.apply(this,arguments)),I=O*(w<0?-1:1),b;for(l=0;l<c;++l)(b=x[_[l]=l]=+e(s[l],l,s))>0&&(h+=b);for(n!=null?_.sort(function(D,R){return n(x[D],x[R])}):t!=null&&_.sort(function(D,R){return t(s[D],s[R])}),l=0,u=h?(w-c*I)/h:0;l<c;++l,C=M)d=_[l],b=x[d],M=C+(b>0?b*u:0)+I,x[d]={data:s[d],index:l,value:b,startAngle:C,endAngle:M,padAngle:O};return x}return a.value=function(s){return arguments.length?(e=typeof s=="function"?s:re(+s),a):e},a.sortValues=function(s){return arguments.length?(n=s,t=null,a):n},a.sort=function(s){return arguments.length?(t=s,n=null,a):t},a.startAngle=function(s){return arguments.length?(i=typeof s=="function"?s:re(+s),a):i},a.endAngle=function(s){return arguments.length?(r=typeof s=="function"?s:re(+s),a):r},a.padAngle=function(s){return arguments.length?(o=typeof s=="function"?s:re(+s),a):o},a}function D0(e){return e<0?-1:1}function O0(e,n,t){var i=e._x1-e._x0,r=n-e._x1,o=(e._y1-e._y0)/(i||r<0&&-0),a=(t-e._y1)/(r||i<0&&-0),s=(o*r+a*i)/(i+r);return(D0(o)+D0(a))*Math.min(Math.abs(o),Math.abs(a),.5*Math.abs(s))||0}function A0(e,n){var t=e._x1-e._x0;return t?(3*(e._y1-e._y0)/t-n)/2:n}function pu(e,n,t){var i=e._x0,r=e._y0,o=e._x1,a=e._y1,s=(o-i)/3;e._context.bezierCurveTo(i+s,r+s*n,o-s,a-s*t,o,a)}function Zs(e){this._context=e}Zs.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:pu(this,this._t0,A0(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,n){var t=NaN;if(e=+e,n=+n,!(e===this._x1&&n===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,n):this._context.moveTo(e,n);break;case 1:this._point=2;break;case 2:this._point=3,pu(this,A0(this,t=O0(this,e,n)),t);break;default:pu(this,this._t0,t=O0(this,e,n));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=n,this._t0=t}}};function l1(e){this._context=new T0(e)}(l1.prototype=Object.create(Zs.prototype)).point=function(e,n){Zs.prototype.point.call(this,n,e)};function T0(e){this._context=e}T0.prototype={moveTo:function(e,n){this._context.moveTo(n,e)},closePath:function(){this._context.closePath()},lineTo:function(e,n){this._context.lineTo(n,e)},bezierCurveTo:function(e,n,t,i,r,o){this._context.bezierCurveTo(n,e,i,t,o,r)}};function Js(e){return new Zs(e)}function Pn(e,n,t){this.k=e,this.x=n,this.y=t}Pn.prototype={constructor:Pn,scale:function(e){return e===1?this:new Pn(this.k*e,this.x,this.y)},translate:function(e,n){return e===0&n===0?this:new Pn(this.k,this.x+this.k*e,this.y+this.k*n)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var hu=new Pn(1,0,0);fu.prototype=Pn.prototype;function fu(e){for(;!e.__zoom;)if(!(e=e.parentNode))return hu;return e.__zoom}var el=class e{constructor(){}plotLine(n,t,i,r){let o={x:i,y:r,type:"scatter"},a={title:n};Plotly.newPlot(t,[o],a)}plot3D(n,t,i,r,o,a,s,l,c,d,u){let h={x:i,y:r,z:o,type:"scatter3d",mode:"markers",marker:{size:8,color:o,colorscale:"Viridis"}},_={title:n,scene:{xaxis:{title:{text:d},tickvals:l,ticktext:a},yaxis:{title:{text:u},tickvals:c,ticktext:s},zaxis:{title:"Count"}},margin:{l:50,r:50,b:50,t:50},autosize:!0,width:400,height:400},x={responsive:!0};Plotly.newPlot(t,[h],_,x)}plotWorldMap(n,t,i,r){let o={type:"choropleth",locationmode:"country names",locations:i,z:r,text:i,colorscale:"Viridis",colorbar:{title:"Value"}},a={title:n,geo:{projection:{type:"natural earth"},showframe:!1},width:1e3,height:600};Plotly.newPlot(t,[o],a)}plotSwitzerlandMap(n,t,i,r,o,a){return ui(this,null,function*(){let c={type:"choropleth",geojson:yield(yield fetch("assets/switzerland.geojson")).json(),locations:["Switzerland"],z:[1],featureidkey:"properties.name",colorscale:[[0,"lightgray"],[1,"lightgray"]],showscale:!1,hoverinfo:"none"},d={type:"scattergeo",mode:"markers+text",lon:o,lat:r,text:i,marker:{size:a.map(h=>h*5),color:a,colorscale:"Viridis",colorbar:{title:"Value"}},hoverinfo:"text+lon+lat"},u={title:n,geo:{projection:{type:"mercator"},center:{lat:46.8182,lon:8.2275},lonaxis:{range:[5.5,10.5]},lataxis:{range:[45.5,48]},showframe:!1,showland:!0,landcolor:"lightgray"},width:800,height:600};Plotly.newPlot(t,[c,d],u)})}plotOwnWorldMap(n,t,i,r,o,a){return ui(this,null,function*(){let l=yield(yield fetch("assets/world.geojson")).json(),c=l.features.map(M=>M.properties.name),d=c.map(()=>Math.random()),u={type:"choropleth",geojson:l,locations:c,z:d,featureidkey:"properties.name",colorscale:[[0,"lightgray"],[1,"lightgray"]],showscale:!1,hoverinfo:"none"},h=a.map(M=>M*15);h.length>0&&(h=h.map(M=>M>50?50:M));let _=i.map((M,O)=>h[O]>=30?M:""),x={type:"scattergeo",mode:"markers+text",lon:o,lat:r,text:_,textposition:"top center",textfont:{size:12},marker:{size:h,color:a,colorscale:"Viridis",colorbar:{title:"Value"}},hoverinfo:"text+lon+lat"},C={title:n,geo:{projection:{type:"mercator"},scope:"europe",showframe:!1,showland:!1,showocean:!1,showcountries:!1,showcoastlines:!1,center:{lat:46.8182,lon:8.2275},lonaxis:{range:[5.5,10.5]},lataxis:{range:[45.5,48]},landcolor:"lightgray"},width:800,height:600};Plotly.newPlot(t,[u,x],C),document.getElementById(t).on("plotly_relayout",function(M){if(M["geo.projection.scale"]||M["geo.lonaxis.range[0]"]!==void 0){let O=M["geo.projection.scale"]||5/(M["geo.lonaxis.range[1]"]-M["geo.lonaxis.range[0]"]),I=i.map((R,L)=>h[L]>=20/O?R:""),b=Math.max(.5,Math.min(1,O/2)),D=h.map(R=>R*b);Plotly.restyle(t,{text:[I],"marker.size":[D]})}})})}static \u0275fac=function(t){return new(t||e)};static \u0275prov=G({token:e,factory:e.\u0275fac,providedIn:"root"})};var d1=["chartArea"];function u1(e,n){if(e&1&&(f(0,"option",10),v(1),tn(2,"titlecase"),p()),e&2){let t=n.$implicit,i=m(2);y("value",t)("selected",i.chartType===t),g(),X(" ",$n(2,3,t)," ")}}function p1(e,n){if(e&1){let t=U();f(0,"div",5)(1,"div",6)(2,"label",7),v(3,"Chart Type:"),p(),f(4,"select",8),k("change",function(r){E(t);let o=m();return S(o.setChartType(r.target))}),P(5,u1,3,5,"option",9),p()()()}if(e&2){let t=m();g(5),y("ngForOf",t.availableChartTypes)}}function h1(e,n){if(e&1&&(f(0,"div",11),v(1),p()),e&2){let t=m();g(),Z(t.title)}}var tl=class e{constructor(n,t){this.elementRef=n;this.plotlyService=t}chartArea;data=[];chartType="bar";showControls=!0;title="";xLabel="X Axis";yLabel="Y Axis";zLabel="Z Axis";colorScheme=["#1f77b4","#ff7f0e","#2ca02c","#d62728","#9467bd","#8c564b"];chartCategory="";elementClicked=new te;availableChartTypes=["bar","line","area","pie","scatter","bubble"];width=600;height=400;margin={top:30,right:30,bottom:110,left:60};is3DChart=!1;ngOnInit(){this.checkChartType()}ngAfterViewInit(){this.data.length>0&&this.renderChart()}ngOnChanges(n){(n.data&&!n.data.firstChange||n.chartType&&!n.chartType.firstChange)&&(this.checkChartType(),this.renderChart())}checkChartType(){this.is3DChart=this.chartType==="3d-scatter"}setChartType(n){this.chartType=n.value,this.checkChartType(),this.renderChart()}renderChart(){if(ce(this.chartArea.nativeElement).selectAll("svg").remove(),!(!this.data||this.data.length===0))if(this.data&&this.data.length>0&&typeof this.data[0].x=="string"&&this.chartType!=="3d-scatter"&&(this.data=[...this.data].sort((n,t)=>String(n.x).localeCompare(String(t.x)))),this.is3DChart)this.create3DChart();else switch(this.chartType){case"bar":this.createBarChart();break;case"line":this.createLineChart();break;case"area":this.createAreaChart();break;case"pie":this.createPieChart();break;case"scatter":this.createScatterChart();break;case"bubble":this.createBubbleChart();break;default:this.createBarChart()}}generateSampleData(){this.data=[];let n=["A","B","C","D","E","F"];if(this.is3DChart)for(let t=0;t<20;t++)this.data.push({x:Math.random()*10,y:Math.random()*10,z:Math.random()*10,label:`Point ${t+1}`});else n.forEach((t,i)=>{this.data.push({x:t,y:Math.floor(Math.random()*50)+10,z:Math.floor(Math.random()*30)+5,color:this.colorScheme[i%this.colorScheme.length]})})}create3DChart(){let n=this.chartArea.nativeElement;n.innerHTML="";let t=document.createElement("div");t.id="plotly-3d-chart",t.style.width="100%",t.style.height="400px",n.appendChild(t);let i=this.data.map(d=>d.x),r=this.data.map(d=>d.y),o=this.data.map(d=>d.z||0),a=[],s=[],l=[],c=[];typeof this.data[0].x=="string"&&(a=[...new Set(this.data.map(d=>String(d.x)))],l=a.map((d,u)=>u)),typeof this.data[0].y=="string"&&(s=[...new Set(this.data.map(d=>String(d.y)))],c=s.map((d,u)=>u)),this.plotlyService.plot3D(this.title,"plotly-3d-chart",i,r,o,a,s,l,c,this.xLabel,this.yLabel)}createBarChart(){let n=ce(this.chartArea.nativeElement).append("svg").attr("width",this.width+this.margin.left+this.margin.right).attr("height",this.height+this.margin.top+this.margin.bottom).append("g").attr("transform",`translate(${this.margin.left},${this.margin.top})`),t=Xi().range([0,this.width]).domain(this.data.map(r=>String(r.x))).padding(.3),i=st().domain([0,Ke(this.data,r=>r.y)||1]).nice().range([this.height,0]);n.append("g").attr("transform",`translate(0,${this.height})`).call(on(t)).selectAll("text").attr("transform","translate(-10,0)rotate(-45)").style("text-anchor","end"),n.append("g").call(Xn(i)),n.selectAll("rect").data(this.data).enter().append("rect").attr("x",r=>t(String(r.x))).attr("y",r=>i(r.y)).attr("width",t.bandwidth()).attr("height",r=>this.height-i(r.y)).attr("fill","#1976d2").on("mouseover",function(r,o){ce(this).attr("opacity",.8),n.append("text").attr("class","tooltip").attr("x",t(String(o.x))+t.bandwidth()/2).attr("y",i(o.y)-10).attr("text-anchor","middle").text(`${o.y}`).style("font-size","12px").style("font-weight","bold")}).on("mouseout",function(){ce(this).attr("opacity",1),n.selectAll(".tooltip").remove()}).on("click",(r,o)=>{this.chartCategory&&this.elementClicked.emit({category:this.chartCategory,value:o.x,originalValue:o.label||o.x,originalEvent:r})}),n.append("text").attr("text-anchor","middle").attr("x",this.width/2).attr("y",this.height+30).text(this.xLabel),n.append("text").attr("text-anchor","middle").attr("transform","rotate(-90)").attr("y",-this.margin.left+15).attr("x",-this.height/2).text(this.yLabel)}createLineChart(){let n=ce(this.chartArea.nativeElement).append("svg").attr("width",this.width).attr("height",this.height).append("g").attr("transform",`translate(${this.margin.left}, ${this.margin.top})`),t;typeof this.data[0].x=="string"?t=Gs().domain(this.data.map(o=>String(o.x))).range([0,this.width-this.margin.left-this.margin.right]):t=st().domain([Mn(this.data,o=>Number(o.x))||0,Ke(this.data,o=>Number(o.x))||1]).range([0,this.width-this.margin.left-this.margin.right]);let i=st().domain([0,Ke(this.data,o=>o.y)||1]).nice().range([this.height-this.margin.bottom,this.margin.top]),r=Vo().x(o=>t(o.x)).y(o=>i(o.y)).curve(Js);n.append("g").attr("transform",`translate(0,${this.height-this.margin.bottom})`).call(typeof this.data[0].x=="string"?on(t):on(t)).selectAll("text").attr("transform","translate(-10,0)rotate(-45)").style("text-anchor","end"),n.append("g").call(Xn(i)),n.append("path").datum(this.data).attr("class","line").attr("fill","none").attr("stroke",this.colorScheme[0]).attr("stroke-width",2).attr("d",r),n.selectAll(".dot").data(this.data).enter().append("circle").attr("class","dot").attr("cx",o=>t(o.x)).attr("cy",o=>i(o.y)).attr("r",5).attr("fill","#1976d2").on("mouseover",function(o,a){ce(this).attr("r",7),n.append("text").attr("class","tooltip").attr("x",t(a.x)).attr("y",i(a.y)-10).attr("text-anchor","middle").text(`${a.y}`).style("font-size","12px").style("font-weight","bold")}).on("mouseout",function(){ce(this).attr("r",5),n.selectAll(".tooltip").remove()}).on("click",(o,a)=>{this.elementClicked.emit({category:this.chartCategory,value:a.x})}),n.append("text").attr("text-anchor","middle").attr("x",(this.width-this.margin.left-this.margin.right)/2).attr("y",this.height-10).text(this.xLabel),n.append("text").attr("text-anchor","middle").attr("transform","rotate(-90)").attr("y",-this.margin.left+15).attr("x",-(this.height-this.margin.top-this.margin.bottom)/2).text(this.yLabel)}createAreaChart(){let n=ce(this.chartArea.nativeElement).append("svg").attr("width",this.width).attr("height",this.height).append("g").attr("transform",`translate(${this.margin.left}, ${this.margin.top})`),t;typeof this.data[0].x=="string"?t=Gs().domain(this.data.map(o=>String(o.x))).range([0,this.width-this.margin.left-this.margin.right]):t=st().domain([Mn(this.data,o=>Number(o.x))||0,Ke(this.data,o=>Number(o.x))||1]).range([0,this.width-this.margin.left-this.margin.right]);let i=st().domain([0,Ke(this.data,o=>o.y)||1]).nice().range([this.height-this.margin.bottom,this.margin.top]),r=du().x(o=>t(o.x)).y0(i(0)).y1(o=>i(o.y)).curve(Js);n.append("g").attr("transform",`translate(0,${this.height-this.margin.bottom})`).call(typeof this.data[0].x=="string"?on(t):on(t)).selectAll("text").attr("transform","translate(-10,0)rotate(-45)").style("text-anchor","end"),n.append("g").call(Xn(i)),n.append("path").datum(this.data).attr("class","area").attr("fill",this.colorScheme[0]).attr("fill-opacity",.6).attr("stroke",this.colorScheme[0]).attr("stroke-width",2).attr("d",r),n.append("text").attr("text-anchor","middle").attr("x",(this.width-this.margin.left-this.margin.right)/2).attr("y",this.height-10).text(this.xLabel),n.append("text").attr("text-anchor","middle").attr("transform","rotate(-90)").attr("y",-this.margin.left+15).attr("x",-(this.height-this.margin.top-this.margin.bottom)/2).text(this.yLabel)}createPieChart(){let n=this.data.reduce((l,c)=>l+c.y,0),t=ce(this.chartArea.nativeElement).append("svg").attr("width",this.width).attr("height",this.height).append("g").attr("transform",`translate(${this.width/2}, ${this.height/2})`),i=uu().value(l=>l.y).sort(null),r=Math.min(this.width,this.height)/2-40,o=Ys().innerRadius(0).outerRadius(r),a=Ys().innerRadius(r*.6).outerRadius(r*.9),s=t.selectAll(".arc").data(i(this.data)).enter().append("g").attr("class","arc");s.append("path").attr("d",o).attr("fill",(l,c)=>l.data.color||this.colorScheme[c%this.colorScheme.length]).attr("stroke","white").attr("stroke-width",2).on("mouseover",function(l,c){let d=(c.data.y/n*100).toFixed(1);ce(this).attr("opacity",.8),t.append("text").attr("class","tooltip").attr("text-anchor","middle").attr("dy","-0.5em").text(`${c.data.x}: ${c.data.y} (${d}%)`).style("font-size","14px").style("font-weight","bold")}).on("mouseout",function(){ce(this).attr("opacity",1),t.selectAll(".tooltip").remove()}).on("click",(l,c)=>{this.chartCategory&&this.elementClicked.emit({category:this.chartCategory,value:c.data.x,originalValue:c.data.label||c.data.x,originalEvent:l})}),s.append("text").attr("transform",l=>`translate(${a.centroid(l)})`).attr("text-anchor","middle").attr("dy","0.35em").text(l=>l.data.y/n*100>=5?String(l.data.x):"").style("font-size","12px")}createScatterChart(){let n=ce(this.chartArea.nativeElement).append("svg").attr("width",this.width).attr("height",this.height).append("g").attr("transform",`translate(${this.margin.left}, ${this.margin.top})`),t=st().domain([Mn(this.data,r=>typeof r.x=="number"?r.x:0)||0,Ke(this.data,r=>typeof r.x=="number"?r.x:0)||1]).nice().range([0,this.width-this.margin.left-this.margin.right]),i=st().domain([0,Ke(this.data,r=>r.y)||1]).nice().range([this.height-this.margin.bottom,this.margin.top]);n.append("g").attr("transform",`translate(0,${this.height-this.margin.bottom})`).call(on(t)),n.append("g").call(Xn(i)),n.selectAll(".dot").data(this.data).enter().append("circle").attr("class","dot").attr("cx",r=>t(typeof r.x=="number"?r.x:0)).attr("cy",r=>i(r.y)).attr("r",6).attr("fill","#1976d2").on("mouseover",function(r,o){ce(this).attr("r",8),n.append("text").attr("class","tooltip").attr("x",t(typeof o.x=="number"?o.x:0)+10).attr("y",i(o.y)-10).text(`(${o.x}, ${o.y})`).style("font-size","12px").style("font-weight","bold")}).on("mouseout",function(){ce(this).attr("r",6),n.selectAll(".tooltip").remove()}).on("click",(r,o)=>{this.elementClicked.emit({category:this.chartCategory,value:o.x})}),n.append("text").attr("text-anchor","middle").attr("x",(this.width-this.margin.left-this.margin.right)/2).attr("y",this.height-10).text(this.xLabel),n.append("text").attr("text-anchor","middle").attr("transform","rotate(-90)").attr("y",-this.margin.left+15).attr("x",-(this.height-this.margin.top-this.margin.bottom)/2).text(this.yLabel)}createBubbleChart(){let n=ce(this.chartArea.nativeElement).append("svg").attr("width",this.width).attr("height",this.height).append("g").attr("transform",`translate(${this.margin.left}, ${this.margin.top})`),t=st().domain([Mn(this.data,o=>typeof o.x=="number"?o.x:0)||0,Ke(this.data,o=>typeof o.x=="number"?o.x:0)||1]).nice().range([0,this.width-this.margin.left-this.margin.right]),i=st().domain([0,Ke(this.data,o=>o.y)||1]).nice().range([this.height-this.margin.bottom,this.margin.top]),r=st().domain([Mn(this.data,o=>o.z||1)||1,Ke(this.data,o=>o.z||1)||1]).range([4,30]);n.append("g").attr("transform",`translate(0,${this.height-this.margin.bottom})`).call(on(t)),n.append("g").call(Xn(i)),n.selectAll(".bubble").data(this.data).enter().append("circle").attr("class","bubble").attr("cx",o=>t(typeof o.x=="number"?o.x:0)).attr("cy",o=>i(o.y)).attr("r",o=>r(o.z||1)).attr("fill","#1976d2").attr("opacity",.7).attr("stroke","white").attr("stroke-width",1).on("mouseover",function(o,a){ce(this).attr("opacity",.9).attr("stroke-width",2),n.append("text").attr("class","tooltip").attr("x",t(typeof a.x=="number"?a.x:0)).attr("y",i(a.y)-(r(a.z||1)+5)).attr("text-anchor","middle").text(`(${a.x}, ${a.y}, ${a.z})`).style("font-size","12px").style("font-weight","bold")}).on("mouseout",function(){ce(this).attr("opacity",.7).attr("stroke-width",1),n.selectAll(".tooltip").remove()}).on("click",(o,a)=>{this.elementClicked.emit({category:this.chartCategory,value:a.x})}),n.selectAll(".label").data(this.data.filter(o=>o.label)).enter().append("text").attr("class","label").attr("x",o=>t(typeof o.x=="number"?o.x:0)).attr("y",o=>i(o.y)-(r(o.z||1)+5)).attr("text-anchor","middle").text(o=>o.label||"").style("font-size","10px"),n.append("text").attr("text-anchor","middle").attr("x",(this.width-this.margin.left-this.margin.right)/2).attr("y",this.height-10).text(this.xLabel),n.append("text").attr("text-anchor","middle").attr("transform","rotate(-90)").attr("y",-this.margin.left+15).attr("x",-(this.height-this.margin.top-this.margin.bottom)/2).text(this.yLabel)}static \u0275fac=function(t){return new(t||e)(V(De),V(el))};static \u0275cmp=Ce({type:e,selectors:[["app-chart"]],viewQuery:function(t,i){if(t&1&&en(d1,7),t&2){let r;bt(r=Ct())&&(i.chartArea=r.first)}},inputs:{data:"data",chartType:"chartType",showControls:"showControls",title:"title",xLabel:"xLabel",yLabel:"yLabel",zLabel:"zLabel",colorScheme:"colorScheme",chartCategory:"chartCategory"},outputs:{elementClicked:"elementClicked"},standalone:!0,features:[Ae,Me],decls:6,vars:2,consts:[["chartArea",""],[1,"chart-container"],["class","chart-controls",4,"ngIf"],["class","chart-title",4,"ngIf"],[1,"graph"],[1,"chart-controls"],[1,"chart-type-selector"],["for","chartTypeSelect"],["id","chartTypeSelect",1,"chart-type-select",3,"change"],[3,"value","selected",4,"ngFor","ngForOf"],[3,"value","selected"],[1,"chart-title"]],template:function(t,i){t&1&&(f(0,"div",1),P(1,p1,6,1,"div",2)(2,h1,2,1,"div",3),f(3,"div",1),pe(4,"div",4,0),p()()),t&2&&(g(),y("ngIf",i.showControls),g(),y("ngIf",i.title))},dependencies:[Xe,Bt,Mt,oa],styles:[".chart-container[_ngcontent-%COMP%]{font-family:Arial,sans-serif;margin:20px;width:95%}.chart-title[_ngcontent-%COMP%]{font-size:18px;font-weight:700;text-align:center;margin-bottom:15px;color:#333}.graph[_ngcontent-%COMP%]{width:100%;min-height:400px;background-color:#fff;border-radius:6px;box-shadow:0 2px 4px #0000001a;padding:10px;margin-top:10px;overflow:visible}.chart-controls[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:10px;margin-bottom:15px;justify-content:center}.chart-controls[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:8px 15px;background-color:#e9e9e9;border:1px solid #ddd;border-radius:4px;cursor:pointer;font-size:14px;transition:all .2s ease}.chart-controls[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background-color:#d9d9d9}.chart-controls[_ngcontent-%COMP%]   button.active[_ngcontent-%COMP%]{background-color:#1976d2;color:#fff;border-color:#1976d2}.chart-type-select[_ngcontent-%COMP%]{padding:6px 10px;border-radius:4px;border:1px solid #ccc;background-color:#fff;font-size:14px;min-width:120px;cursor:pointer}.chart-type-select[_ngcontent-%COMP%]:focus{outline:none;border-color:#007bff;box-shadow:0 0 0 2px #007bff40}.bar[_ngcontent-%COMP%]:hover, .dot[_ngcontent-%COMP%]:hover, .bubble[_ngcontent-%COMP%]:hover, .arc[_ngcontent-%COMP%]:hover{cursor:pointer}.area[_ngcontent-%COMP%]{opacity:.7;transition:opacity .2s}.area[_ngcontent-%COMP%]:hover{opacity:.9;cursor:pointer}.line[_ngcontent-%COMP%]{fill:none;stroke-width:2}text[_ngcontent-%COMP%]{font-size:12px;fill:#555}.axis-title[_ngcontent-%COMP%]{font-size:14px;font-weight:700}.x-axis[_ngcontent-%COMP%]   text[_ngcontent-%COMP%]{text-anchor:end}.tooltip[_ngcontent-%COMP%]{pointer-events:none;background-color:#000000b3;color:#fff;padding:5px 8px;border-radius:4px;font-size:12px;z-index:100}@media (max-width: 600px){.graph[_ngcontent-%COMP%]{min-height:300px}.chart-controls[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:6px 10px;font-size:12px}.chart-title[_ngcontent-%COMP%]{font-size:16px}.chart-type-select[_ngcontent-%COMP%]{flex-grow:1}}#plotly-3d-chart[_ngcontent-%COMP%]{width:100%;height:400px}"]})};var gu;try{gu=typeof Intl<"u"&&Intl.v8BreakIterator}catch{gu=!1}var kn=(()=>{class e{constructor(t){this._platformId=t,this.isBrowser=this._platformId?gp(this._platformId):typeof document=="object"&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!!(window.chrome||gu)&&typeof CSS<"u"&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}static{this.\u0275fac=function(i){return new(i||e)(B(zt))}}static{this.\u0275prov=G({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();var Lo;function f1(){if(Lo==null&&typeof window<"u")try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:()=>Lo=!0}))}finally{Lo=Lo||!1}return Lo}function er(e){return f1()?e:!!e.capture}var mu;function m1(){if(mu==null){let e=typeof document<"u"?document.head:null;mu=!!(e&&(e.createShadowRoot||e.attachShadow))}return mu}function k0(e){if(m1()){let n=e.getRootNode?e.getRootNode():null;if(typeof ShadowRoot<"u"&&ShadowRoot&&n instanceof ShadowRoot)return n}return null}function Rn(e){return e.composedPath?e.composedPath()[0]:e.target}function R0(){return typeof __karma__<"u"&&!!__karma__||typeof jasmine<"u"&&!!jasmine||typeof jest<"u"&&!!jest||typeof Mocha<"u"&&!!Mocha}function nl(e,...n){return n.length?n.some(t=>e[t]):e.altKey||e.shiftKey||e.ctrlKey||e.metaKey}function _u(e){return Array.isArray(e)?e:[e]}function si(e){return e instanceof De?e.nativeElement:e}var N0=new Set,li,g1=(()=>{class e{constructor(t,i){this._platform=t,this._nonce=i,this._matchMedia=this._platform.isBrowser&&window.matchMedia?window.matchMedia.bind(window):v1}matchMedia(t){return(this._platform.WEBKIT||this._platform.BLINK)&&_1(t,this._nonce),this._matchMedia(t)}static{this.\u0275fac=function(i){return new(i||e)(B(kn),B(cr,8))}}static{this.\u0275prov=G({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();function _1(e,n){if(!N0.has(e))try{li||(li=document.createElement("style"),n&&li.setAttribute("nonce",n),li.setAttribute("type","text/css"),document.head.appendChild(li)),li.sheet&&(li.sheet.insertRule(`@media ${e} {body{ }}`,0),N0.add(e))}catch(t){console.error(t)}}function v1(e){return{matches:e==="all"||e==="",media:e,addListener:()=>{},removeListener:()=>{}}}var L0=(()=>{class e{constructor(t,i){this._mediaMatcher=t,this._zone=i,this._queries=new Map,this._destroySubject=new Se}ngOnDestroy(){this._destroySubject.next(),this._destroySubject.complete()}isMatched(t){return V0(_u(t)).some(r=>this._registerQuery(r).mql.matches)}observe(t){let r=V0(_u(t)).map(a=>this._registerQuery(a).observable),o=rr(r);return o=zo(o.pipe(Ot(1)),o.pipe(Ho(1),Bo(0))),o.pipe(J(a=>{let s={matches:!1,breakpoints:{}};return a.forEach(({matches:l,query:c})=>{s.matches=s.matches||l,s.breakpoints[c]=l}),s}))}_registerQuery(t){if(this._queries.has(t))return this._queries.get(t);let i=this._mediaMatcher.matchMedia(t),o={observable:new ir(a=>{let s=l=>this._zone.run(()=>a.next(l));return i.addListener(s),()=>{i.removeListener(s)}}).pipe(Ln(i),J(({matches:a})=>({query:t,matches:a})),pi(this._destroySubject)),mql:i};return this._queries.set(t,o),o}static{this.\u0275fac=function(i){return new(i||e)(B(g1),B(Le))}}static{this.\u0275prov=G({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();function V0(e){return e.map(n=>n.split(",")).reduce((n,t)=>n.concat(t)).map(n=>n.trim())}var V1=200,yu=class{constructor(n,t){this._letterKeyStream=new Se,this._items=[],this._selectedItemIndex=-1,this._pressedLetters=[],this._selectedItem=new Se,this.selectedItem=this._selectedItem;let i=typeof t?.debounceInterval=="number"?t.debounceInterval:V1;t?.skipPredicate&&(this._skipPredicateFn=t.skipPredicate),this.setItems(n),this._setupKeyHandler(i)}destroy(){this._pressedLetters=[],this._letterKeyStream.complete(),this._selectedItem.complete()}setCurrentSelectedItemIndex(n){this._selectedItemIndex=n}setItems(n){this._items=n}handleKey(n){let t=n.keyCode;n.key&&n.key.length===1?this._letterKeyStream.next(n.key.toLocaleUpperCase()):(t>=65&&t<=90||t>=48&&t<=57)&&this._letterKeyStream.next(String.fromCharCode(t))}isTyping(){return this._pressedLetters.length>0}reset(){this._pressedLetters=[]}_setupKeyHandler(n){this._letterKeyStream.pipe(Te(t=>this._pressedLetters.push(t)),Bo(n),Ye(()=>this._pressedLetters.length>0),J(()=>this._pressedLetters.join("").toLocaleUpperCase())).subscribe(t=>{for(let i=1;i<this._items.length+1;i++){let r=(this._selectedItemIndex+i)%this._items.length,o=this._items[r];if(!this._skipPredicateFn?.(o)&&o.getLabel?.().toLocaleUpperCase().trim().indexOf(t)===0){this._selectedItem.next(o);break}}this._pressedLetters=[]})}},xu=class{constructor(n,t){this._items=n,this._activeItemIndex=-1,this._activeItem=Un(null),this._wrap=!1,this._typeaheadSubscription=pn.EMPTY,this._vertical=!0,this._allowedModifierKeys=[],this._homeAndEnd=!1,this._pageUpAndDown={enabled:!1,delta:10},this._skipPredicateFn=i=>i.disabled,this.tabOut=new Se,this.change=new Se,n instanceof lr?this._itemChangesSubscription=n.changes.subscribe(i=>this._itemsChanged(i.toArray())):Il(n)&&(this._effectRef=ap(()=>this._itemsChanged(n()),{injector:t}))}skipPredicate(n){return this._skipPredicateFn=n,this}withWrap(n=!0){return this._wrap=n,this}withVerticalOrientation(n=!0){return this._vertical=n,this}withHorizontalOrientation(n){return this._horizontal=n,this}withAllowedModifierKeys(n){return this._allowedModifierKeys=n,this}withTypeAhead(n=200){this._typeaheadSubscription.unsubscribe();let t=this._getItemsArray();return this._typeahead=new yu(t,{debounceInterval:typeof n=="number"?n:void 0,skipPredicate:i=>this._skipPredicateFn(i)}),this._typeaheadSubscription=this._typeahead.selectedItem.subscribe(i=>{this.setActiveItem(i)}),this}cancelTypeahead(){return this._typeahead?.reset(),this}withHomeAndEnd(n=!0){return this._homeAndEnd=n,this}withPageUpDown(n=!0,t=10){return this._pageUpAndDown={enabled:n,delta:t},this}setActiveItem(n){let t=this._activeItem();this.updateActiveItem(n),this._activeItem()!==t&&this.change.next(this._activeItemIndex)}onKeydown(n){let t=n.keyCode,r=["altKey","ctrlKey","metaKey","shiftKey"].every(o=>!n[o]||this._allowedModifierKeys.indexOf(o)>-1);switch(t){case 9:this.tabOut.next();return;case 40:if(this._vertical&&r){this.setNextItemActive();break}else return;case 38:if(this._vertical&&r){this.setPreviousItemActive();break}else return;case 39:if(this._horizontal&&r){this._horizontal==="rtl"?this.setPreviousItemActive():this.setNextItemActive();break}else return;case 37:if(this._horizontal&&r){this._horizontal==="rtl"?this.setNextItemActive():this.setPreviousItemActive();break}else return;case 36:if(this._homeAndEnd&&r){this.setFirstItemActive();break}else return;case 35:if(this._homeAndEnd&&r){this.setLastItemActive();break}else return;case 33:if(this._pageUpAndDown.enabled&&r){let o=this._activeItemIndex-this._pageUpAndDown.delta;this._setActiveItemByIndex(o>0?o:0,1);break}else return;case 34:if(this._pageUpAndDown.enabled&&r){let o=this._activeItemIndex+this._pageUpAndDown.delta,a=this._getItemsArray().length;this._setActiveItemByIndex(o<a?o:a-1,-1);break}else return;default:(r||nl(n,"shiftKey"))&&this._typeahead?.handleKey(n);return}this._typeahead?.reset(),n.preventDefault()}get activeItemIndex(){return this._activeItemIndex}get activeItem(){return this._activeItem()}isTyping(){return!!this._typeahead&&this._typeahead.isTyping()}setFirstItemActive(){this._setActiveItemByIndex(0,1)}setLastItemActive(){this._setActiveItemByIndex(this._getItemsArray().length-1,-1)}setNextItemActive(){this._activeItemIndex<0?this.setFirstItemActive():this._setActiveItemByDelta(1)}setPreviousItemActive(){this._activeItemIndex<0&&this._wrap?this.setLastItemActive():this._setActiveItemByDelta(-1)}updateActiveItem(n){let t=this._getItemsArray(),i=typeof n=="number"?n:t.indexOf(n),r=t[i];this._activeItem.set(r??null),this._activeItemIndex=i,this._typeahead?.setCurrentSelectedItemIndex(i)}destroy(){this._typeaheadSubscription.unsubscribe(),this._itemChangesSubscription?.unsubscribe(),this._effectRef?.destroy(),this._typeahead?.destroy(),this.tabOut.complete(),this.change.complete()}_setActiveItemByDelta(n){this._wrap?this._setActiveInWrapMode(n):this._setActiveInDefaultMode(n)}_setActiveInWrapMode(n){let t=this._getItemsArray();for(let i=1;i<=t.length;i++){let r=(this._activeItemIndex+n*i+t.length)%t.length,o=t[r];if(!this._skipPredicateFn(o)){this.setActiveItem(r);return}}}_setActiveInDefaultMode(n){this._setActiveItemByIndex(this._activeItemIndex+n,n)}_setActiveItemByIndex(n,t){let i=this._getItemsArray();if(i[n]){for(;this._skipPredicateFn(i[n]);)if(n+=t,!i[n])return;this.setActiveItem(n)}}_getItemsArray(){return Il(this._items)?this._items():this._items instanceof lr?this._items.toArray():this._items}_itemsChanged(n){this._typeahead?.setItems(n);let t=this._activeItem();if(t){let i=n.indexOf(t);i>-1&&i!==this._activeItemIndex&&(this._activeItemIndex=i,this._typeahead?.setCurrentSelectedItemIndex(i))}}};var ol=class extends xu{constructor(){super(...arguments),this._origin="program"}setFocusOrigin(n){return this._origin=n,this}setActiveItem(n){super.setActiveItem(n),this.activeItem&&this.activeItem.focus(this._origin)}};function bu(e){return e.buttons===0||e.detail===0}function Cu(e){let n=e.touches&&e.touches[0]||e.changedTouches&&e.changedTouches[0];return!!n&&n.identifier===-1&&(n.radiusX==null||n.radiusX===1)&&(n.radiusY==null||n.radiusY===1)}var L1=new Q("cdk-input-modality-detector-options"),j1={ignoreKeys:[18,17,224,91,16]},$0=650,tr=er({passive:!0,capture:!0}),U1=(()=>{class e{get mostRecentModality(){return this._modality.value}constructor(t,i,r,o){this._platform=t,this._mostRecentTarget=null,this._modality=new He(null),this._lastTouchMs=0,this._onKeydown=a=>{this._options?.ignoreKeys?.some(s=>s===a.keyCode)||(this._modality.next("keyboard"),this._mostRecentTarget=Rn(a))},this._onMousedown=a=>{Date.now()-this._lastTouchMs<$0||(this._modality.next(bu(a)?"keyboard":"mouse"),this._mostRecentTarget=Rn(a))},this._onTouchstart=a=>{if(Cu(a)){this._modality.next("keyboard");return}this._lastTouchMs=Date.now(),this._modality.next("touch"),this._mostRecentTarget=Rn(a)},this._options=N(N({},j1),o),this.modalityDetected=this._modality.pipe(Ho(1)),this.modalityChanged=this.modalityDetected.pipe(zu()),t.isBrowser&&i.runOutsideAngular(()=>{r.addEventListener("keydown",this._onKeydown,tr),r.addEventListener("mousedown",this._onMousedown,tr),r.addEventListener("touchstart",this._onTouchstart,tr)})}ngOnDestroy(){this._modality.complete(),this._platform.isBrowser&&(document.removeEventListener("keydown",this._onKeydown,tr),document.removeEventListener("mousedown",this._onMousedown,tr),document.removeEventListener("touchstart",this._onTouchstart,tr))}static{this.\u0275fac=function(i){return new(i||e)(B(kn),B(Le),B(Ee),B(L1,8))}}static{this.\u0275prov=G({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();var rl=function(e){return e[e.IMMEDIATE=0]="IMMEDIATE",e[e.EVENTUAL=1]="EVENTUAL",e}(rl||{}),$1=new Q("cdk-focus-monitor-default-options"),il=er({passive:!0,capture:!0}),z0=(()=>{class e{constructor(t,i,r,o,a){this._ngZone=t,this._platform=i,this._inputModalityDetector=r,this._origin=null,this._windowFocused=!1,this._originFromTouchInteraction=!1,this._elementInfo=new Map,this._monitoredElementCount=0,this._rootNodeFocusListenerCount=new Map,this._windowFocusListener=()=>{this._windowFocused=!0,this._windowFocusTimeoutId=window.setTimeout(()=>this._windowFocused=!1)},this._stopInputModalityDetector=new Se,this._rootNodeFocusAndBlurListener=s=>{let l=Rn(s);for(let c=l;c;c=c.parentElement)s.type==="focus"?this._onFocus(s,c):this._onBlur(s,c)},this._document=o,this._detectionMode=a?.detectionMode||rl.IMMEDIATE}monitor(t,i=!1){let r=si(t);if(!this._platform.isBrowser||r.nodeType!==1)return Y();let o=k0(r)||this._getDocument(),a=this._elementInfo.get(r);if(a)return i&&(a.checkChildren=!0),a.subject;let s={checkChildren:i,subject:new Se,rootNode:o};return this._elementInfo.set(r,s),this._registerGlobalListeners(s),s.subject}stopMonitoring(t){let i=si(t),r=this._elementInfo.get(i);r&&(r.subject.complete(),this._setClasses(i),this._elementInfo.delete(i),this._removeGlobalListeners(r))}focusVia(t,i,r){let o=si(t),a=this._getDocument().activeElement;o===a?this._getClosestElementsInfo(o).forEach(([s,l])=>this._originChanged(s,i,l)):(this._setOrigin(i),typeof o.focus=="function"&&o.focus(r))}ngOnDestroy(){this._elementInfo.forEach((t,i)=>this.stopMonitoring(i))}_getDocument(){return this._document||document}_getWindow(){return this._getDocument().defaultView||window}_getFocusOrigin(t){return this._origin?this._originFromTouchInteraction?this._shouldBeAttributedToTouch(t)?"touch":"program":this._origin:this._windowFocused&&this._lastFocusOrigin?this._lastFocusOrigin:t&&this._isLastInteractionFromInputLabel(t)?"mouse":"program"}_shouldBeAttributedToTouch(t){return this._detectionMode===rl.EVENTUAL||!!t?.contains(this._inputModalityDetector._mostRecentTarget)}_setClasses(t,i){t.classList.toggle("cdk-focused",!!i),t.classList.toggle("cdk-touch-focused",i==="touch"),t.classList.toggle("cdk-keyboard-focused",i==="keyboard"),t.classList.toggle("cdk-mouse-focused",i==="mouse"),t.classList.toggle("cdk-program-focused",i==="program")}_setOrigin(t,i=!1){this._ngZone.runOutsideAngular(()=>{if(this._origin=t,this._originFromTouchInteraction=t==="touch"&&i,this._detectionMode===rl.IMMEDIATE){clearTimeout(this._originTimeoutId);let r=this._originFromTouchInteraction?$0:1;this._originTimeoutId=setTimeout(()=>this._origin=null,r)}})}_onFocus(t,i){let r=this._elementInfo.get(i),o=Rn(t);!r||!r.checkChildren&&i!==o||this._originChanged(i,this._getFocusOrigin(o),r)}_onBlur(t,i){let r=this._elementInfo.get(i);!r||r.checkChildren&&t.relatedTarget instanceof Node&&i.contains(t.relatedTarget)||(this._setClasses(i),this._emitOrigin(r,null))}_emitOrigin(t,i){t.subject.observers.length&&this._ngZone.run(()=>t.subject.next(i))}_registerGlobalListeners(t){if(!this._platform.isBrowser)return;let i=t.rootNode,r=this._rootNodeFocusListenerCount.get(i)||0;r||this._ngZone.runOutsideAngular(()=>{i.addEventListener("focus",this._rootNodeFocusAndBlurListener,il),i.addEventListener("blur",this._rootNodeFocusAndBlurListener,il)}),this._rootNodeFocusListenerCount.set(i,r+1),++this._monitoredElementCount===1&&(this._ngZone.runOutsideAngular(()=>{this._getWindow().addEventListener("focus",this._windowFocusListener)}),this._inputModalityDetector.modalityDetected.pipe(pi(this._stopInputModalityDetector)).subscribe(o=>{this._setOrigin(o,!0)}))}_removeGlobalListeners(t){let i=t.rootNode;if(this._rootNodeFocusListenerCount.has(i)){let r=this._rootNodeFocusListenerCount.get(i);r>1?this._rootNodeFocusListenerCount.set(i,r-1):(i.removeEventListener("focus",this._rootNodeFocusAndBlurListener,il),i.removeEventListener("blur",this._rootNodeFocusAndBlurListener,il),this._rootNodeFocusListenerCount.delete(i))}--this._monitoredElementCount||(this._getWindow().removeEventListener("focus",this._windowFocusListener),this._stopInputModalityDetector.next(),clearTimeout(this._windowFocusTimeoutId),clearTimeout(this._originTimeoutId))}_originChanged(t,i,r){this._setClasses(t,i),this._emitOrigin(r,i),this._lastFocusOrigin=i}_getClosestElementsInfo(t){let i=[];return this._elementInfo.forEach((r,o)=>{(o===t||r.checkChildren&&o.contains(t))&&i.push([o,r])}),i}_isLastInteractionFromInputLabel(t){let{_mostRecentTarget:i,mostRecentModality:r}=this._inputModalityDetector;if(r!=="mouse"||!i||i===t||t.nodeName!=="INPUT"&&t.nodeName!=="TEXTAREA"||t.disabled)return!1;let o=t.labels;if(o){for(let a=0;a<o.length;a++)if(o[a].contains(i))return!0}return!1}static{this.\u0275fac=function(i){return new(i||e)(B(Le),B(kn),B(U1),B(Ee,8),B($1,8))}}static{this.\u0275prov=G({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();var ci=function(e){return e[e.NONE=0]="NONE",e[e.BLACK_ON_WHITE=1]="BLACK_ON_WHITE",e[e.WHITE_ON_BLACK=2]="WHITE_ON_BLACK",e}(ci||{}),j0="cdk-high-contrast-black-on-white",U0="cdk-high-contrast-white-on-black",vu="cdk-high-contrast-active",B0=(()=>{class e{constructor(t,i){this._platform=t,this._document=i,this._breakpointSubscription=$(L0).observe("(forced-colors: active)").subscribe(()=>{this._hasCheckedHighContrastMode&&(this._hasCheckedHighContrastMode=!1,this._applyBodyHighContrastModeCssClasses())})}getHighContrastMode(){if(!this._platform.isBrowser)return ci.NONE;let t=this._document.createElement("div");t.style.backgroundColor="rgb(1,2,3)",t.style.position="absolute",this._document.body.appendChild(t);let i=this._document.defaultView||window,r=i&&i.getComputedStyle?i.getComputedStyle(t):null,o=(r&&r.backgroundColor||"").replace(/ /g,"");switch(t.remove(),o){case"rgb(0,0,0)":case"rgb(45,50,54)":case"rgb(32,32,32)":return ci.WHITE_ON_BLACK;case"rgb(255,255,255)":case"rgb(255,250,239)":return ci.BLACK_ON_WHITE}return ci.NONE}ngOnDestroy(){this._breakpointSubscription.unsubscribe()}_applyBodyHighContrastModeCssClasses(){if(!this._hasCheckedHighContrastMode&&this._platform.isBrowser&&this._document.body){let t=this._document.body.classList;t.remove(vu,j0,U0),this._hasCheckedHighContrastMode=!0;let i=this.getHighContrastMode();i===ci.BLACK_ON_WHITE?t.add(vu,j0):i===ci.WHITE_ON_BLACK&&t.add(vu,U0)}}static{this.\u0275fac=function(i){return new(i||e)(B(kn),B(Ee))}}static{this.\u0275prov=G({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();var wu=(()=>{class e{static{this.\u0275fac=function(i){return new(i||e)}}static{this.\u0275mod=we({type:e})}static{this.\u0275inj=be({})}}return e})();function z1(){return!0}var B1=new Q("mat-sanity-checks",{providedIn:"root",factory:z1}),di=(()=>{class e{constructor(t,i,r){this._sanityChecks=i,this._document=r,this._hasDoneGlobalChecks=!1,t._applyBodyHighContrastModeCssClasses(),this._hasDoneGlobalChecks||(this._hasDoneGlobalChecks=!0)}_checkIsEnabled(t){return R0()?!1:typeof this._sanityChecks=="boolean"?this._sanityChecks:!!this._sanityChecks[t]}static{this.\u0275fac=function(i){return new(i||e)(B(B0),B(B1,8),B(Ee))}}static{this.\u0275mod=we({type:e})}static{this.\u0275inj=be({imports:[wu,wu]})}}return e})();var It=function(e){return e[e.FADING_IN=0]="FADING_IN",e[e.VISIBLE=1]="VISIBLE",e[e.FADING_OUT=2]="FADING_OUT",e[e.HIDDEN=3]="HIDDEN",e}(It||{}),Mu=class{constructor(n,t,i,r=!1){this._renderer=n,this.element=t,this.config=i,this._animationForciblyDisabledThroughCss=r,this.state=It.HIDDEN}fadeOut(){this._renderer.fadeOutRipple(this)}},G0=er({passive:!0,capture:!0}),Eu=class{constructor(){this._events=new Map,this._delegateEventHandler=n=>{let t=Rn(n);t&&this._events.get(n.type)?.forEach((i,r)=>{(r===t||r.contains(t))&&i.forEach(o=>o.handleEvent(n))})}}addHandler(n,t,i,r){let o=this._events.get(t);if(o){let a=o.get(i);a?a.add(r):o.set(i,new Set([r]))}else this._events.set(t,new Map([[i,new Set([r])]])),n.runOutsideAngular(()=>{document.addEventListener(t,this._delegateEventHandler,G0)})}removeHandler(n,t,i){let r=this._events.get(n);if(!r)return;let o=r.get(t);o&&(o.delete(i),o.size===0&&r.delete(t),r.size===0&&(this._events.delete(n),document.removeEventListener(n,this._delegateEventHandler,G0)))}},q0={enterDuration:225,exitDuration:150},H1=800,W0=er({passive:!0,capture:!0}),Y0=["mousedown","touchstart"],X0=["mouseup","mouseleave","touchend","touchcancel"],K0=class e{static{this._eventManager=new Eu}constructor(n,t,i,r){this._target=n,this._ngZone=t,this._platform=r,this._isPointerDown=!1,this._activeRipples=new Map,this._pointerUpEventsRegistered=!1,r.isBrowser&&(this._containerElement=si(i))}fadeInRipple(n,t,i={}){let r=this._containerRect=this._containerRect||this._containerElement.getBoundingClientRect(),o=N(N({},q0),i.animation);i.centered&&(n=r.left+r.width/2,t=r.top+r.height/2);let a=i.radius||G1(n,t,r),s=n-r.left,l=t-r.top,c=o.enterDuration,d=document.createElement("div");d.classList.add("mat-ripple-element"),d.style.left=`${s-a}px`,d.style.top=`${l-a}px`,d.style.height=`${a*2}px`,d.style.width=`${a*2}px`,i.color!=null&&(d.style.backgroundColor=i.color),d.style.transitionDuration=`${c}ms`,this._containerElement.appendChild(d);let u=window.getComputedStyle(d),h=u.transitionProperty,_=u.transitionDuration,x=h==="none"||_==="0s"||_==="0s, 0s"||r.width===0&&r.height===0,C=new Mu(this,d,i,x);d.style.transform="scale3d(1, 1, 1)",C.state=It.FADING_IN,i.persistent||(this._mostRecentTransientRipple=C);let w=null;return!x&&(c||o.exitDuration)&&this._ngZone.runOutsideAngular(()=>{let M=()=>{w&&(w.fallbackTimer=null),clearTimeout(I),this._finishRippleTransition(C)},O=()=>this._destroyRipple(C),I=setTimeout(O,c+100);d.addEventListener("transitionend",M),d.addEventListener("transitioncancel",O),w={onTransitionEnd:M,onTransitionCancel:O,fallbackTimer:I}}),this._activeRipples.set(C,w),(x||!c)&&this._finishRippleTransition(C),C}fadeOutRipple(n){if(n.state===It.FADING_OUT||n.state===It.HIDDEN)return;let t=n.element,i=N(N({},q0),n.config.animation);t.style.transitionDuration=`${i.exitDuration}ms`,t.style.opacity="0",n.state=It.FADING_OUT,(n._animationForciblyDisabledThroughCss||!i.exitDuration)&&this._finishRippleTransition(n)}fadeOutAll(){this._getActiveRipples().forEach(n=>n.fadeOut())}fadeOutAllNonPersistent(){this._getActiveRipples().forEach(n=>{n.config.persistent||n.fadeOut()})}setupTriggerEvents(n){let t=si(n);!this._platform.isBrowser||!t||t===this._triggerElement||(this._removeTriggerEvents(),this._triggerElement=t,Y0.forEach(i=>{e._eventManager.addHandler(this._ngZone,i,t,this)}))}handleEvent(n){n.type==="mousedown"?this._onMousedown(n):n.type==="touchstart"?this._onTouchStart(n):this._onPointerUp(),this._pointerUpEventsRegistered||(this._ngZone.runOutsideAngular(()=>{X0.forEach(t=>{this._triggerElement.addEventListener(t,this,W0)})}),this._pointerUpEventsRegistered=!0)}_finishRippleTransition(n){n.state===It.FADING_IN?this._startFadeOutTransition(n):n.state===It.FADING_OUT&&this._destroyRipple(n)}_startFadeOutTransition(n){let t=n===this._mostRecentTransientRipple,{persistent:i}=n.config;n.state=It.VISIBLE,!i&&(!t||!this._isPointerDown)&&n.fadeOut()}_destroyRipple(n){let t=this._activeRipples.get(n)??null;this._activeRipples.delete(n),this._activeRipples.size||(this._containerRect=null),n===this._mostRecentTransientRipple&&(this._mostRecentTransientRipple=null),n.state=It.HIDDEN,t!==null&&(n.element.removeEventListener("transitionend",t.onTransitionEnd),n.element.removeEventListener("transitioncancel",t.onTransitionCancel),t.fallbackTimer!==null&&clearTimeout(t.fallbackTimer)),n.element.remove()}_onMousedown(n){let t=bu(n),i=this._lastTouchStartEvent&&Date.now()<this._lastTouchStartEvent+H1;!this._target.rippleDisabled&&!t&&!i&&(this._isPointerDown=!0,this.fadeInRipple(n.clientX,n.clientY,this._target.rippleConfig))}_onTouchStart(n){if(!this._target.rippleDisabled&&!Cu(n)){this._lastTouchStartEvent=Date.now(),this._isPointerDown=!0;let t=n.changedTouches;if(t)for(let i=0;i<t.length;i++)this.fadeInRipple(t[i].clientX,t[i].clientY,this._target.rippleConfig)}}_onPointerUp(){this._isPointerDown&&(this._isPointerDown=!1,this._getActiveRipples().forEach(n=>{let t=n.state===It.VISIBLE||n.config.terminateOnPointerUp&&n.state===It.FADING_IN;!n.config.persistent&&t&&n.fadeOut()}))}_getActiveRipples(){return Array.from(this._activeRipples.keys())}_removeTriggerEvents(){let n=this._triggerElement;n&&(Y0.forEach(t=>e._eventManager.removeHandler(t,n,this)),this._pointerUpEventsRegistered&&(X0.forEach(t=>n.removeEventListener(t,this,W0)),this._pointerUpEventsRegistered=!1))}};function G1(e,n,t){let i=Math.max(Math.abs(e-t.left),Math.abs(e-t.right)),r=Math.max(Math.abs(n-t.top),Math.abs(n-t.bottom));return Math.sqrt(i*i+r*r)}var Q0=(()=>{class e{static{this.\u0275fac=function(i){return new(i||e)}}static{this.\u0275mod=we({type:e})}static{this.\u0275inj=be({imports:[di,di]})}}return e})();var q1=["determinateSpinner"];function W1(e,n){if(e&1&&(Tt(),f(0,"svg",11),pe(1,"circle",12),p()),e&2){let t=m();Ge("viewBox",t._viewBox()),g(),gn("stroke-dasharray",t._strokeCircumference(),"px")("stroke-dashoffset",t._strokeCircumference()/2,"px")("stroke-width",t._circleStrokeWidth(),"%"),Ge("r",t._circleRadius())}}var Y1=new Q("mat-progress-spinner-default-options",{providedIn:"root",factory:X1});function X1(){return{diameter:Z0}}var Z0=100,K1=10,J0=(()=>{class e{get color(){return this._color||this._defaultColor}set color(t){this._color=t}constructor(t,i,r){this._elementRef=t,this._defaultColor="primary",this._value=0,this._diameter=Z0,this._noopAnimations=i==="NoopAnimations"&&!!r&&!r._forceAnimations,this.mode=t.nativeElement.nodeName.toLowerCase()==="mat-spinner"?"indeterminate":"determinate",r&&(r.color&&(this.color=this._defaultColor=r.color),r.diameter&&(this.diameter=r.diameter),r.strokeWidth&&(this.strokeWidth=r.strokeWidth))}get value(){return this.mode==="determinate"?this._value:0}set value(t){this._value=Math.max(0,Math.min(100,t||0))}get diameter(){return this._diameter}set diameter(t){this._diameter=t||0}get strokeWidth(){return this._strokeWidth??this.diameter/10}set strokeWidth(t){this._strokeWidth=t||0}_circleRadius(){return(this.diameter-K1)/2}_viewBox(){let t=this._circleRadius()*2+this.strokeWidth;return`0 0 ${t} ${t}`}_strokeCircumference(){return 2*Math.PI*this._circleRadius()}_strokeDashOffset(){return this.mode==="determinate"?this._strokeCircumference()*(100-this._value)/100:null}_circleStrokeWidth(){return this.strokeWidth/this.diameter*100}static{this.\u0275fac=function(i){return new(i||e)(V(De),V(mn,8),V(Y1))}}static{this.\u0275cmp=Ce({type:e,selectors:[["mat-progress-spinner"],["mat-spinner"]],viewQuery:function(i,r){if(i&1&&en(q1,5),i&2){let o;bt(o=Ct())&&(r._determinateCircle=o.first)}},hostAttrs:["role","progressbar","tabindex","-1",1,"mat-mdc-progress-spinner","mdc-circular-progress"],hostVars:18,hostBindings:function(i,r){i&2&&(Ge("aria-valuemin",0)("aria-valuemax",100)("aria-valuenow",r.mode==="determinate"?r.value:null)("mode",r.mode),Dl("mat-"+r.color),gn("width",r.diameter,"px")("height",r.diameter,"px")("--mdc-circular-progress-size",r.diameter+"px")("--mdc-circular-progress-active-indicator-width",r.diameter+"px"),xt("_mat-animation-noopable",r._noopAnimations)("mdc-circular-progress--indeterminate",r.mode==="indeterminate"))},inputs:{color:"color",mode:"mode",value:[2,"value","value",gi],diameter:[2,"diameter","diameter",gi],strokeWidth:[2,"strokeWidth","strokeWidth",gi]},exportAs:["matProgressSpinner"],standalone:!0,features:[ct,Me],decls:14,vars:11,consts:[["circle",""],["determinateSpinner",""],["aria-hidden","true",1,"mdc-circular-progress__determinate-container"],["xmlns","http://www.w3.org/2000/svg","focusable","false",1,"mdc-circular-progress__determinate-circle-graphic"],["cx","50%","cy","50%",1,"mdc-circular-progress__determinate-circle"],["aria-hidden","true",1,"mdc-circular-progress__indeterminate-container"],[1,"mdc-circular-progress__spinner-layer"],[1,"mdc-circular-progress__circle-clipper","mdc-circular-progress__circle-left"],[3,"ngTemplateOutlet"],[1,"mdc-circular-progress__gap-patch"],[1,"mdc-circular-progress__circle-clipper","mdc-circular-progress__circle-right"],["xmlns","http://www.w3.org/2000/svg","focusable","false",1,"mdc-circular-progress__indeterminate-circle-graphic"],["cx","50%","cy","50%"]],template:function(i,r){if(i&1&&(P(0,W1,2,8,"ng-template",null,0,ut),f(2,"div",2,1),Tt(),f(4,"svg",3),pe(5,"circle",4),p()(),jn(),f(6,"div",5)(7,"div",6)(8,"div",7),Ko(9,8),p(),f(10,"div",9),Ko(11,8),p(),f(12,"div",10),Ko(13,8),p()()()),i&2){let o=rt(1);g(4),Ge("viewBox",r._viewBox()),g(),gn("stroke-dasharray",r._strokeCircumference(),"px")("stroke-dashoffset",r._strokeDashOffset(),"px")("stroke-width",r._circleStrokeWidth(),"%"),Ge("r",r._circleRadius()),g(4),y("ngTemplateOutlet",o),g(2),y("ngTemplateOutlet",o),g(2),y("ngTemplateOutlet",o)}},dependencies:[pp],styles:[".mat-mdc-progress-spinner{display:block;overflow:hidden;line-height:0;position:relative;direction:ltr;transition:opacity 250ms cubic-bezier(0.4, 0, 0.6, 1)}.mat-mdc-progress-spinner circle{stroke-width:var(--mdc-circular-progress-active-indicator-width)}.mat-mdc-progress-spinner._mat-animation-noopable,.mat-mdc-progress-spinner._mat-animation-noopable .mdc-circular-progress__determinate-circle{transition:none !important}.mat-mdc-progress-spinner._mat-animation-noopable .mdc-circular-progress__indeterminate-circle-graphic,.mat-mdc-progress-spinner._mat-animation-noopable .mdc-circular-progress__spinner-layer,.mat-mdc-progress-spinner._mat-animation-noopable .mdc-circular-progress__indeterminate-container{animation:none !important}.mat-mdc-progress-spinner._mat-animation-noopable .mdc-circular-progress__indeterminate-container circle{stroke-dasharray:0 !important}.cdk-high-contrast-active .mat-mdc-progress-spinner .mdc-circular-progress__indeterminate-circle-graphic,.cdk-high-contrast-active .mat-mdc-progress-spinner .mdc-circular-progress__determinate-circle{stroke:currentColor;stroke:CanvasText}.mdc-circular-progress__determinate-container,.mdc-circular-progress__indeterminate-circle-graphic,.mdc-circular-progress__indeterminate-container,.mdc-circular-progress__spinner-layer{position:absolute;width:100%;height:100%}.mdc-circular-progress__determinate-container{transform:rotate(-90deg)}.mdc-circular-progress--indeterminate .mdc-circular-progress__determinate-container{opacity:0}.mdc-circular-progress__indeterminate-container{font-size:0;letter-spacing:0;white-space:nowrap;opacity:0}.mdc-circular-progress--indeterminate .mdc-circular-progress__indeterminate-container{opacity:1;animation:mdc-circular-progress-container-rotate 1568.2352941176ms linear infinite}.mdc-circular-progress__determinate-circle-graphic,.mdc-circular-progress__indeterminate-circle-graphic{fill:rgba(0,0,0,0)}.mat-mdc-progress-spinner .mdc-circular-progress__determinate-circle,.mat-mdc-progress-spinner .mdc-circular-progress__indeterminate-circle-graphic{stroke:var(--mdc-circular-progress-active-indicator-color, var(--mat-app-primary))}.cdk-high-contrast-active .mat-mdc-progress-spinner .mdc-circular-progress__determinate-circle,.cdk-high-contrast-active .mat-mdc-progress-spinner .mdc-circular-progress__indeterminate-circle-graphic{stroke:CanvasText}.mdc-circular-progress__determinate-circle{transition:stroke-dashoffset 500ms cubic-bezier(0, 0, 0.2, 1)}.mdc-circular-progress__gap-patch{position:absolute;top:0;left:47.5%;box-sizing:border-box;width:5%;height:100%;overflow:hidden}.mdc-circular-progress__gap-patch .mdc-circular-progress__indeterminate-circle-graphic{left:-900%;width:2000%;transform:rotate(180deg)}.mdc-circular-progress__circle-clipper .mdc-circular-progress__indeterminate-circle-graphic{width:200%}.mdc-circular-progress__circle-right .mdc-circular-progress__indeterminate-circle-graphic{left:-100%}.mdc-circular-progress--indeterminate .mdc-circular-progress__circle-left .mdc-circular-progress__indeterminate-circle-graphic{animation:mdc-circular-progress-left-spin 1333ms cubic-bezier(0.4, 0, 0.2, 1) infinite both}.mdc-circular-progress--indeterminate .mdc-circular-progress__circle-right .mdc-circular-progress__indeterminate-circle-graphic{animation:mdc-circular-progress-right-spin 1333ms cubic-bezier(0.4, 0, 0.2, 1) infinite both}.mdc-circular-progress__circle-clipper{display:inline-flex;position:relative;width:50%;height:100%;overflow:hidden}.mdc-circular-progress--indeterminate .mdc-circular-progress__spinner-layer{animation:mdc-circular-progress-spinner-layer-rotate 5332ms cubic-bezier(0.4, 0, 0.2, 1) infinite both}@keyframes mdc-circular-progress-container-rotate{to{transform:rotate(360deg)}}@keyframes mdc-circular-progress-spinner-layer-rotate{12.5%{transform:rotate(135deg)}25%{transform:rotate(270deg)}37.5%{transform:rotate(405deg)}50%{transform:rotate(540deg)}62.5%{transform:rotate(675deg)}75%{transform:rotate(810deg)}87.5%{transform:rotate(945deg)}100%{transform:rotate(1080deg)}}@keyframes mdc-circular-progress-left-spin{from{transform:rotate(265deg)}50%{transform:rotate(130deg)}to{transform:rotate(265deg)}}@keyframes mdc-circular-progress-right-spin{from{transform:rotate(-265deg)}50%{transform:rotate(-130deg)}to{transform:rotate(-265deg)}}"],encapsulation:2,changeDetection:0})}}return e})();var e_=(()=>{class e{static{this.\u0275fac=function(i){return new(i||e)}}static{this.\u0275mod=we({type:e})}static{this.\u0275inj=be({imports:[Xe,di]})}}return e})();var al=class e{constructor(n){this.elRef=n}countryData={};countryClicked=new te;setDragForGeoPanel=new te;svg;projection;path;width=300;height=300;sensitivity=.25;rotateSpeed=.2;zoomLevel=1;autoRotateTimer;colorScale;tooltip;ngOnInit(){this.createInteractiveGlobe()}ngOnChanges(n){n.countryData&&this.svg&&this.updateGlobe()}createInteractiveGlobe(){let n=ce(this.elRef.nativeElement).select(".map-container");n.on("mouseover",()=>{this.setDragForGeoPanel.emit(!1)}),n.on("mouseout",()=>{this.setDragForGeoPanel.emit(!0)}),this.projection=eu().scale(130).translate([this.width/2,this.height/2]).rotate([0,0,0]).clipAngle(90),this.path=Wd().projection(this.projection),this.svg=ce(this.elRef.nativeElement).select(".map-container").append("svg").attr("width",this.width).attr("height",this.height),this.colorScale=Fo(su).domain([0,100]),this.svg.append("circle").attr("cx",this.width/2).attr("cy",this.height/2).attr("r",this.projection.scale()).attr("fill","#dcecff"),this.tooltip=ce("body").append("div").attr("class","tooltip").style("position","absolute").style("visibility","hidden").style("background","rgba(0, 0, 0, 0.8)").style("color","white").style("padding","5px 10px").style("border-radius","5px").style("font-size","12px").style("pointer-events","none").style("z-index","99999").style("top","0px").style("left","0px"),yd("https://raw.githubusercontent.com/holtzy/D3-graph-gallery/master/DATA/world.geojson").then(t=>{this.drawGlobe(t),this.addMouseInteraction(),this.startAutoRotate()}).catch(t=>console.error("Error loading GeoJSON:",t))}drawGlobe(n){this.svg.selectAll("path").remove(),this.svg.append("g").selectAll("path").data(n.features).enter().append("path").attr("d",t=>this.path(t)).attr("fill",t=>this.getCountryColor(t.properties.name)).attr("stroke","black").attr("stroke-width",.3).on("mouseover",(t,i)=>this.handleMouseOver(t,i)).on("mousemove",t=>this.handleMouseMove(t)).on("mouseout",()=>this.handleMouseOut()).on("click",(t,i)=>this.handleCountryClick(i.properties.name))}handleCountryClick(n){this.countryClicked.emit(n)}getCountryColor(n){let t=this.countryData[n]||0;return this.colorScale(t)}updateCountryData(n){this.countryData=n,this.colorScale.domain([0,Ke(Object.values(n))||100]),this.updateGlobe()}startAutoRotate(){let n=this.projection.rotate();this.autoRotateTimer=$i(()=>{n[0]+=this.rotateSpeed,this.projection.rotate(n),this.updateGlobe()})}stopAutoRotate(){this.autoRotateTimer&&this.autoRotateTimer.stop()}addMouseInteraction(){let n=this.projection.rotate(),t=null,i=document.querySelector(".ktd-grid");this.svg.on("mouseover",()=>{this.stopAutoRotate(),i&&i.classList.add("disable-grid-drag")}).on("mouseout",()=>{this.startAutoRotate(),i&&i.classList.remove("disable-grid-drag")}),this.svg.call(od().on("start",r=>{t=[r.x,r.y],r.sourceEvent.stopPropagation()}).on("drag",r=>{if(!t)return;let o=r.x-t[0],a=r.y-t[1];n[0]+=o*this.sensitivity,n[1]-=a*this.sensitivity,n[1]=Math.max(-90,Math.min(90,n[1])),this.projection.rotate(n),this.updateGlobe(),t=[r.x,r.y],r.sourceEvent.stopPropagation()}).on("end",()=>{t=null}))}updateGlobe(){this.svg.selectAll("path").attr("d",n=>this.path(n)).attr("fill",n=>this.getCountryColor(n.properties.name))}handleMouseOver(n,t){let i=t.properties.name,r=this.countryData[i]||0;ce(n.currentTarget).style("cursor","pointer"),this.tooltip.html(`<strong>${i}</strong>: ${r}`).style("visibility","visible"),ce(n.currentTarget).attr("stroke","black").attr("stroke-width",1.5)}handleMouseMove(n){this.tooltip.style("top",`${n.pageY+10}px`).style("left",`${n.pageX+10}px`)}handleMouseOut(){this.tooltip.style("visibility","hidden"),this.svg.selectAll("path").attr("stroke","black").attr("stroke-width",.3)}static \u0275fac=function(t){return new(t||e)(V(De))};static \u0275cmp=Ce({type:e,selectors:[["app-globe"]],inputs:{countryData:"countryData"},outputs:{countryClicked:"countryClicked",setDragForGeoPanel:"setDragForGeoPanel"},standalone:!0,features:[Ae,Me],decls:1,vars:0,consts:[[1,"map-container"]],template:function(t,i){t&1&&pe(0,"div",0)},styles:[".map-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;margin:20px auto;border:1px solid #ddd;border-radius:50%;background-color:#f0f8ff;width:300px;height:300px;overflow:visible!important;cursor:grab;pointer-events:auto!important;touch-action:none;z-index:10}.map-container[_ngcontent-%COMP%]:active{cursor:grabbing}.disable-grid-drag[_ngcontent-%COMP%]   .ktd-grid-item[_ngcontent-%COMP%]{pointer-events:none!important;touch-action:none!important}.tooltip[_ngcontent-%COMP%]{position:fixed;visibility:hidden;background:#000c;color:#fff;padding:5px 10px;border-radius:5px;font-size:12px;pointer-events:none;z-index:9999!important}"]})};var Zt=class e{constructor(n){this.http=n}apiUrl="http://localhost:5000";streamResponse(n,t,i,r=""){let o={query:n,papers:t,patient_data:i,response_id:r};return this.http.post(`${this.apiUrl}/stream_response`,o,{responseType:"text",reportProgress:!0,observe:"events"}).pipe(J(a=>{if(a.type===Ht.DownloadProgress){let s=a;if(s.partialText){let c=s.partialText.match(/data: ({.*?})\n\n/g);if(c&&c.length>0)try{let u=c[c.length-1].replace("data: ","").trim();return JSON.parse(u).text||""}catch(d){return console.error("Error parsing SSE data:",d),""}}}return a}))}static \u0275fac=function(t){return new(t||e)(B(kt))};static \u0275prov=G({token:e,factory:e.\u0275fac,providedIn:"root"})};var nr=class e{constructor(n){this.http=n}apiUrl=Ya.apiUrl;submitSearch(n){return this.http.post(`${this.apiUrl}/api/answer`,n)}getDatabaseContents(){return this.http.get(`${this.apiUrl}/api/view_database`)}viewPaper(n,t){return this.http.post(`${this.apiUrl}/api/paper/${n}`,t)}streamResponse(n){let t=new ot({"Content-Type":"application/json"});return Y({})}updateDocumentMetadata(n,t){return this.http.put(`${this.apiUrl}/api/document/${n}/metadata`,{metadata:t})}addMetadataField(n,t=null){return this.http.post(`${this.apiUrl}/api/metadata/add-field`,{field:n,defaultValue:t})}batchUpdateMetadata(n){return this.http.put(`${this.apiUrl}/api/metadata/batch-update`,{updates:n})}uploadCsvMetadata(n){let t=new FormData;return t.append("file",n),this.http.post(`${this.apiUrl}/api/metadata/import-csv`,t)}exportMetadataCsv(){window.location.href=`${this.apiUrl}/api/metadata/export`}getPapersFromChromaDB(n){let t={query:n};return this.http.post(`${this.apiUrl}/api/answer`,t)}static \u0275fac=function(t){return new(t||e)(B(kt))};static \u0275prov=G({token:e,factory:e.\u0275fac,providedIn:"root"})};var sl=(()=>{class e{constructor(){this._listeners=[]}notify(t,i){for(let r of this._listeners)r(t,i)}listen(t){return this._listeners.push(t),()=>{this._listeners=this._listeners.filter(i=>t!==i)}}ngOnDestroy(){this._listeners=[]}static{this.\u0275fac=function(i){return new(i||e)}}static{this.\u0275prov=G({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();var J1=0,Su=new Q("CdkAccordion"),i_=(()=>{class e{constructor(){this._stateChanges=new Se,this._openCloseAllActions=new Se,this.id=`cdk-accordion-${J1++}`,this.multi=!1}openAll(){this.multi&&this._openCloseAllActions.next(!0)}closeAll(){this._openCloseAllActions.next(!1)}ngOnChanges(t){this._stateChanges.next(t)}ngOnDestroy(){this._stateChanges.complete(),this._openCloseAllActions.complete()}static{this.\u0275fac=function(i){return new(i||e)}}static{this.\u0275dir=se({type:e,selectors:[["cdk-accordion"],["","cdkAccordion",""]],inputs:{multi:[2,"multi","multi",wt]},exportAs:["cdkAccordion"],standalone:!0,features:[Ie([{provide:Su,useExisting:e}]),ct,Ae]})}}return e})(),eM=0,r_=(()=>{class e{get expanded(){return this._expanded}set expanded(t){if(this._expanded!==t){if(this._expanded=t,this.expandedChange.emit(t),t){this.opened.emit();let i=this.accordion?this.accordion.id:this.id;this._expansionDispatcher.notify(this.id,i)}else this.closed.emit();this._changeDetectorRef.markForCheck()}}constructor(t,i,r){this.accordion=t,this._changeDetectorRef=i,this._expansionDispatcher=r,this._openCloseAllSubscription=pn.EMPTY,this.closed=new te,this.opened=new te,this.destroyed=new te,this.expandedChange=new te,this.id=`cdk-accordion-child-${eM++}`,this._expanded=!1,this.disabled=!1,this._removeUniqueSelectionListener=()=>{},this._removeUniqueSelectionListener=r.listen((o,a)=>{this.accordion&&!this.accordion.multi&&this.accordion.id===a&&this.id!==o&&(this.expanded=!1)}),this.accordion&&(this._openCloseAllSubscription=this._subscribeToOpenCloseAllActions())}ngOnDestroy(){this.opened.complete(),this.closed.complete(),this.destroyed.emit(),this.destroyed.complete(),this._removeUniqueSelectionListener(),this._openCloseAllSubscription.unsubscribe()}toggle(){this.disabled||(this.expanded=!this.expanded)}close(){this.disabled||(this.expanded=!1)}open(){this.disabled||(this.expanded=!0)}_subscribeToOpenCloseAllActions(){return this.accordion._openCloseAllActions.subscribe(t=>{this.disabled||(this.expanded=t)})}static{this.\u0275fac=function(i){return new(i||e)(V(Su,12),V(Pt),V(sl))}}static{this.\u0275dir=se({type:e,selectors:[["cdk-accordion-item"],["","cdkAccordionItem",""]],inputs:{expanded:[2,"expanded","expanded",wt],disabled:[2,"disabled","disabled",wt]},outputs:{closed:"closed",opened:"opened",destroyed:"destroyed",expandedChange:"expandedChange"},exportAs:["cdkAccordionItem"],standalone:!0,features:[Ie([{provide:Su,useValue:void 0}]),ct]})}}return e})(),o_=(()=>{class e{static{this.\u0275fac=function(i){return new(i||e)}}static{this.\u0275mod=we({type:e})}static{this.\u0275inj=be({})}}return e})();var jo=class{attach(n){return this._attachedHost=n,n.attach(this)}detach(){let n=this._attachedHost;n!=null&&(this._attachedHost=null,n.detach())}get isAttached(){return this._attachedHost!=null}setAttachedHost(n){this._attachedHost=n}},Iu=class extends jo{constructor(n,t,i,r,o){super(),this.component=n,this.viewContainerRef=t,this.injector=i,this.componentFactoryResolver=r,this.projectableNodes=o}},Uo=class extends jo{constructor(n,t,i,r){super(),this.templateRef=n,this.viewContainerRef=t,this.context=i,this.injector=r}get origin(){return this.templateRef.elementRef}attach(n,t=this.context){return this.context=t,super.attach(n)}detach(){return this.context=void 0,super.detach()}},Du=class extends jo{constructor(n){super(),this.element=n instanceof De?n.nativeElement:n}},Ou=class{constructor(){this._isDisposed=!1,this.attachDomPortal=null}hasAttached(){return!!this._attachedPortal}attach(n){if(n instanceof Iu)return this._attachedPortal=n,this.attachComponentPortal(n);if(n instanceof Uo)return this._attachedPortal=n,this.attachTemplatePortal(n);if(this.attachDomPortal&&n instanceof Du)return this._attachedPortal=n,this.attachDomPortal(n)}detach(){this._attachedPortal&&(this._attachedPortal.setAttachedHost(null),this._attachedPortal=null),this._invokeDisposeFn()}dispose(){this.hasAttached()&&this.detach(),this._invokeDisposeFn(),this._isDisposed=!0}setDisposeFn(n){this._disposeFn=n}_invokeDisposeFn(){this._disposeFn&&(this._disposeFn(),this._disposeFn=null)}};var a_=(()=>{class e extends Ou{constructor(t,i,r){super(),this._componentFactoryResolver=t,this._viewContainerRef=i,this._isInitialized=!1,this.attached=new te,this.attachDomPortal=o=>{this._document;let a=o.element;a.parentNode;let s=this._document.createComment("dom-portal");o.setAttachedHost(this),a.parentNode.insertBefore(s,a),this._getRootNode().appendChild(a),this._attachedPortal=o,super.setDisposeFn(()=>{s.parentNode&&s.parentNode.replaceChild(a,s)})},this._document=r}get portal(){return this._attachedPortal}set portal(t){this.hasAttached()&&!t&&!this._isInitialized||(this.hasAttached()&&super.detach(),t&&super.attach(t),this._attachedPortal=t||null)}get attachedRef(){return this._attachedRef}ngOnInit(){this._isInitialized=!0}ngOnDestroy(){super.dispose(),this._attachedRef=this._attachedPortal=null}attachComponentPortal(t){t.setAttachedHost(this);let i=t.viewContainerRef!=null?t.viewContainerRef:this._viewContainerRef,o=(t.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(t.component),a=i.createComponent(o,i.length,t.injector||i.injector,t.projectableNodes||void 0);return i!==this._viewContainerRef&&this._getRootNode().appendChild(a.hostView.rootNodes[0]),super.setDisposeFn(()=>a.destroy()),this._attachedPortal=t,this._attachedRef=a,this.attached.emit(a),a}attachTemplatePortal(t){t.setAttachedHost(this);let i=this._viewContainerRef.createEmbeddedView(t.templateRef,t.context,{injector:t.injector});return super.setDisposeFn(()=>this._viewContainerRef.clear()),this._attachedPortal=t,this._attachedRef=i,this.attached.emit(i),i}_getRootNode(){let t=this._viewContainerRef.element.nativeElement;return t.nodeType===t.ELEMENT_NODE?t:t.parentNode}static{this.\u0275fac=function(i){return new(i||e)(V(Qu),V(mi),V(Ee))}}static{this.\u0275dir=se({type:e,selectors:[["","cdkPortalOutlet",""]],inputs:{portal:[0,"cdkPortalOutlet","portal"]},outputs:{attached:"attached"},exportAs:["cdkPortalOutlet"],standalone:!0,features:[Fe]})}}return e})();var s_=(()=>{class e{static{this.\u0275fac=function(i){return new(i||e)}}static{this.\u0275mod=we({type:e})}static{this.\u0275inj=be({})}}return e})();var iM=["body"],rM=[[["mat-expansion-panel-header"]],"*",[["mat-action-row"]]],oM=["mat-expansion-panel-header","*","mat-action-row"];function aM(e,n){}var sM=[[["mat-panel-title"]],[["mat-panel-description"]],"*"],lM=["mat-panel-title","mat-panel-description","*"];function cM(e,n){if(e&1&&(f(0,"span",1),Tt(),f(1,"svg",2),pe(2,"path",3),p()()),e&2){let t=m();y("@indicatorRotate",t._getExpandedState())}}var Au=new Q("MAT_ACCORDION"),l_="225ms cubic-bezier(0.4,0.0,0.2,1)",d_={indicatorRotate:Tl("indicatorRotate",[gr("collapsed, void",mr({transform:"rotate(0deg)"})),gr("expanded",mr({transform:"rotate(180deg)"})),kl("expanded <=> collapsed, void => collapsed",Pl(l_))]),bodyExpansion:Tl("bodyExpansion",[gr("collapsed, void",mr({height:"0px",visibility:"hidden"})),gr("expanded",mr({height:"*",visibility:""})),kl("expanded <=> collapsed, void => collapsed",Pl(l_))])},u_=new Q("MAT_EXPANSION_PANEL"),dM=(()=>{class e{constructor(t,i){this._template=t,this._expansionPanel=i}static{this.\u0275fac=function(i){return new(i||e)(V(Sl),V(u_,8))}}static{this.\u0275dir=se({type:e,selectors:[["ng-template","matExpansionPanelContent",""]],standalone:!0})}}return e})(),uM=0,p_=new Q("MAT_EXPANSION_PANEL_DEFAULT_OPTIONS"),Tu=(()=>{class e extends r_{get hideToggle(){return this._hideToggle||this.accordion&&this.accordion.hideToggle}set hideToggle(t){this._hideToggle=t}get togglePosition(){return this._togglePosition||this.accordion&&this.accordion.togglePosition}set togglePosition(t){this._togglePosition=t}constructor(t,i,r,o,a,s,l){super(t,i,r),this._viewContainerRef=o,this._animationMode=s,this._hideToggle=!1,this.afterExpand=new te,this.afterCollapse=new te,this._inputChanges=new Se,this._headerId=`mat-expansion-panel-header-${uM++}`,this.accordion=t,this._document=a,this._animationsDisabled=s==="NoopAnimations",l&&(this.hideToggle=l.hideToggle)}_hasSpacing(){return this.accordion?this.expanded&&this.accordion.displayMode==="default":!1}_getExpandedState(){return this.expanded?"expanded":"collapsed"}toggle(){this.expanded=!this.expanded}close(){this.expanded=!1}open(){this.expanded=!0}ngAfterContentInit(){this._lazyContent&&this._lazyContent._expansionPanel===this&&this.opened.pipe(Ln(null),Ye(()=>this.expanded&&!this._portal),Ot(1)).subscribe(()=>{this._portal=new Uo(this._lazyContent._template,this._viewContainerRef)})}ngOnChanges(t){this._inputChanges.next(t)}ngOnDestroy(){super.ngOnDestroy(),this._inputChanges.complete()}_containsFocus(){if(this._body){let t=this._document.activeElement,i=this._body.nativeElement;return t===i||i.contains(t)}return!1}_animationStarted(t){!c_(t)&&!this._animationsDisabled&&this._body&&this._body?.nativeElement.setAttribute("inert","")}_animationDone(t){c_(t)||(t.toState==="expanded"?this.afterExpand.emit():t.toState==="collapsed"&&this.afterCollapse.emit(),!this._animationsDisabled&&this._body&&this._body.nativeElement.removeAttribute("inert"))}static{this.\u0275fac=function(i){return new(i||e)(V(Au,12),V(Pt),V(sl),V(mi),V(Ee),V(mn,8),V(p_,8))}}static{this.\u0275cmp=Ce({type:e,selectors:[["mat-expansion-panel"]],contentQueries:function(i,r,o){if(i&1&&Qo(o,dM,5),i&2){let a;bt(a=Ct())&&(r._lazyContent=a.first)}},viewQuery:function(i,r){if(i&1&&en(iM,5),i&2){let o;bt(o=Ct())&&(r._body=o.first)}},hostAttrs:[1,"mat-expansion-panel"],hostVars:6,hostBindings:function(i,r){i&2&&xt("mat-expanded",r.expanded)("_mat-animation-noopable",r._animationsDisabled)("mat-expansion-panel-spacing",r._hasSpacing())},inputs:{hideToggle:[2,"hideToggle","hideToggle",wt],togglePosition:"togglePosition"},outputs:{afterExpand:"afterExpand",afterCollapse:"afterCollapse"},exportAs:["matExpansionPanel"],standalone:!0,features:[Ie([{provide:Au,useValue:void 0},{provide:u_,useExisting:e}]),ct,Fe,Ae,Me],ngContentSelectors:oM,decls:7,vars:4,consts:[["body",""],["role","region",1,"mat-expansion-panel-content",3,"id"],[1,"mat-expansion-panel-body"],[3,"cdkPortalOutlet"]],template:function(i,r){if(i&1){let o=U();ur(rM),Jt(0),f(1,"div",1,0),k("@bodyExpansion.start",function(s){return E(o),S(r._animationStarted(s))})("@bodyExpansion.done",function(s){return E(o),S(r._animationDone(s))}),f(3,"div",2),Jt(4,1),P(5,aM,0,0,"ng-template",3),p(),Jt(6,2),p()}i&2&&(g(),y("@bodyExpansion",r._getExpandedState())("id",r.id),Ge("aria-labelledby",r._headerId),g(4),y("cdkPortalOutlet",r._portal))},dependencies:[a_],styles:['.mat-expansion-panel{box-sizing:content-box;display:block;margin:0;overflow:hidden;transition:margin 225ms cubic-bezier(0.4, 0, 0.2, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);position:relative;background:var(--mat-expansion-container-background-color, var(--mat-app-surface));color:var(--mat-expansion-container-text-color, var(--mat-app-on-surface));border-radius:var(--mat-expansion-container-shape)}.mat-expansion-panel:not([class*=mat-elevation-z]){box-shadow:0px 3px 1px -2px rgba(0, 0, 0, 0.2), 0px 2px 2px 0px rgba(0, 0, 0, 0.14), 0px 1px 5px 0px rgba(0, 0, 0, 0.12)}.mat-accordion .mat-expansion-panel:not(.mat-expanded),.mat-accordion .mat-expansion-panel:not(.mat-expansion-panel-spacing){border-radius:0}.mat-accordion .mat-expansion-panel:first-of-type{border-top-right-radius:var(--mat-expansion-container-shape);border-top-left-radius:var(--mat-expansion-container-shape)}.mat-accordion .mat-expansion-panel:last-of-type{border-bottom-right-radius:var(--mat-expansion-container-shape);border-bottom-left-radius:var(--mat-expansion-container-shape)}.cdk-high-contrast-active .mat-expansion-panel{outline:solid 1px}.mat-expansion-panel.ng-animate-disabled,.ng-animate-disabled .mat-expansion-panel,.mat-expansion-panel._mat-animation-noopable{transition:none}.mat-expansion-panel-content{display:flex;flex-direction:column;overflow:visible;font-family:var(--mat-expansion-container-text-font, var(--mat-app-body-large-font));font-size:var(--mat-expansion-container-text-size, var(--mat-app-body-large-size));font-weight:var(--mat-expansion-container-text-weight, var(--mat-app-body-large-weight));line-height:var(--mat-expansion-container-text-line-height, var(--mat-app-body-large-line-height));letter-spacing:var(--mat-expansion-container-text-tracking, var(--mat-app-body-large-tracking))}.mat-expansion-panel-content[style*="visibility: hidden"] *{visibility:hidden !important}.mat-expansion-panel-body{padding:0 24px 16px}.mat-expansion-panel-spacing{margin:16px 0}.mat-accordion>.mat-expansion-panel-spacing:first-child,.mat-accordion>*:first-child:not(.mat-expansion-panel) .mat-expansion-panel-spacing{margin-top:0}.mat-accordion>.mat-expansion-panel-spacing:last-child,.mat-accordion>*:last-child:not(.mat-expansion-panel) .mat-expansion-panel-spacing{margin-bottom:0}.mat-action-row{border-top-style:solid;border-top-width:1px;display:flex;flex-direction:row;justify-content:flex-end;padding:16px 8px 16px 24px;border-top-color:var(--mat-expansion-actions-divider-color, var(--mat-app-outline))}.mat-action-row .mat-button-base,.mat-action-row .mat-mdc-button-base{margin-left:8px}[dir=rtl] .mat-action-row .mat-button-base,[dir=rtl] .mat-action-row .mat-mdc-button-base{margin-left:0;margin-right:8px}'],encapsulation:2,data:{animation:[d_.bodyExpansion]},changeDetection:0})}}return e})();function c_(e){return e.fromState==="void"}var Pu=(()=>{class e{constructor(t,i,r,o,a,s,l){this.panel=t,this._element=i,this._focusMonitor=r,this._changeDetectorRef=o,this._animationMode=s,this._parentChangeSubscription=pn.EMPTY,this.tabIndex=0;let c=t.accordion?t.accordion._stateChanges.pipe(Ye(d=>!!(d.hideToggle||d.togglePosition))):Ut;this.tabIndex=parseInt(l||"")||0,this._parentChangeSubscription=Uu(t.opened,t.closed,c,t._inputChanges.pipe(Ye(d=>!!(d.hideToggle||d.disabled||d.togglePosition)))).subscribe(()=>this._changeDetectorRef.markForCheck()),t.closed.pipe(Ye(()=>t._containsFocus())).subscribe(()=>r.focusVia(i,"program")),a&&(this.expandedHeight=a.expandedHeight,this.collapsedHeight=a.collapsedHeight)}get disabled(){return this.panel.disabled}_toggle(){this.disabled||this.panel.toggle()}_isExpanded(){return this.panel.expanded}_getExpandedState(){return this.panel._getExpandedState()}_getPanelId(){return this.panel.id}_getTogglePosition(){return this.panel.togglePosition}_showToggle(){return!this.panel.hideToggle&&!this.panel.disabled}_getHeaderHeight(){let t=this._isExpanded();return t&&this.expandedHeight?this.expandedHeight:!t&&this.collapsedHeight?this.collapsedHeight:null}_keydown(t){switch(t.keyCode){case 32:case 13:nl(t)||(t.preventDefault(),this._toggle());break;default:this.panel.accordion&&this.panel.accordion._handleHeaderKeydown(t);return}}focus(t,i){t?this._focusMonitor.focusVia(this._element,t,i):this._element.nativeElement.focus(i)}ngAfterViewInit(){this._focusMonitor.monitor(this._element).subscribe(t=>{t&&this.panel.accordion&&this.panel.accordion._handleHeaderFocus(this)})}ngOnDestroy(){this._parentChangeSubscription.unsubscribe(),this._focusMonitor.stopMonitoring(this._element)}static{this.\u0275fac=function(i){return new(i||e)(V(Tu,1),V(De),V(z0),V(Pt),V(p_,8),V(mn,8),Go("tabindex"))}}static{this.\u0275cmp=Ce({type:e,selectors:[["mat-expansion-panel-header"]],hostAttrs:["role","button",1,"mat-expansion-panel-header","mat-focus-indicator"],hostVars:15,hostBindings:function(i,r){i&1&&k("click",function(){return r._toggle()})("keydown",function(a){return r._keydown(a)}),i&2&&(Ge("id",r.panel._headerId)("tabindex",r.disabled?-1:r.tabIndex)("aria-controls",r._getPanelId())("aria-expanded",r._isExpanded())("aria-disabled",r.panel.disabled),gn("height",r._getHeaderHeight()),xt("mat-expanded",r._isExpanded())("mat-expansion-toggle-indicator-after",r._getTogglePosition()==="after")("mat-expansion-toggle-indicator-before",r._getTogglePosition()==="before")("_mat-animation-noopable",r._animationMode==="NoopAnimations"))},inputs:{expandedHeight:"expandedHeight",collapsedHeight:"collapsedHeight",tabIndex:[2,"tabIndex","tabIndex",t=>t==null?0:gi(t)]},standalone:!0,features:[ct,Me],ngContentSelectors:lM,decls:5,vars:3,consts:[[1,"mat-content"],[1,"mat-expansion-indicator"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 -960 960 960","aria-hidden","true","focusable","false"],["d","M480-345 240-585l56-56 184 184 184-184 56 56-240 240Z"]],template:function(i,r){i&1&&(ur(sM),f(0,"span",0),Jt(1),Jt(2,1),Jt(3,2),p(),P(4,cM,3,1,"span",1)),i&2&&(xt("mat-content-hide-toggle",!r._showToggle()),g(4),Ol(r._showToggle()?4:-1))},styles:['.mat-expansion-panel-header{display:flex;flex-direction:row;align-items:center;padding:0 24px;border-radius:inherit;transition:height 225ms cubic-bezier(0.4, 0, 0.2, 1);height:var(--mat-expansion-header-collapsed-state-height);font-family:var(--mat-expansion-header-text-font, var(--mat-app-title-medium-font));font-size:var(--mat-expansion-header-text-size, var(--mat-app-title-medium-size));font-weight:var(--mat-expansion-header-text-weight, var(--mat-app-title-medium-weight));line-height:var(--mat-expansion-header-text-line-height, var(--mat-app-title-medium-line-height));letter-spacing:var(--mat-expansion-header-text-tracking, var(--mat-app-title-medium-tracking))}.mat-expansion-panel-header.mat-expanded{height:var(--mat-expansion-header-expanded-state-height)}.mat-expansion-panel-header[aria-disabled=true]{color:var(--mat-expansion-header-disabled-state-text-color)}.mat-expansion-panel-header:not([aria-disabled=true]){cursor:pointer}.mat-expansion-panel:not(.mat-expanded) .mat-expansion-panel-header:not([aria-disabled=true]):hover{background:var(--mat-expansion-header-hover-state-layer-color)}@media(hover: none){.mat-expansion-panel:not(.mat-expanded) .mat-expansion-panel-header:not([aria-disabled=true]):hover{background:var(--mat-expansion-container-background-color, var(--mat-app-surface))}}.mat-expansion-panel .mat-expansion-panel-header:not([aria-disabled=true]).cdk-keyboard-focused,.mat-expansion-panel .mat-expansion-panel-header:not([aria-disabled=true]).cdk-program-focused{background:var(--mat-expansion-header-focus-state-layer-color)}.mat-expansion-panel-header._mat-animation-noopable{transition:none}.mat-expansion-panel-header:focus,.mat-expansion-panel-header:hover{outline:none}.mat-expansion-panel-header.mat-expanded:focus,.mat-expansion-panel-header.mat-expanded:hover{background:inherit}.mat-expansion-panel-header.mat-expansion-toggle-indicator-before{flex-direction:row-reverse}.mat-expansion-panel-header.mat-expansion-toggle-indicator-before .mat-expansion-indicator{margin:0 16px 0 0}[dir=rtl] .mat-expansion-panel-header.mat-expansion-toggle-indicator-before .mat-expansion-indicator{margin:0 0 0 16px}.mat-content{display:flex;flex:1;flex-direction:row;overflow:hidden}.mat-content.mat-content-hide-toggle{margin-right:8px}[dir=rtl] .mat-content.mat-content-hide-toggle{margin-right:0;margin-left:8px}.mat-expansion-toggle-indicator-before .mat-content.mat-content-hide-toggle{margin-left:24px;margin-right:0}[dir=rtl] .mat-expansion-toggle-indicator-before .mat-content.mat-content-hide-toggle{margin-right:24px;margin-left:0}.mat-expansion-panel-header-title{color:var(--mat-expansion-header-text-color, var(--mat-app-on-surface))}.mat-expansion-panel-header-title,.mat-expansion-panel-header-description{display:flex;flex-grow:1;flex-basis:0;margin-right:16px;align-items:center}[dir=rtl] .mat-expansion-panel-header-title,[dir=rtl] .mat-expansion-panel-header-description{margin-right:0;margin-left:16px}.mat-expansion-panel-header[aria-disabled=true] .mat-expansion-panel-header-title,.mat-expansion-panel-header[aria-disabled=true] .mat-expansion-panel-header-description{color:inherit}.mat-expansion-panel-header-description{flex-grow:2;color:var(--mat-expansion-header-description-color, var(--mat-app-on-surface-variant))}.mat-expansion-indicator::after{border-style:solid;border-width:0 2px 2px 0;content:"";display:inline-block;padding:3px;transform:rotate(45deg);vertical-align:middle;color:var(--mat-expansion-header-indicator-color, var(--mat-app-on-surface-variant));display:var(--mat-expansion-legacy-header-indicator-display, inline-block)}.mat-expansion-indicator svg{width:24px;height:24px;margin:0 -8px;vertical-align:middle;fill:var(--mat-expansion-header-indicator-color, var(--mat-app-on-surface-variant));display:var(--mat-expansion-header-indicator-display, none)}.cdk-high-contrast-active .mat-expansion-panel-content{border-top:1px solid;border-top-left-radius:0;border-top-right-radius:0}'],encapsulation:2,data:{animation:[d_.indicatorRotate]},changeDetection:0})}}return e})();var h_=(()=>{class e{static{this.\u0275fac=function(i){return new(i||e)}}static{this.\u0275dir=se({type:e,selectors:[["mat-panel-title"]],hostAttrs:[1,"mat-expansion-panel-header-title"],standalone:!0})}}return e})(),f_=(()=>{class e extends i_{constructor(){super(...arguments),this._ownHeaders=new lr,this.hideToggle=!1,this.displayMode="default",this.togglePosition="after"}ngAfterContentInit(){this._headers.changes.pipe(Ln(this._headers)).subscribe(t=>{this._ownHeaders.reset(t.filter(i=>i.panel.accordion===this)),this._ownHeaders.notifyOnChanges()}),this._keyManager=new ol(this._ownHeaders).withWrap().withHomeAndEnd()}_handleHeaderKeydown(t){this._keyManager.onKeydown(t)}_handleHeaderFocus(t){this._keyManager.updateActiveItem(t)}ngOnDestroy(){super.ngOnDestroy(),this._keyManager?.destroy(),this._ownHeaders.destroy()}static{this.\u0275fac=(()=>{let t;return function(r){return(t||(t=it(e)))(r||e)}})()}static{this.\u0275dir=se({type:e,selectors:[["mat-accordion"]],contentQueries:function(i,r,o){if(i&1&&Qo(o,Pu,5),i&2){let a;bt(a=Ct())&&(r._headers=a)}},hostAttrs:[1,"mat-accordion"],hostVars:2,hostBindings:function(i,r){i&2&&xt("mat-accordion-multi",r.multi)},inputs:{hideToggle:[2,"hideToggle","hideToggle",wt],displayMode:"displayMode",togglePosition:"togglePosition"},exportAs:["matAccordion"],standalone:!0,features:[Ie([{provide:Au,useExisting:e}]),ct,Fe]})}}return e})(),m_=(()=>{class e{static{this.\u0275fac=function(i){return new(i||e)}}static{this.\u0275mod=we({type:e})}static{this.\u0275inj=be({imports:[di,o_,s_]})}}return e})();function hM(e,n){if(e&1){let t=U();f(0,"label",15)(1,"input",16),k("change",function(r){let o=E(t).$implicit,a=m(3);return S(a.applyFilter("cancerType",o,r.target))}),p(),v(2),p()}if(e&2){let t,i=n.$implicit,r=m(3);g(),y("checked",(t=r.activeFilters.get("cancerType"))==null?null:t.has(i)),g(),X(" ",i," ")}}function fM(e,n){if(e&1&&(f(0,"div",6)(1,"h4"),v(2,"Cancer Type"),p(),f(3,"div",13),P(4,hM,3,2,"label",14),p()()),e&2){let t=m(2);g(4),y("ngForOf",t.getAvailableFiltersArray("cancerType"))}}function mM(e,n){if(e&1){let t=U();f(0,"span",23),v(1),f(2,"button",24),k("click",function(){let r=E(t).$implicit,o=m(4);return S(o.removeJournalFromFilter(r))}),v(3,"\xD7"),p()()}if(e&2){let t=n.$implicit;g(),X(" ",t," ")}}function gM(e,n){if(e&1&&(f(0,"div",21),P(1,mM,4,1,"span",22),p()),e&2){let t=m(3);g(),y("ngForOf",t.getSelectedJournals())}}function _M(e,n){if(e&1){let t=U();f(0,"div",6)(1,"h4"),v(2,"Journal"),p(),f(3,"div",7)(4,"div",17)(5,"input",18),xe("ngModelChange",function(r){E(t);let o=m(2);return ye(o.journalInput,r)||(o.journalInput=r),S(r)}),k("keyup.enter",function(){E(t);let r=m(2);return S(r.addJournalToFilter())}),p(),f(6,"button",19),k("click",function(){E(t);let r=m(2);return S(r.addJournalToFilter())}),v(7,"Add"),p()(),P(8,gM,2,1,"div",20),p()()}if(e&2){let t=m(2);g(5),ve("ngModel",t.journalInput),g(),y("disabled",!t.journalInput.trim()),g(2),y("ngIf",t.getSelectedJournals().length>0)}}function vM(e,n){if(e&1){let t=U();f(0,"span",30),v(1),f(2,"button",24),k("click",function(){let r=E(t).$implicit,o=m(4);return S(o.removeCountryFromFilter(r))}),v(3,"\xD7"),p()()}if(e&2){let t=n.$implicit;g(),X(" ",t," ")}}function yM(e,n){if(e&1&&(f(0,"div",28),P(1,vM,4,1,"span",29),p()),e&2){let t=m(3);g(),y("ngForOf",t.activeFilters.get("Country"))}}function xM(e,n){if(e&1){let t=U();f(0,"div",6)(1,"h4"),v(2,"Country"),p(),f(3,"div",7)(4,"div",25)(5,"input",26),xe("ngModelChange",function(r){E(t);let o=m(2);return ye(o.countryInput,r)||(o.countryInput=r),S(r)}),k("keyup.enter",function(){E(t);let r=m(2);return S(r.addCountryToFilter())}),p(),f(6,"button",19),k("click",function(){E(t);let r=m(2);return S(r.addCountryToFilter())}),v(7,"Add"),p()(),P(8,yM,2,1,"div",27),p()()}if(e&2){let t=m(2);g(5),ve("ngModel",t.countryInput),g(),y("disabled",!t.countryInput.trim()),g(2),y("ngIf",t.activeFilters.get("Country")&&t.activeFilters.get("Country").size>0)}}function bM(e,n){if(e&1){let t=U();f(0,"label",15)(1,"input",16),k("change",function(r){let o=E(t).$implicit,a=m(3);return S(a.applyFilter("ecog",o,r.target))}),p(),v(2),p()}if(e&2){let t,i=n.$implicit,r=m(3);g(),y("checked",(t=r.activeFilters.get("ecog"))==null?null:t.has(i)),g(),X(" ",r.formatFilterLabel(i)," ")}}function CM(e,n){if(e&1&&(f(0,"div",6)(1,"h4"),v(2,"ECOG Status"),p(),f(3,"div",13),P(4,bM,3,2,"label",14),p()()),e&2){let t=m(2);g(4),y("ngForOf",t.getAvailableFiltersArray("ecog"))}}function wM(e,n){if(e&1){let t=U();f(0,"label",15)(1,"input",16),k("change",function(r){let o=E(t).$implicit,a=m(3);return S(a.applyFilter("ethnicity",o,r.target))}),p(),v(2),p()}if(e&2){let t,i=n.$implicit,r=m(3);g(),y("checked",(t=r.activeFilters.get("ethnicity"))==null?null:t.has(i)),g(),X(" ",i," ")}}function MM(e,n){if(e&1&&(f(0,"div",6)(1,"h4"),v(2,"Ethnicity"),p(),f(3,"div",13),P(4,wM,3,2,"label",14),p()()),e&2){let t=m(2);g(4),y("ngForOf",t.getAvailableFiltersArray("ethnicity"))}}function EM(e,n){if(e&1){let t=U();f(0,"label",15)(1,"input",16),k("change",function(r){let o=E(t).$implicit,a=m(3);return S(a.applyFilter("tStage",o,r.target))}),p(),v(2),p()}if(e&2){let t,i=n.$implicit,r=m(3);g(),y("checked",(t=r.activeFilters.get("tStage"))==null?null:t.has(i)),g(),X(" ",i," ")}}function SM(e,n){if(e&1&&(f(0,"div",6)(1,"h4"),v(2,"T Stage"),p(),f(3,"div",13),P(4,EM,3,2,"label",14),p()()),e&2){let t=m(2);g(4),y("ngForOf",t.getAvailableFiltersArray("tStage"))}}function IM(e,n){if(e&1){let t=U();f(0,"label",15)(1,"input",16),k("change",function(r){let o=E(t).$implicit,a=m(3);return S(a.applyFilter("nStage",o,r.target))}),p(),v(2),p()}if(e&2){let t,i=n.$implicit,r=m(3);g(),y("checked",(t=r.activeFilters.get("nStage"))==null?null:t.has(i)),g(),X(" ",i," ")}}function DM(e,n){if(e&1&&(f(0,"div",6)(1,"h4"),v(2,"N Stage"),p(),f(3,"div",13),P(4,IM,3,2,"label",14),p()()),e&2){let t=m(2);g(4),y("ngForOf",t.getAvailableFiltersArray("nStage"))}}function OM(e,n){if(e&1){let t=U();f(0,"label",15)(1,"input",16),k("change",function(r){let o=E(t).$implicit,a=m(3);return S(a.applyFilter("mStage",o,r.target))}),p(),v(2),p()}if(e&2){let t,i=n.$implicit,r=m(3);g(),y("checked",(t=r.activeFilters.get("mStage"))==null?null:t.has(i)),g(),X(" ",i," ")}}function AM(e,n){if(e&1&&(f(0,"div",6)(1,"h4"),v(2,"M Stage"),p(),f(3,"div",13),P(4,OM,3,2,"label",14),p()()),e&2){let t=m(2);g(4),y("ngForOf",t.getAvailableFiltersArray("mStage"))}}function TM(e,n){if(e&1){let t=U();f(0,"label",15)(1,"input",16),k("change",function(r){let o=E(t).$implicit,a=m(3);return S(a.applyFilter("highRisk",o,r.target))}),p(),v(2),p()}if(e&2){let t,i=n.$implicit,r=m(3);g(),y("checked",(t=r.activeFilters.get("highRisk"))==null?null:t.has(i)),g(),X(" ",i," ")}}function PM(e,n){if(e&1&&(f(0,"div",6)(1,"h4"),v(2,"Risk Status"),p(),f(3,"div",13),P(4,TM,3,2,"label",14),p()()),e&2){let t=m(2);g(4),y("ngForOf",t.getAvailableFiltersArray("highRisk"))}}function kM(e,n){if(e&1){let t=U();f(0,"label",15)(1,"input",16),k("change",function(r){let o=E(t).$implicit,a=m(3);return S(a.applyFilter("highVolume",o,r.target))}),p(),v(2),p()}if(e&2){let t,i=n.$implicit,r=m(3);g(),y("checked",(t=r.activeFilters.get("highVolume"))==null?null:t.has(i)),g(),X(" ",i," ")}}function RM(e,n){if(e&1&&(f(0,"div",6)(1,"h4"),v(2,"Volume Status"),p(),f(3,"div",13),P(4,kM,3,2,"label",14),p()()),e&2){let t=m(2);g(4),y("ngForOf",t.getAvailableFiltersArray("highVolume"))}}function FM(e,n){if(e&1){let t=U();f(0,"label",15)(1,"input",16),k("change",function(r){let o=E(t).$implicit,a=m(3);return S(a.applyFilter("stagingGroup",o,r.target))}),p(),v(2),p()}if(e&2){let t,i=n.$implicit,r=m(3);g(),y("checked",(t=r.activeFilters.get("stagingGroup"))==null?null:t.has(i)),g(),X(" ",i," ")}}function NM(e,n){if(e&1&&(f(0,"div",6)(1,"h4"),v(2,"Staging Group"),p(),f(3,"div",13),P(4,FM,3,2,"label",14),p()()),e&2){let t=m(2);g(4),y("ngForOf",t.getAvailableFiltersArray("stagingGroup"))}}function VM(e,n){if(e&1){let t=U();f(0,"label",15)(1,"input",16),k("change",function(r){let o=E(t).$implicit,a=m(3);return S(a.applyFilter("diseaseSensitivity",o,r.target))}),p(),v(2),p()}if(e&2){let t,i=n.$implicit,r=m(3);g(),y("checked",(t=r.activeFilters.get("diseaseSensitivity"))==null?null:t.has(i)),g(),X(" ",i," ")}}function LM(e,n){if(e&1&&(f(0,"div",6)(1,"h4"),v(2,"Disease Sensitivity"),p(),f(3,"div",13),P(4,VM,3,2,"label",14),p()()),e&2){let t=m(2);g(4),y("ngForOf",t.getAvailableFiltersArray("diseaseSensitivity"))}}function jM(e,n){if(e&1){let t=U();f(0,"label",15)(1,"input",16),k("change",function(r){let o=E(t).$implicit,a=m(3);return S(a.applyFilter("metastasisLocation",o,r.target))}),p(),v(2),p()}if(e&2){let t,i=n.$implicit,r=m(3);g(),y("checked",(t=r.activeFilters.get("metastasisLocation"))==null?null:t.has(i)),g(),X(" ",i," ")}}function UM(e,n){if(e&1&&(f(0,"div",6)(1,"h4"),v(2,"Metastasis Location"),p(),f(3,"div",13),P(4,jM,3,2,"label",14),p()()),e&2){let t=m(2);g(4),y("ngForOf",t.getAvailableFiltersArray("metastasisLocation"))}}function $M(e,n){if(e&1){let t=U();f(0,"label",15)(1,"input",16),k("change",function(r){let o=E(t).$implicit,a=m(3);return S(a.applyFilter("treatmentHistory",o,r.target))}),p(),v(2),p()}if(e&2){let t,i=n.$implicit,r=m(3);g(),y("checked",(t=r.activeFilters.get("treatmentHistory"))==null?null:t.has(i)),g(),X(" ",r.formatFilterLabel(i)," ")}}function zM(e,n){if(e&1&&(f(0,"div",6)(1,"h4"),v(2,"Treatment History"),p(),f(3,"div",13),P(4,$M,3,2,"label",14),p()()),e&2){let t=m(2);g(4),y("ngForOf",t.getAvailableFiltersArray("treatmentHistory"))}}function BM(e,n){if(e&1){let t=U();f(0,"label",15)(1,"input",16),k("change",function(r){let o=E(t).$implicit,a=m(3);return S(a.applyFilter("ethnicity",o,r.target))}),p(),v(2),p()}if(e&2){let t,i=n.$implicit,r=m(3);g(),y("checked",(t=r.activeFilters.get("ethnicity"))==null?null:t.has(i)),g(),X(" ",i," ")}}function HM(e,n){if(e&1&&(f(0,"div",6)(1,"h4"),v(2,"Ethnicity"),p(),f(3,"div",13),P(4,BM,3,2,"label",14),p()()),e&2){let t=m(2);g(4),y("ngForOf",t.getAvailableFiltersArray("ethnicity"))}}function GM(e,n){if(e&1){let t=U();f(0,"div",3)(1,"div",4),P(2,fM,5,1,"div",5),f(3,"div",6)(4,"h4"),v(5,"Year Range"),p(),f(6,"div",7)(7,"div",8)(8,"label",9),v(9,"Start Year:"),p(),f(10,"input",10),xe("ngModelChange",function(r){E(t);let o=m();return ye(o.startYear,r)||(o.startYear=r),S(r)}),k("change",function(){E(t);let r=m();return S(r.onYearRangeChange())}),p()(),f(11,"div",8)(12,"label",11),v(13,"End Year:"),p(),f(14,"input",12),xe("ngModelChange",function(r){E(t);let o=m();return ye(o.endYear,r)||(o.endYear=r),S(r)}),k("change",function(){E(t);let r=m();return S(r.onYearRangeChange())}),p()()()(),P(15,_M,9,3,"div",5)(16,xM,9,3,"div",5)(17,CM,5,1,"div",5)(18,MM,5,1,"div",5)(19,SM,5,1,"div",5)(20,DM,5,1,"div",5)(21,AM,5,1,"div",5)(22,PM,5,1,"div",5)(23,RM,5,1,"div",5)(24,NM,5,1,"div",5)(25,LM,5,1,"div",5)(26,UM,5,1,"div",5)(27,zM,5,1,"div",5)(28,HM,5,1,"div",5),p()()}if(e&2){let t,i,r,o,a,s,l=m();g(2),y("ngIf",l.hasFiltersInCategory("cancerType")),g(8),ve("ngModel",l.startYear),g(4),ve("ngModel",l.endYear),g(),y("ngIf",l.availableFilters.has("Journal")),g(),y("ngIf",l.availableFilters.has("Country")),g(),y("ngIf",l.hasFiltersInCategory("ecog")),g(),y("ngIf",(t=l.availableFilters.get("ethnicity"))==null?null:t.size),g(),y("ngIf",l.hasFiltersInCategory("tStage")),g(),y("ngIf",l.hasFiltersInCategory("nStage")),g(),y("ngIf",l.hasFiltersInCategory("mStage")),g(),y("ngIf",l.hasFiltersInCategory("highRisk")),g(),y("ngIf",l.hasFiltersInCategory("highVolume")),g(),y("ngIf",(i=l.availableFilters.get("stagingGroup"))==null?null:i.size),g(),y("ngIf",(r=l.availableFilters.get("diseaseSensitivity"))==null?null:r.size),g(),y("ngIf",(o=l.availableFilters.get("metastasisLocation"))==null?null:o.size),g(),y("ngIf",(a=l.availableFilters.get("treatmentHistory"))==null?null:a.size),g(),y("ngIf",(s=l.availableFilters.get("ethnicity"))==null?null:s.size)}}var $o=class e{hasSearchCriteria=!1;isLoading=!1;activeFilters=new Map;availableFilters=new Map;filterApplied=new te;filtersCleared=new te;initialFiltersApplied=new te;startYear=null;endYear=null;countryInput="";journalInput="";constructor(){}ngOnChanges(n){if(n.activeFilters&&this.activeFilters){let t=this.activeFilters.get("Year");t?(this.startYear=t.start,this.endYear=t.end):(this.startYear=null,this.endYear=null)}}activeFiltersExist(){return Array.from(this.activeFilters.values()).some(n=>n.size>0||typeof n=="object"&&n!==null&&!Array.isArray(n)&&!(n instanceof Set))}clearFilters(){this.activeFilters=this.availableFilters,this.filtersCleared.emit()}hasFiltersInCategory(n){let t=this.availableFilters.get(n);return!!t&&t.size>0}getAvailableFiltersArray(n){let t=this.availableFilters.get(n);return t?Array.from(t).sort((i,r)=>{if(n==="Year"){let o=parseInt(i,10),a=parseInt(r,10);if(!isNaN(o)&&!isNaN(a))return a-o}else{let o=parseInt(i.replace(/[^0-9]/g,""),10),a=parseInt(r.replace(/[^0-9]/g,""),10);if(!isNaN(o)&&!isNaN(a))return o-a}return i.localeCompare(r)}):[]}applyFilter(n,t,i){let r=i.checked;this.filterApplied.emit({category:n,value:t,target:i,isChecked:r})}onCheckboxChange(n,t,i){let r=i.target;this.filterApplied.emit({category:n,value:t,target:r,isChecked:r.checked})}addCountryToFilter(){let n=this.countryInput.trim();n&&((this.activeFilters.get("Country")||new Set).has(n)||this.filterApplied.emit({category:"Country",value:n,isChecked:!0}),this.countryInput="")}removeCountryFromFilter(n){this.filterApplied.emit({category:"Country",value:n,isChecked:!1})}getSelectedCountries(){let n=this.activeFilters.get("Country");return n instanceof Set?Array.from(n):[]}addJournalToFilter(){let n=this.journalInput.trim();n&&(this.filterApplied.emit({category:"Journal",value:n,isChecked:!0}),this.journalInput="")}removeJournalFromFilter(n){this.filterApplied.emit({category:"Journal",value:n,isChecked:!1})}getSelectedJournals(){let n=this.activeFilters.get("Journal");return n instanceof Set?Array.from(n).sort():[]}onYearRangeChange(){this.startYear!==null&&this.endYear!==null&&this.startYear>this.endYear,this.filterApplied.emit({category:"Year",value:{start:this.startYear,end:this.endYear}})}formatFilterLabel(n){if(!n)return"";let t=n.replace(/([A-Z])/g," $1").trim();return t.charAt(0).toUpperCase()+t.slice(1)}resetInputFields(){this.startYear=null,this.endYear=null,this.countryInput="",this.journalInput=""}static \u0275fac=function(t){return new(t||e)};static \u0275cmp=Ce({type:e,selectors:[["app-active-filters-sidebar"]],inputs:{hasSearchCriteria:"hasSearchCriteria",isLoading:"isLoading",activeFilters:"activeFilters",availableFilters:"availableFilters"},outputs:{filterApplied:"filterApplied",filtersCleared:"filtersCleared",initialFiltersApplied:"initialFiltersApplied"},standalone:!0,features:[Ae,Me],decls:6,vars:1,consts:[[1,"filters-header"],[1,"clear-filters-btn",3,"click"],["class","filters-section",4,"ngIf"],[1,"filters-section"],[1,"filter-groups"],["class","filter-group",4,"ngIf"],[1,"filter-group"],[1,"filter-options-column"],[1,"year-input-group"],["for","startYear"],["type","number","id","startYear","placeholder","YYYY",3,"ngModelChange","change","ngModel"],["for","endYear"],["type","number","id","endYear","placeholder","YYYY",3,"ngModelChange","change","ngModel"],[1,"filter-options"],["class","filter-option",4,"ngFor","ngForOf"],[1,"filter-option"],["type","checkbox",3,"change","checked"],[1,"journal-input-group"],["type","text","id","journalInput","placeholder","Enter journal name",3,"ngModelChange","keyup.enter","ngModel"],[3,"click","disabled"],["class","selected-journals",4,"ngIf"],[1,"selected-journals"],["class","selected-journal-tag",4,"ngFor","ngForOf"],[1,"selected-journal-tag"],[1,"remove-tag-button",3,"click"],[1,"country-input-group"],["type","text","id","countryInput","placeholder","Enter country name",3,"ngModelChange","keyup.enter","ngModel"],["class","selected-countries",4,"ngIf"],[1,"selected-countries"],["class","selected-country-tag",4,"ngFor","ngForOf"],[1,"selected-country-tag"]],template:function(t,i){t&1&&(f(0,"div",0)(1,"h3"),v(2,"Active Filters"),p(),f(3,"button",1),k("click",function(){return i.clearFilters()}),v(4,"Clear All Filters"),p()(),P(5,GM,29,17,"div",2)),t&2&&(g(5),y("ngIf",(i.hasSearchCriteria||i.activeFiltersExist())&&!i.isLoading))},dependencies:[Xe,Bt,Mt,Fi,Ri,Qr,za,Kr],styles:[".filters-section[_ngcontent-%COMP%]{width:250px;padding:15px;background-color:#f8f9fa;border-radius:6px;box-shadow:0 2px 5px #0000001a;height:90%;overflow-y:auto;max-height:calc(100vh - 40px)}.filters-header[_ngcontent-%COMP%]{justify-content:space-between;align-items:center;margin-bottom:15px}.filters-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;font-size:1.2rem}.clear-filters-btn[_ngcontent-%COMP%]{background-color:#f44336;color:#fff;border:none;padding:5px 10px;border-radius:4px;cursor:pointer;font-size:12px;transition:background-color .3s}.clear-filters-btn[_ngcontent-%COMP%]:hover{background-color:#d32f2f}.filter-groups[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:15px}.filter-group[_ngcontent-%COMP%]{border-bottom:1px solid #e0e0e0;padding-bottom:15px}.filter-group[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin:0 0 10px;font-size:1rem;color:#555}.filter-options[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:8px}.filter-option[_ngcontent-%COMP%]{display:flex;align-items:center;font-size:14px;cursor:pointer}.filter-option[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{margin-right:8px}",`.filter-options-column[_ngcontent-%COMP%] {
    display: flex;
    flex-direction: column;
    gap: 10px;
  }
  .year-input-group[_ngcontent-%COMP%] {
    display: flex;
    flex-direction: column; 

    gap: 4px;
  }
  .year-input-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%] {
    font-size: 0.9em;
    color: #555;
  }
  .year-input-group[_ngcontent-%COMP%]   input[type="number"][_ngcontent-%COMP%] {
    padding: 6px 8px;
    border: 1px solid #ccc;
    border-radius: 4px;
    font-size: 0.95em;
  }`]})};var Fn=class e{paperDataSource=new He(null);currentPaperData=this.paperDataSource.asObservable();constructor(){}changePaperData(n){this.paperDataSource.next(n)}static \u0275fac=function(t){return new(t||e)};static \u0275prov=G({token:e,factory:e.\u0275fac,providedIn:"root"})};function qM(e,n){if(e&1&&(f(0,"p")(1,"strong"),v(2,"First Author:"),p(),v(3),p()),e&2){let t=m().$implicit;g(3),X(" ",t.first_author,"")}}function WM(e,n){if(e&1&&(f(0,"p")(1,"strong")(2,"a",9),v(3,"[OpenAlex]"),p()()()),e&2){let t=m().$implicit;g(2),y("href",t.openAlexId,Ml)}}function YM(e,n){if(e&1&&(f(0,"span",14),v(1),p()),e&2){let t=m().$implicit;g(),Z(t.key)}}function XM(e,n){if(e&1&&(Pe(0),P(1,YM,2,1,"span",13),ke()),e&2){let t=n.$implicit;g(),y("ngIf",t.value==="TRUE")}}function KM(e,n){if(e&1&&(f(0,"div",10)(1,"h4"),v(2,"Relevant for Situations:"),p(),f(3,"div",11),P(4,XM,2,1,"ng-container",12),tn(5,"keyvalue"),p()()),e&2){let t=m().$implicit;g(4),y("ngForOf",$n(5,1,t.item))}}function QM(e,n){if(e&1&&(f(0,"p")(1,"strong"),v(2,"PMID:"),p(),f(3,"a",9),v(4),p()()),e&2){let t=m(3).$implicit;g(3),y("href",t._openAlexData.ids.pmid,Ml),g(),Z(t._openAlexData.ids.pmid)}}function ZM(e,n){if(e&1&&(f(0,"p")(1,"strong"),v(2,"DOI:"),p(),v(3),p()),e&2){let t=m(3).$implicit;g(3),X(" ",t._openAlexData.ids.doi," ")}}function JM(e,n){if(e&1&&(f(0,"p")(1,"strong"),v(2,"Type:"),p(),v(3),p()),e&2){let t=m(3).$implicit;g(3),X(" ",t._openAlexData.type," ")}}function eE(e,n){e&1&&(f(0,"p")(1,"strong"),v(2,"Access:"),p(),f(3,"span",18),v(4,"Open Access"),p()())}function tE(e,n){if(e&1&&(f(0,"div",17),P(1,QM,5,2,"p",6)(2,ZM,4,1,"p",6)(3,JM,4,1,"p",6)(4,eE,5,0,"p",6),p()),e&2){let t=m(2).$implicit;g(),y("ngIf",t._openAlexData.ids.pmid),g(),y("ngIf",t._openAlexData.ids.doi),g(),y("ngIf",t._openAlexData.type),g(),y("ngIf",t._openAlexData.open_access&&t._openAlexData.open_access.is_oa)}}function nE(e,n){e&1&&(f(0,"div")(1,"p"),v(2,"Could not load OpenAlex data for this item."),p()())}function iE(e,n){if(e&1&&(f(0,"div",15)(1,"h3"),v(2,"OpenAlex Data:"),p(),P(3,tE,5,4,"div",16)(4,nE,3,0,"div",6),p()),e&2){let t=m().$implicit;g(3),y("ngIf",t._openAlexData&&!t._openAlexData.error),g(),y("ngIf",t._openAlexData&&t._openAlexData.error)}}function rE(e,n){if(e&1&&(f(0,"div",4)(1,"h2"),v(2),p(),f(3,"div",5)(4,"p")(5,"strong"),v(6,"Year:"),p(),v(7),p(),f(8,"p")(9,"strong"),v(10,"Journal:"),p(),v(11),p(),P(12,qM,4,1,"p",6)(13,WM,4,1,"p",6),p(),P(14,KM,6,3,"div",7)(15,iE,5,2,"div",8),p()),e&2){let t=n.$implicit,i=m(2);g(2),Z(t.title||"No Title Available"),g(5),X(" ",t.year||"N/A",""),g(4),X(" ",t.journal||"N/A",""),g(),y("ngIf",t.first_author),g(),y("ngIf",t.openAlexId),g(),y("ngIf",i.hasTrueValues(t.item)),g(),y("ngIf",t._openAlexData)}}function oE(e,n){if(e&1&&(f(0,"div"),P(1,rE,16,7,"div",3),p()),e&2){let t=n.ngIf;g(),y("ngForOf",t)}}function aE(e,n){e&1&&(f(0,"p"),v(1,"No paper data available ..."),p())}var ll=class e{constructor(n,t){this.paperDataService=n;this.http=t}paperData;dataSubscription;openAlexSubscriptions=[];ngOnInit(){this.dataSubscription=this.paperDataService.currentPaperData.subscribe(n=>{n&&(this.paperData=n,this.paperData.length<30&&this.fetchOpenAlexData())})}fetchOpenAlexData(){for(let n=0;n<this.paperData.length;n++){let t=this.paperData[n].openAlexId.replace("https://openalex.org/","");this.http.get("https://api.openalex.org/works/"+t).subscribe({next:i=>{this.paperData[n]._openAlexData=i},error:i=>{this.paperData[n]._openAlexData={error:"Could not load OpenAlex data for "+this.paperData[n].openAlexId}}})}}hasTrueValues(n){return n?Object.values(n).some(t=>t==="TRUE"):!1}ngOnDestroy(){this.openAlexSubscriptions.forEach(n=>n.unsubscribe()),this.openAlexSubscriptions=[]}static \u0275fac=function(t){return new(t||e)(V(Fn),V(kt))};static \u0275cmp=Ce({type:e,selectors:[["app-paper-detail-view"]],standalone:!0,features:[Me],decls:6,vars:2,consts:[["noData",""],[1,"paper-detail-container"],[4,"ngIf","ngIfElse"],["class","paper-item",4,"ngFor","ngForOf"],[1,"paper-item"],[1,"metadata-grid"],[4,"ngIf"],["class","relevant-situations",4,"ngIf"],["class","openalex-details",4,"ngIf"],["target","_blank",3,"href"],[1,"relevant-situations"],[1,"tags-container"],[4,"ngFor","ngForOf"],["class","tag",4,"ngIf"],[1,"tag"],[1,"openalex-details"],["class","openalex-data-grid",4,"ngIf"],[1,"openalex-data-grid"],[1,"open-access-tag"]],template:function(t,i){if(t&1&&(f(0,"div",1)(1,"h1"),v(2,"Detailed Paper View"),p(),P(3,oE,2,1,"div",2)(4,aE,2,0,"ng-template",null,0,ut),p()),t&2){let r=rt(5);g(3),y("ngIf",i.paperData)("ngIfElse",r)}},dependencies:[Xe,Bt,Mt,hp,xn],styles:[".paper-detail-container[_ngcontent-%COMP%]{padding:20px;font-family:Arial,sans-serif}.back-button[_ngcontent-%COMP%]{background-color:#f0f0f0;border:1px solid #ccc;padding:8px 15px;border-radius:4px;cursor:pointer;margin-bottom:20px;font-size:14px}.back-button[_ngcontent-%COMP%]:hover{background-color:#e0e0e0}.paper-item[_ngcontent-%COMP%]{margin-bottom:30px;padding:20px;border:1px solid #eee;border-radius:5px;background-color:#f9f9f9}.paper-item[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin-top:0;color:#333;font-size:1.5em}.metadata-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(250px,1fr));gap:10px;margin-bottom:15px;font-size:.9em}.metadata-grid[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:5px 0;background-color:#fff;padding:8px;border-radius:3px;border:1px solid #e0e0e0}.metadata-grid[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{color:#555}.document-text[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%], .full-metadata[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin-top:20px;margin-bottom:10px;color:#444;font-size:1.2em}.document-text[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{line-height:1.6;text-align:justify;white-space:pre-wrap}.full-metadata[_ngcontent-%COMP%]   pre[_ngcontent-%COMP%]{background-color:#fff;padding:15px;border-radius:4px;border:1px solid #e0e0e0;overflow-x:auto;white-space:pre-wrap;white-space:-moz-pre-wrap;white-space:-pre-wrap;white-space:-o-pre-wrap;word-wrap:break-word}.relevant-situations[_ngcontent-%COMP%]{margin-bottom:15px}.relevant-situations[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin-top:0;margin-bottom:10px;color:#444;font-size:1.1em}.tags-container[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:8px}.tag[_ngcontent-%COMP%]{background-color:#e0e0e0;color:#333;padding:5px 10px;border-radius:15px;font-size:.85em;white-space:nowrap}.openalex-details[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin-top:20px;margin-bottom:10px;color:#444;font-size:1.2em}.openalex-data-grid[_ngcontent-%COMP%]{font-size:.9em}.openalex-data-grid[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:5px 0;background-color:#fff;padding:8px;border-radius:3px;border:1px solid #e0e0e0}.openalex-data-grid[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{color:#555;margin-right:5px}.open-access-tag[_ngcontent-%COMP%]{background-color:#28a745;color:#fff;padding:3px 8px;border-radius:4px;font-size:.9em;font-weight:700}.openalex-details[_ngcontent-%COMP%]   pre[_ngcontent-%COMP%]{background-color:#fff;padding:15px;border-radius:4px;border:1px solid #e0e0e0;overflow-x:auto;white-space:pre-wrap;white-space:-moz-pre-wrap;white-space:-pre-wrap;white-space:-o-pre-wrap;word-wrap:break-word}hr[_ngcontent-%COMP%]{border:0;height:1px;background-color:#ddd;margin-top:30px}"]})};var sE=()=>["gender","age","ecog","ethnicity"],lE=()=>["tStage","nStage","mStage","stagingGroup","metastasisLocation"],cE=()=>["timePointOfDiagnosis","adt","arpi","tripleTherapy","extraTreatmentHistory"],dE=()=>["ddr","genesInvolved","variants"],uE=()=>["psmaLevel","alpLevel"],pE=()=>["gleasonScore","histologicVariants"],hE=()=>["highVolume","highRisk"];function fE(e,n){if(e&1&&(Pe(0)(1,43),f(2,"span",44),v(3),p(),f(4,"span",45),v(5,"\u270E"),p(),ke()()),e&2){let t=m().$implicit,i=m(3);g(),y("ngSwitch",i.getFieldType(t)),g(2),Z(i.patientDetails[t]||"Not specified")}}function mE(e,n){if(e&1){let t=U();f(0,"input",49),xe("ngModelChange",function(r){E(t);let o=m(2).$implicit,a=m(3);return ye(a.patientDetails[o],r)||(a.patientDetails[o]=r),S(r)}),k("blur",function(){E(t);let r=m(2).$implicit,o=m(3);return S(o.savePatientDetail(r))})("keyup.enter",function(){E(t);let r=m(2).$implicit,o=m(3);return S(o.savePatientDetail(r))}),p()}if(e&2){let t=m(2).$implicit,i=m(3);y("min",0)("max",120),ve("ngModel",i.patientDetails[t])}}function gE(e,n){if(e&1&&(f(0,"option",53),v(1),p()),e&2){let t=n.$implicit;y("value",t.value),g(),Z(t.label)}}function _E(e,n){if(e&1){let t=U();f(0,"select",50),xe("ngModelChange",function(r){E(t);let o=m(2).$implicit,a=m(3);return ye(a.patientDetails[o],r)||(a.patientDetails[o]=r),S(r)}),k("blur",function(){E(t);let r=m(2).$implicit,o=m(3);return S(o.savePatientDetail(r))})("change",function(){E(t);let r=m(2).$implicit,o=m(3);return S(o.savePatientDetail(r))}),f(1,"option",51),v(2),p(),P(3,gE,2,2,"option",52),p()}if(e&2){let t=m(2).$implicit,i=m(3);ve("ngModel",i.patientDetails[t]),g(2),X("Select ",i.formatLabel(t),""),g(),y("ngForOf",i.getFieldOptions(t))}}function vE(e,n){if(e&1){let t=U();f(0,"input",54),xe("ngModelChange",function(r){E(t);let o=m(2).$implicit,a=m(3);return ye(a.patientDetails[o],r)||(a.patientDetails[o]=r),S(r)}),k("blur",function(){E(t);let r=m(2).$implicit,o=m(3);return S(o.savePatientDetail(r))})("keyup.enter",function(){E(t);let r=m(2).$implicit,o=m(3);return S(o.savePatientDetail(r))}),p()}if(e&2){let t=m(2).$implicit,i=m(3);ve("ngModel",i.patientDetails[t])}}function yE(e,n){if(e&1&&(Pe(0,43),P(1,mE,1,3,"input",46)(2,_E,4,3,"select",47)(3,vE,1,1,"input",48),ke()),e&2){let t=m().$implicit,i=m(3);y("ngSwitch",i.getFieldType(t)),g(),y("ngSwitchCase","number"),g(),y("ngSwitchCase","select")}}function xE(e,n){if(e&1){let t=U();f(0,"div",30)(1,"span",31),v(2),p(),f(3,"div",32),k("click",function(){let r=E(t).$implicit,o=m(3);return S(o.editPatientDetail(r))}),P(4,fE,6,2,"ng-container",33)(5,yE,4,3,"ng-template",null,2,ut),p()()}if(e&2){let t=n.$implicit,i=rt(6),r=m(3);g(2),X("",r.formatLabel(t),":"),g(2),y("ngIf",!r.editingDetail[t])("ngIfElse",i)}}function bE(e,n){if(e&1&&(Pe(0),f(1,"span",44),v(2),p(),f(3,"span",45),v(4,"\u270E"),p(),ke()),e&2){let t=m(3);g(2),Z(t.patientDetails.diseaseSensitivity||"Not specified")}}function CE(e,n){if(e&1&&(f(0,"option",53),v(1),p()),e&2){let t=n.$implicit;y("value",t.value),g(),Z(t.label)}}function wE(e,n){if(e&1){let t=U();f(0,"select",50),xe("ngModelChange",function(r){E(t);let o=m(3);return ye(o.patientDetails.diseaseSensitivity,r)||(o.patientDetails.diseaseSensitivity=r),S(r)}),k("blur",function(){E(t);let r=m(3);return S(r.savePatientDetail("diseaseSensitivity"))})("change",function(){E(t);let r=m(3);return S(r.savePatientDetail("diseaseSensitivity"))}),f(1,"option",51),v(2,"Select Disease Sensitivity"),p(),P(3,CE,2,2,"option",52),p()}if(e&2){let t=m(3);ve("ngModel",t.patientDetails.diseaseSensitivity),g(3),y("ngForOf",t.getFieldOptions("diseaseSensitivity"))}}function ME(e,n){if(e&1&&(Pe(0),f(1,"span",44),v(2),p(),f(3,"span",45),v(4,"\u270E"),p(),ke()),e&2){let t=m().$implicit,i=m(3);g(2),Z(i.patientDetails[t]||"Not specified")}}function EE(e,n){if(e&1&&(f(0,"option",53),v(1),p()),e&2){let t=n.$implicit;y("value",t.value),g(),Z(t.label)}}function SE(e,n){if(e&1){let t=U();f(0,"select",50),xe("ngModelChange",function(r){E(t);let o=m().$implicit,a=m(3);return ye(a.patientDetails[o],r)||(a.patientDetails[o]=r),S(r)}),k("blur",function(){E(t);let r=m().$implicit,o=m(3);return S(o.savePatientDetail(r))})("change",function(){E(t);let r=m().$implicit,o=m(3);return S(o.savePatientDetail(r))}),f(1,"option",51),v(2),p(),P(3,EE,2,2,"option",52),p()}if(e&2){let t=m().$implicit,i=m(3);ve("ngModel",i.patientDetails[t]),g(2),X("Select ",i.formatLabel(t),""),g(),y("ngForOf",i.getFieldOptions(t))}}function IE(e,n){if(e&1){let t=U();f(0,"div",30)(1,"span",31),v(2),p(),f(3,"div",32),k("click",function(){let r=E(t).$implicit,o=m(3);return S(o.editPatientDetail(r))}),P(4,ME,5,1,"ng-container",33)(5,SE,4,3,"ng-template",null,2,ut),p()()}if(e&2){let t=n.$implicit,i=rt(6),r=m(3);g(2),X("",r.formatLabel(t),":"),g(2),y("ngIf",!r.editingDetail[t])("ngIfElse",i)}}function DE(e,n){if(e&1){let t=U();f(0,"div",57),k("click",function(r){E(t);let o=m(2).$implicit,a=m(3);return r.stopPropagation(),S(a.toggleCheckbox(o))}),f(1,"input",58),k("click",function(r){return E(t),S(r.stopPropagation())}),p()()}if(e&2){let t=m(2).$implicit,i=m(3);g(),y("checked",i.patientDetails[t])}}function OE(e,n){if(e&1&&(f(0,"span",44),v(1),p()),e&2){let t=m(2).$implicit,i=m(3);g(),Z(i.patientDetails[t]||"Not specified")}}function AE(e,n){if(e&1&&(Pe(0)(1,43),P(2,DE,2,1,"div",55)(3,OE,2,1,"span",56),f(4,"span",45),v(5,"\u270E"),p(),ke()()),e&2){let t=m().$implicit,i=m(3);g(),y("ngSwitch",i.getFieldType(t)),g(),y("ngSwitchCase","checkbox")}}function TE(e,n){if(e&1){let t=U();f(0,"div",60)(1,"input",61),xe("ngModelChange",function(r){E(t);let o=m(2).$implicit,a=m(3);return ye(a.patientDetails[o],r)||(a.patientDetails[o]=r),S(r)}),k("change",function(){E(t);let r=m(2).$implicit,o=m(3);return S(o.savePatientDetail(r))}),p()()}if(e&2){let t=m(2).$implicit,i=m(3);g(),ve("ngModel",i.patientDetails[t])}}function PE(e,n){if(e&1){let t=U();f(0,"input",54),xe("ngModelChange",function(r){E(t);let o=m(2).$implicit,a=m(3);return ye(a.patientDetails[o],r)||(a.patientDetails[o]=r),S(r)}),k("blur",function(){E(t);let r=m(2).$implicit,o=m(3);return S(o.savePatientDetail(r))})("keyup.enter",function(){E(t);let r=m(2).$implicit,o=m(3);return S(o.savePatientDetail(r))}),p()}if(e&2){let t=m(2).$implicit,i=m(3);ve("ngModel",i.patientDetails[t])}}function kE(e,n){if(e&1&&(Pe(0,43),P(1,TE,2,1,"div",59)(2,PE,1,1,"input",48),ke()),e&2){let t=m().$implicit,i=m(3);y("ngSwitch",i.getFieldType(t)),g(),y("ngSwitchCase","checkbox")}}function RE(e,n){if(e&1){let t=U();f(0,"div",30)(1,"span",31),v(2),p(),f(3,"div",32),k("click",function(){let r=E(t).$implicit,o=m(3);return S(o.editPatientDetail(r))}),P(4,AE,6,2,"ng-container",33)(5,kE,3,2,"ng-template",null,2,ut),p()()}if(e&2){let t=n.$implicit,i=rt(6),r=m(3);g(2),X("",r.formatLabel(t),":"),g(2),y("ngIf",!r.editingDetail[t])("ngIfElse",i)}}function FE(e,n){if(e&1){let t=U();f(0,"div",57),k("click",function(r){E(t);let o=m(2).$implicit,a=m(3);return r.stopPropagation(),S(a.toggleCheckbox(o))}),f(1,"input",58),k("click",function(r){return E(t),S(r.stopPropagation())}),p()()}if(e&2){let t=m(2).$implicit,i=m(3);g(),y("checked",i.patientDetails[t])}}function NE(e,n){if(e&1&&(f(0,"span",44),v(1),p()),e&2){let t=m(2).$implicit,i=m(3);g(),Z(i.patientDetails[t]||"Not specified")}}function VE(e,n){if(e&1&&(Pe(0)(1,43),P(2,FE,2,1,"div",55)(3,NE,2,1,"span",56),f(4,"span",45),v(5,"\u270E"),p(),ke()()),e&2){let t=m().$implicit,i=m(3);g(),y("ngSwitch",i.getFieldType(t)),g(),y("ngSwitchCase","checkbox")}}function LE(e,n){if(e&1){let t=U();f(0,"div",60)(1,"input",61),xe("ngModelChange",function(r){E(t);let o=m(2).$implicit,a=m(3);return ye(a.patientDetails[o],r)||(a.patientDetails[o]=r),S(r)}),k("change",function(){E(t);let r=m(2).$implicit,o=m(3);return S(o.savePatientDetail(r))}),p()()}if(e&2){let t=m(2).$implicit,i=m(3);g(),ve("ngModel",i.patientDetails[t])}}function jE(e,n){if(e&1){let t=U();f(0,"input",54),xe("ngModelChange",function(r){E(t);let o=m(2).$implicit,a=m(3);return ye(a.patientDetails[o],r)||(a.patientDetails[o]=r),S(r)}),k("blur",function(){E(t);let r=m(2).$implicit,o=m(3);return S(o.savePatientDetail(r))})("keyup.enter",function(){E(t);let r=m(2).$implicit,o=m(3);return S(o.savePatientDetail(r))}),p()}if(e&2){let t=m(2).$implicit,i=m(3);ve("ngModel",i.patientDetails[t])}}function UE(e,n){if(e&1&&(Pe(0,43),P(1,LE,2,1,"div",59)(2,jE,1,1,"input",48),ke()),e&2){let t=m().$implicit,i=m(3);y("ngSwitch",i.getFieldType(t)),g(),y("ngSwitchCase","checkbox")}}function $E(e,n){if(e&1){let t=U();f(0,"div",30)(1,"span",31),v(2),p(),f(3,"div",32),k("click",function(){let r=E(t).$implicit,o=m(3);return S(o.editPatientDetail(r))}),P(4,VE,6,2,"ng-container",33)(5,UE,3,2,"ng-template",null,2,ut),p()()}if(e&2){let t=n.$implicit,i=rt(6),r=m(3);g(2),X("",r.formatLabel(t),":"),g(2),y("ngIf",!r.editingDetail[t])("ngIfElse",i)}}function zE(e,n){if(e&1&&(Pe(0),f(1,"span",44),v(2),p(),f(3,"span",45),v(4,"\u270E"),p(),ke()),e&2){let t=m().$implicit,i=m(3);g(2),Z(i.patientDetails[t]||"Not specified")}}function BE(e,n){if(e&1){let t=U();f(0,"input",54),xe("ngModelChange",function(r){E(t);let o=m().$implicit,a=m(3);return ye(a.patientDetails[o],r)||(a.patientDetails[o]=r),S(r)}),k("blur",function(){E(t);let r=m().$implicit,o=m(3);return S(o.savePatientDetail(r))})("keyup.enter",function(){E(t);let r=m().$implicit,o=m(3);return S(o.savePatientDetail(r))}),p()}if(e&2){let t=m().$implicit,i=m(3);ve("ngModel",i.patientDetails[t])}}function HE(e,n){if(e&1){let t=U();f(0,"div",30)(1,"span",31),v(2),p(),f(3,"div",32),k("click",function(){let r=E(t).$implicit,o=m(3);return S(o.editPatientDetail(r))}),P(4,zE,5,1,"ng-container",33)(5,BE,1,1,"ng-template",null,2,ut),p()()}if(e&2){let t=n.$implicit,i=rt(6),r=m(3);g(2),X("",r.formatLabel(t),":"),g(2),y("ngIf",!r.editingDetail[t])("ngIfElse",i)}}function GE(e,n){if(e&1&&(Pe(0),f(1,"span",44),v(2),p(),f(3,"span",45),v(4,"\u270E"),p(),ke()),e&2){let t=m().$implicit,i=m(3);g(2),Z(i.patientDetails[t]||"Not specified")}}function qE(e,n){if(e&1){let t=U();f(0,"input",54),xe("ngModelChange",function(r){E(t);let o=m().$implicit,a=m(3);return ye(a.patientDetails[o],r)||(a.patientDetails[o]=r),S(r)}),k("blur",function(){E(t);let r=m().$implicit,o=m(3);return S(o.savePatientDetail(r))})("keyup.enter",function(){E(t);let r=m().$implicit,o=m(3);return S(o.savePatientDetail(r))}),p()}if(e&2){let t=m().$implicit,i=m(3);ve("ngModel",i.patientDetails[t])}}function WE(e,n){if(e&1){let t=U();f(0,"div",30)(1,"span",31),v(2),p(),f(3,"div",32),k("click",function(){let r=E(t).$implicit,o=m(3);return S(o.editPatientDetail(r))}),P(4,GE,5,1,"ng-container",33)(5,qE,1,1,"ng-template",null,2,ut),p()()}if(e&2){let t=n.$implicit,i=rt(6),r=m(3);g(2),X("",r.formatLabel(t),":"),g(2),y("ngIf",!r.editingDetail[t])("ngIfElse",i)}}function YE(e,n){if(e&1){let t=U();f(0,"div",57),k("click",function(r){E(t);let o=m(2).$implicit,a=m(3);return r.stopPropagation(),S(a.toggleCheckbox(o))}),f(1,"input",58),k("click",function(r){return E(t),S(r.stopPropagation())}),p()()}if(e&2){let t=m(2).$implicit,i=m(3);g(),y("checked",i.patientDetails[t])}}function XE(e,n){if(e&1&&(f(0,"span",44),v(1),p()),e&2){let t=m(2).$implicit,i=m(3);g(),Z(i.patientDetails[t]||"Not specified")}}function KE(e,n){if(e&1&&(Pe(0),P(1,YE,2,1,"div",62)(2,XE,2,1,"span",63),f(3,"span",45),v(4,"\u270E"),p(),ke()),e&2){let t=m().$implicit,i=m(3);g(),y("ngIf",i.getFieldType(t)==="checkbox"),g(),y("ngIf",i.getFieldType(t)!=="checkbox")}}function QE(e,n){if(e&1){let t=U();f(0,"div",60)(1,"input",61),xe("ngModelChange",function(r){E(t);let o=m(2).$implicit,a=m(3);return ye(a.patientDetails[o],r)||(a.patientDetails[o]=r),S(r)}),k("change",function(){E(t);let r=m(2).$implicit,o=m(3);return S(o.savePatientDetail(r))}),p()()}if(e&2){let t=m(2).$implicit,i=m(3);g(),ve("ngModel",i.patientDetails[t])}}function ZE(e,n){if(e&1){let t=U();f(0,"input",54),xe("ngModelChange",function(r){E(t);let o=m(2).$implicit,a=m(3);return ye(a.patientDetails[o],r)||(a.patientDetails[o]=r),S(r)}),k("blur",function(){E(t);let r=m(2).$implicit,o=m(3);return S(o.savePatientDetail(r))})("keyup.enter",function(){E(t);let r=m(2).$implicit,o=m(3);return S(o.savePatientDetail(r))}),p()}if(e&2){let t=m(2).$implicit,i=m(3);ve("ngModel",i.patientDetails[t])}}function JE(e,n){if(e&1&&P(0,QE,2,1,"div",64)(1,ZE,1,1,"input",65),e&2){let t=m().$implicit,i=m(3);y("ngIf",i.getFieldType(t)==="checkbox"),g(),y("ngIf",i.getFieldType(t)!=="checkbox")}}function eS(e,n){if(e&1){let t=U();f(0,"div",30)(1,"span",31),v(2),p(),f(3,"div",32),k("click",function(){let r=E(t).$implicit,o=m(3);return S(o.editPatientDetail(r))}),P(4,KE,5,2,"ng-container",33)(5,JE,2,2,"ng-template",null,2,ut),p()()}if(e&2){let t=n.$implicit,i=rt(6),r=m(3);g(2),X("",r.formatLabel(t),":"),g(2),y("ngIf",!r.editingDetail[t])("ngIfElse",i)}}function tS(e,n){if(e&1){let t=U();f(0,"div",66)(1,"button",67),k("click",function(){E(t);let r=m(3);return S(r.viewPaperDetails(r.createPaperArrayFromRelevantPapers()))}),v(2,"View Details"),p()()}}function nS(e,n){if(e&1){let t=U();f(0,"div",70)(1,"div",71),k("click",function(){let r=E(t).$implicit,o=m(4);return S(o.viewPaperDetails(o.preparePapersForView([r])))}),v(2),p()()}if(e&2){let t=n.$implicit;g(2),Z(t.titles)}}function iS(e,n){if(e&1&&(f(0,"div",68),P(1,nS,3,1,"div",69),p()),e&2){let t=m(3);g(),y("ngForOf",t.papersFoundInChromaDB.metadatas[0])}}function rS(e,n){e&1&&(f(0,"div",72),pe(1,"mat-spinner",73),f(2,"span"),v(3,"Processing your question..."),p()())}function oS(e,n){if(e&1&&(f(0,"div",74),pe(1,"p",75),p()),e&2){let t=m(3);g(),y("innerHTML",t.llmResponse,Xu)}}function aS(e,n){if(e&1){let t=U();f(0,"div",22)(1,"div",23)(2,"div",24)(3,"h3"),v(4,"Cancer Type"),p(),f(5,"div",25),v(6),p()(),f(7,"div",24)(8,"h3"),v(9,"Patient Profile"),p(),f(10,"div",26)(11,"mat-accordion")(12,"mat-expansion-panel")(13,"mat-expansion-panel-header")(14,"mat-panel-title",27),v(15," Basic Information "),p()(),f(16,"div",28),P(17,xE,7,3,"div",29),p()(),f(18,"mat-expansion-panel")(19,"mat-expansion-panel-header")(20,"mat-panel-title",27),v(21," Disease Sensitivity "),p()(),f(22,"div",28)(23,"div",30)(24,"span",31),v(25),p(),f(26,"div",32),k("click",function(){E(t);let r=m(2);return S(r.editPatientDetail("diseaseSensitivity"))}),P(27,bE,5,1,"ng-container",33)(28,wE,4,2,"ng-template",null,1,ut),p()()()(),f(30,"mat-expansion-panel")(31,"mat-expansion-panel-header")(32,"mat-panel-title",27),v(33," Staging "),p()(),f(34,"div",28),P(35,IE,7,3,"div",29),p()(),f(36,"mat-expansion-panel")(37,"mat-expansion-panel-header")(38,"mat-panel-title",27),v(39," Treatment History "),p()(),f(40,"div",28),P(41,RE,7,3,"div",29),p()(),f(42,"mat-expansion-panel")(43,"mat-expansion-panel-header")(44,"mat-panel-title",27),v(45," Genomic Information "),p()(),f(46,"div",28),P(47,$E,7,3,"div",29),p()(),f(48,"mat-expansion-panel")(49,"mat-expansion-panel-header")(50,"mat-panel-title",27),v(51," Prostate-specific Markers "),p()(),f(52,"div",28),P(53,HE,7,3,"div",29),p()(),f(54,"mat-expansion-panel")(55,"mat-expansion-panel-header")(56,"mat-panel-title",27),v(57," Prostate-specific Staging "),p()(),f(58,"div",28),P(59,WE,7,3,"div",29),p()(),f(60,"mat-expansion-panel")(61,"mat-expansion-panel-header")(62,"mat-panel-title",27),v(63," Risk Classification "),p()(),f(64,"div",28),P(65,eS,7,3,"div",29),p()()()()()(),f(66,"div",34)(67,"button",35),k("click",function(){E(t);let r=m(2);return S(r.setParametersAsFilters())}),v(68,"Set Parameters to Filter"),p()(),f(69,"div",24)(70,"h3"),v(71,"Clinical Question"),p(),f(72,"div",36)(73,"textarea",37),xe("ngModelChange",function(r){E(t);let o=m(2);return ye(o.queryText,r)||(o.queryText=r),S(r)}),p()()(),f(74,"div",24)(75,"h3"),v(76,"Papers Found in ChromaDB"),p(),P(77,tS,3,0,"div",38)(78,iS,2,1,"div",39),p(),f(79,"div",24)(80,"h3"),v(81,"Answer"),p(),f(82,"div",40),P(83,rS,4,0,"div",41)(84,oS,2,1,"div",42),p()()()}if(e&2){let t=rt(29),i=m(2);g(6),Z(i.cancerType),g(11),y("ngForOf",dt(16,sE)),g(8),X("",i.formatLabel("diseaseSensitivity"),":"),g(2),y("ngIf",!i.editingDetail.diseaseSensitivity)("ngIfElse",t),g(8),y("ngForOf",dt(17,lE)),g(6),y("ngForOf",dt(18,cE)),g(6),y("ngForOf",dt(19,dE)),g(6),y("ngForOf",dt(20,uE)),g(6),y("ngForOf",dt(21,pE)),g(6),y("ngForOf",dt(22,hE)),g(8),ve("ngModel",i.queryText),g(4),y("ngIf",i.papersFoundInChromaDB.metadatas),g(),y("ngIf",i.papersFoundInChromaDB.metadatas),g(5),y("ngIf",i.isProcessingQuery&&!i.llmResponse),g(),y("ngIf",i.llmResponse)}}function sS(e,n){e&1&&(f(0,"div",76)(1,"p"),v(2,"Use the search form to find relevant literature for your clinical case."),p(),f(3,"p"),v(4,"The search parameters and results will appear here once you perform a search."),p()())}function lS(e,n){if(e&1){let t=U();f(0,"div",14,0)(2,"div",15),k("mousedown",function(r){E(t);let o=rt(1),a=m();return S(a.startDragging(r,o))}),f(3,"h3"),v(4,"Input Overview"),p(),f(5,"button",16),k("click",function(){E(t);let r=m();return S(r.toggleInfoWindow())}),v(6,"\xD7"),p()(),f(7,"div",17),P(8,aS,85,23,"div",18),f(9,"div",19)(10,"button",20),k("click",function(){E(t);let r=m();return S(r.onModifySearch())}),v(11,"Submit Query"),p()()(),P(12,sS,5,0,"div",21),p()}if(e&2){let t=m();g(8),y("ngIf",t.hasSearchCriteria),g(4),y("ngIf",!t.hasSearchCriteria)}}function cS(e,n){e&1&&(f(0,"div",77)(1,"h2"),v(2,"Genitourinary Cancer Evidence Database"),p(),f(3,"p"),v(4,"Use the search form above to find relevant literature for your clinical case."),p()())}function dS(e,n){e&1&&(f(0,"div",84)(1,"div",85),pe(2,"span",86),f(3,"p"),v(4,"Loading data overview..."),p()()())}function uS(e,n){if(e&1&&(f(0,"div",87)(1,"p"),v(2),p()()),e&2){let t=m(2);g(2),Z(t.error)}}function pS(e,n){e&1&&(f(0,"p",99),v(1,"No geographical data available."),p())}function hS(e,n){if(e&1&&(f(0,"li",106)(1,"span",107),v(2),p(),f(3,"span",108),v(4),p(),pe(5,"div",109),p()),e&2){let t=n.$implicit,i=m(5);g(2),Z(t.name),g(2),Z(t.count),g(),gn("width",i.getCountryPercentage(t.count),"%")}}function fS(e,n){if(e&1){let t=U();f(0,"div",100)(1,"div",101)(2,"app-globe",102),k("countryClicked",function(r){E(t);let o=m(4);return S(o.onCountryClicked(r))}),p()(),f(3,"div",103)(4,"h3"),v(5,"Top Countries"),p(),f(6,"ul",104),P(7,hS,6,4,"li",105),p()()()}if(e&2){let t=m(4);g(2),y("countryData",t.countryData),g(5),y("ngForOf",t.getTopCountries(5))}}function mS(e,n){if(e&1&&(f(0,"div",96)(1,"div",12)(2,"h2"),v(3,"Geographical Overview"),p(),P(4,pS,2,0,"p",97),p(),P(5,fS,8,2,"div",98),p()),e&2){let t=m(3);g(4),y("ngIf",!t.hasCountryData),g(),y("ngIf",t.hasCountryData)}}function gS(e,n){if(e&1&&(f(0,"option",53),v(1),tn(2,"titlecase"),p()),e&2){let t=n.$implicit;y("value",t),g(),Z($n(2,2,t))}}function _S(e,n){if(e&1){let t=U();f(0,"div",96)(1,"div",12)(2,"h2"),v(3,"Publication Year Overview"),p(),f(4,"div",110)(5,"label",111),v(6,"Chart Type:"),p(),f(7,"select",112),xe("ngModelChange",function(r){E(t);let o=m(3);return ye(o.yearChartType,r)||(o.yearChartType=r),S(r)}),k("change",function(){E(t);let r=m(3);return S(r.updateVisualizations())}),P(8,gS,3,4,"option",52),p()()(),f(9,"app-chart",113),k("elementClicked",function(r){E(t);let o=m(3);return S(o.onChartElementClicked(r))}),p()()}if(e&2){let t=m(3);g(7),ve("ngModel",t.yearChartType),g(),y("ngForOf",t.chartTypes),g(),y("data",t.yearChartData)("chartType",t.yearChartType)("title","Publications by Year")("xLabel","Year")("yLabel","Number of Publications")("chartCategory","Year")}}function vS(e,n){if(e&1&&(f(0,"option",53),v(1),tn(2,"titlecase"),p()),e&2){let t=n.$implicit;y("value",t),g(),Z($n(2,2,t))}}function yS(e,n){if(e&1){let t=U();f(0,"div",96)(1,"div",12)(2,"h2"),v(3,"Top Journals"),p(),f(4,"div",110)(5,"label",114),v(6,"Chart Type:"),p(),f(7,"select",115),xe("ngModelChange",function(r){E(t);let o=m(3);return ye(o.journalChartType,r)||(o.journalChartType=r),S(r)}),k("change",function(){E(t);let r=m(3);return S(r.updateVisualizations())}),P(8,vS,3,4,"option",52),p()()(),f(9,"app-chart",113),k("elementClicked",function(r){E(t);let o=m(3);return S(o.onChartElementClicked(r))}),p()()}if(e&2){let t=m(3);g(7),ve("ngModel",t.journalChartType),g(),y("ngForOf",t.chartTypes),g(),y("data",t.journalChartData)("chartType",t.journalChartType)("title","Publications by Journal")("xLabel","Journal")("yLabel","Number of Publications")("chartCategory","Journal")}}function xS(e,n){if(e&1){let t=U();f(0,"div",117)(1,"h3"),v(2),p(),f(3,"app-chart",118),k("elementClicked",function(r){E(t);let o=m(4);return S(o.onChartElementClicked(r))}),p()()}if(e&2){let t=n.$implicit;g(2),Z(t.name),g(),y("data",t.data)("chartType",t.chartType)("title",t.name)("xLabel","")("yLabel","")("zLabel","")("chartCategory",t.name)}}function bS(e,n){if(e&1&&(f(0,"div",96)(1,"div",12)(2,"h2"),v(3,"Clinical Metadata Analysis"),p()(),P(4,xS,4,8,"div",116),p()),e&2){let t=m(3);g(4),y("ngForOf",t.metadataGroups)}}function CS(e,n){if(e&1){let t=U();f(0,"div",88)(1,"div",89)(2,"h2"),v(3,"Summary"),p(),f(4,"div",90)(5,"p"),v(6),p(),f(7,"p"),v(8),p(),f(9,"p"),v(10),p()(),f(11,"div",91)(12,"h3"),v(13,"Show/Hide Sections"),p(),f(14,"div",92)(15,"label",93)(16,"input",94),xe("ngModelChange",function(r){E(t);let o=m(2);return ye(o.showGeographicalOverview,r)||(o.showGeographicalOverview=r),S(r)}),p(),v(17," Geographical Overview "),p(),f(18,"label",93)(19,"input",94),xe("ngModelChange",function(r){E(t);let o=m(2);return ye(o.showYearOverview,r)||(o.showYearOverview=r),S(r)}),p(),v(20," Overview by Year "),p(),f(21,"label",93)(22,"input",94),xe("ngModelChange",function(r){E(t);let o=m(2);return ye(o.showJournalOverview,r)||(o.showJournalOverview=r),S(r)}),p(),v(23," Top Journals "),p(),f(24,"label",93)(25,"input",94),xe("ngModelChange",function(r){E(t);let o=m(2);return ye(o.showClinicalMetadataAnalysis,r)||(o.showClinicalMetadataAnalysis=r),S(r)}),p(),v(26," Clinical Metadata Analysis "),p()()(),f(27,"button",67),k("click",function(){E(t);let r=m(2);return S(r.viewPaperDetails(r.prepareFilteredItemsForView(r.filteredItems)))}),v(28,"View Details of Filtered Papers"),p()(),P(29,mS,6,2,"div",95)(30,_S,10,8,"div",95)(31,yS,10,8,"div",95)(32,bS,5,1,"div",95),p()}if(e&2){let t=m(2);g(6),X("Total documents: ",t.filteredItems.length,""),g(2),Zo("Years covered: ",t.yearStats.min," - ",t.yearStats.max,""),g(2),X("Unique journals: ",t.uniqueJournalCount,""),g(6),ve("ngModel",t.showGeographicalOverview),g(3),ve("ngModel",t.showYearOverview),g(3),ve("ngModel",t.showJournalOverview),g(3),ve("ngModel",t.showClinicalMetadataAnalysis),g(4),y("ngIf",t.showGeographicalOverview),g(),y("ngIf",t.showYearOverview),g(),y("ngIf",t.showJournalOverview),g(),y("ngIf",t.showClinicalMetadataAnalysis)}}function wS(e,n){if(e&1){let t=U();f(0,"div",78)(1,"div",79)(2,"button",80),k("click",function(){E(t);let r=m();return r.processData(),S(r.updateVisualizations())}),v(3,"Refresh Data"),p()(),P(4,dS,5,0,"div",81)(5,uS,3,1,"div",82)(6,CS,33,12,"div",83),p()}if(e&2){let t=m();g(4),y("ngIf",t.isLoading),g(),y("ngIf",t.error),g(),y("ngIf",!t.isLoading&&!t.error)}}function MS(e,n){if(e&1){let t=U();f(0,"div",119)(1,"div",120)(2,"div",121)(3,"h3"),v(4,"Detailed Paper View"),p(),f(5,"button",122),k("click",function(){E(t);let r=m();return S(r.closePaperDetailModal())}),v(6,"\xD7"),p()(),f(7,"div",123),pe(8,"app-paper-detail-view"),p()()()}}var cl=class e{constructor(n,t,i,r,o){this.databaseService=n;this.http=t;this.llmService=i;this.backendService=r;this.paperDataService=o}searchCriteria=null;databaseItems=[];cancerTypeSelected="";initialAvailableFilters=new Map;activeFiltersSidebar;papersFoundInChromaDB=[];activeFilters=new Map;availableFilters=new Map;hasSearchCriteria=!1;cancerType="";patientDetails={};queryText="";filteredItems=[];filterChanged=new te;modifySearch=new te;clearSearch=new te;showGeographicalOverview=!0;showYearOverview=!0;showJournalOverview=!0;showClinicalMetadataAnalysis=!0;yearCounts=[];topJournals=[];uniqueJournalCount=0;yearStats={min:0,max:0};isLoading=!0;error=null;yearChartData=[];journalChartData=[];diseaseChartData=[];yearChartType="bar";journalChartType="bar";diseaseChartType="3d-scatter";chartTypes=["bar","line","area","pie","scatter","bubble"];metadataGroups=[];countryData={};hasCountryData=!1;showPaperDetailModal=!1;llmResponse="";isProcessingQuery=!1;isDragging=!1;currentX=0;currentY=0;initialX=0;initialY=0;xOffset=0;yOffset=0;showInfoWindow=!0;editingDetail={};viewPaperDetails(n){n&&(this.paperDataService.changePaperData(n),this.showPaperDetailModal=!0)}closePaperDetailModal(){this.showPaperDetailModal=!1}fieldOptions={gender:[{value:"Female",label:"Female"},{value:"Male",label:"Male"},{value:"Unknown",label:"Unknown"}],ecog:[{value:"0",label:"0 - Fully active"},{value:"1",label:"1 - Restricted in strenuous activity"},{value:"2",label:"2 - Ambulatory and capable of self-care"},{value:"3",label:"3 - Capable of only limited self-care"},{value:"4",label:"4 - Completely disabled"},{value:"5",label:"5 - Deceased"}],ethnicity:[{value:"Caucasian",label:"Caucasian"},{value:"African American",label:"African American"},{value:"Asian",label:"Asian"},{value:"Hispanic",label:"Hispanic"},{value:"Other",label:"Other"}],diseaseSensitivity:[{value:"Hormone-sensitive",label:"Hormone-sensitive"},{value:"Castration-resistant",label:"Castration-resistant"},{value:"Unknown",label:"Unknown"}],tStage:[{value:"TX",label:"TX"},{value:"T0",label:"T0"},{value:"Tis",label:"Tis"},{value:"T1",label:"T1"},{value:"T2",label:"T2"},{value:"T3",label:"T3"},{value:"T4",label:"T4"}],nStage:[{value:"NX",label:"NX"},{value:"N0",label:"N0"},{value:"N1",label:"N1"},{value:"N2",label:"N2"}],mStage:[{value:"MX",label:"MX"},{value:"M0",label:"M0"},{value:"M1",label:"M1"}],stagingGroup:[{value:"0",label:"0"},{value:"IA",label:"IA"},{value:"IB",label:"IB"},{value:"IIA",label:"IIA"},{value:"IIB",label:"IIB"},{value:"III",label:"III"},{value:"IV",label:"IV"}],metastasisLocation:[{value:"No metastasis",label:"No metastasis"},{value:"Bone only",label:"Bone only"},{value:"Lymph only",label:"Lymph only"},{value:"Bone and lymph only",label:"Bone and lymph only"},{value:"Other than bone and lymph",label:"Other than bone and lymph node"}],gleasonScore:[{value:"2",label:"2"},{value:"3",label:"3"},{value:"4",label:"4"},{value:"5",label:"5"},{value:"6",label:"6"},{value:"7",label:"7"},{value:"7A",label:"7A (3+4)"},{value:"7B",label:"7B (4+3)"},{value:"8",label:"8"},{value:"9",label:"9"},{value:"10",label:"10"}]};initializeFilters(){if(this.availableFilters&&this.availableFilters.size>0&&(!this.activeFilters||this.activeFilters.size===0)){let n=new Map;this.availableFilters.forEach((t,i)=>{n.set(i,new Set(t))}),this.activeFilters=n}}ngOnInit(){this.loadDatabaseContents()}ngOnChanges(n){let t=!1;n.initialAvailableFilters&&this.initialAvailableFilters?.size>0&&(this.availableFilters=new Map,this.initialAvailableFilters.forEach((i,r)=>{this.availableFilters.set(r,new Set(i))}),this.initializeFilters(),this.databaseItems?.length>0&&(t=!0)),n.searchCriteria&&n.searchCriteria.currentValue&&(this.processSearchCriteria(),this.databaseItems?.length>0&&this.availableFilters.size>0&&(t=!0)),n.databaseItems&&(this.availableFilters.size===0&&this.initialAvailableFilters?.size>0&&(this.availableFilters=new Map,this.initialAvailableFilters.forEach((i,r)=>{this.availableFilters.set(r,new Set(i))}),this.initializeFilters()),(this.availableFilters.size>0||n.databaseItems.currentValue?.length>0)&&this.updateAvailableFilters(),t=!0),t&&(this.availableFilters.size>0?(this.processData(),this.updateVisualizations()):(this.yearCounts=[],this.topJournals=[],this.uniqueJournalCount=0,this.yearStats={min:0,max:0},this.countryData={},this.hasCountryData=!1,this.metadataGroups&&this.metadataGroups.forEach(i=>i.data=[]),this.updateVisualizations()))}filterDatabaseItems(){return this.databaseItems?.length?this.databaseItems.filter(n=>{if(!n.metadata)return!1;for(let[t,i]of this.activeFilters.entries())if(i instanceof Set){let r=i;if(r.size===0)continue;let o=!1;if(r.has("(no data)")){let a=!1;switch(t){case"Journal":a=!n.metadata.journal||n.metadata.journal.trim()==="";break;case"Country":let s=n.metadata.country||n.metadata.countryMainAuthor;a=!s||s.trim()==="";break;default:let l=this.availableFilters.get(t);if(l&&l.size>0){let c=!1;for(let d of l)if(d!=="(no data)"&&n.metadata[d]==="TRUE"){c=!0;break}c||(a=!0)}else a=!0;break}a&&(o=!0)}if(!o){let a=!1;for(let s of r)if(s!=="(no data)"){switch(t){case"Journal":n.metadata.journal===s&&(a=!0);break;case"Country":let l=n.metadata.country||n.metadata.countryMainAuthor;(l?this.getCountryNameFromCode(l):null)===s&&(a=!0);break;default:n.metadata[s]==="TRUE"&&(a=!0);break}if(a)break}a&&(o=!0)}if(!o)return!1}else if(t==="Year"&&typeof i=="object"&&i!==null){let r=i,o=n.metadata.year?parseInt(n.metadata.year.toString(),10):null;if(o===null&&(r.start!==null||r.end!==null)||o!==null&&(r.start!==null&&o<r.start||r.end!==null&&o>r.end))return!1}return!0}):[]}updateAvailableFilters(){if(!this.databaseItems?.length||this.availableFilters.size===0)return;["Year","Journal","Country"].forEach(o=>{this.availableFilters.has(o)?this.availableFilters.get(o)?.clear():(console.warn(`Dynamic category '${o}' was not pre-defined in initialAvailableFilters.`),this.availableFilters.set(o,new Set))});let t=this.availableFilters.get("Year"),i=this.availableFilters.get("Journal"),r=this.availableFilters.get("Country");this.databaseItems.forEach(o=>{if(o.metadata){o.metadata.year&&t&&t.add(o.metadata.year.toString()),o.metadata.journal&&i&&i.add(o.metadata.journal);let a=o.metadata.country||o.metadata.countryMainAuthor;if(a&&typeof a=="string"&&r){let s=this.getCountryNameFromCode(a);s&&r.add(s)}}})}onModifySearch(){this.searchCriteria&&this.queryText&&(this.searchCriteria.query=this.queryText),this.modifySearch.emit(),this.llmResponse="",this.isProcessingQuery=!0,this.papersFoundInChromaDB=[],this.backendService.getPapersFromChromaDB(this.queryText).subscribe({next:n=>{let t=n.queryResults;t&&t.documents&&t.documents[0]?this.papersFoundInChromaDB=t:this.papersFoundInChromaDB=[],this.llmService.streamResponse(this.queryText,t,this.patientDetails,"").subscribe({next:i=>{typeof i=="string"?this.llmResponse+=i:i&&i.partialText!==void 0?this.llmResponse=i.partialText:i&&i.text!==void 0&&(this.llmResponse+=i.text)},error:i=>{console.error("Error calling LLM service:",i),this.llmResponse="Error processing your query with LLM.",this.isProcessingQuery=!1},complete:()=>{this.isProcessingQuery=!1}})},error:n=>{console.error("Error getting papers from ChromaDB:",n),this.llmResponse="Error fetching relevant papers for your query.",this.papersFoundInChromaDB=[],this.isProcessingQuery=!1}})}onClearSearch(){this.hasSearchCriteria=!1,this.queryText="",this.cancerType="",this.patientDetails={},this.clearAllFilters(),this.clearSearch.emit()}getTopCountries(n=5){return Object.entries(this.countryData).map(([i,r])=>({name:i,count:r})).sort((i,r)=>r.count-i.count).slice(0,n)}getCountryPercentage(n){let t=Math.max(...Object.values(this.countryData));return t===0?0:n/t*100}getPatientDetailKeys(){return Object.keys(this.patientDetails)}formatLabel(n){switch(n){case"ecog":return"ECOG Status";case"psa":return"PSA";case"adt":return"ADT";case"arpi":return"ARPI";case"ddr":return"DDR";case"timePointOfDiagnosis":return"Time Point of Diagnosis";case"alpLevel":return"ALP Level";default:let t=n.replace(/([A-Z])/g," $1");return t.charAt(0).toUpperCase()+t.slice(1)}}processSearchCriteria(){if(!this.searchCriteria){this.hasSearchCriteria=!1;return}this.hasSearchCriteria=!0;let n=this.searchCriteria.patientInfo;this.cancerType=n.cancerType,n.cancerType==="Prostate Cancer"?this.patientDetails={gender:n.gender,age:n.age,ecog:n.ecog,ethnicity:n.ethnicity,diseaseSensitivity:n.diseaseSensitivity,tStage:n.tStage,nStage:n.nStage,mStage:n.mStage,stagingGroup:n.stagingGroup,metastasisLocation:n.metastasisLocation,timePointOfDiagnosis:n.timePointOfDiagnosis,adt:n.adt,arpi:n.arpi,tripleTherapy:n.tripleTherapy,extraTreatmentHistory:n.extraTreatmentHistory,ddr:n.ddr,genesInvolved:n.genesInvolved,variants:n.variants,psmaLevel:n.psmaLevel,alpLevel:n.alpLevel,gleasonScore:n.gleasonScore,histologicVariants:n.histologicVariants,highVolume:n.highVolume,highRisk:n.highRisk}:this.patientDetails={gender:n.gender,age:n.age,ecog:n.ecog,ethnicity:n.ethnicity},this.queryText=this.searchCriteria.query}loadDatabaseContents(){this.isLoading=!0,this.error=null,this.databaseService.getDatabaseContents().subscribe({next:n=>{this.databaseItems=n,this.processData(),this.prepareChartData(),this.prepareMetadataCharts(),this.prepare3DChartData(),this.isLoading=!1,this.generateCountryStatistics()},error:n=>{console.error("Error fetching database contents:",n),this.error=`Error accessing database: ${n.message||"Unknown error"}`,this.isLoading=!1}})}processData(){if(this.filteredItems=this.filterDatabaseItems(),!this.filteredItems.length){this.yearCounts=[],this.topJournals=[],this.uniqueJournalCount=0,this.yearStats={min:0,max:0};return}let n=new Map,t=new Map,i=[];this.filteredItems.forEach(r=>{if(r.metadata){if(r.metadata.year){let o=+r.metadata.year;isNaN(o)||(i.push(o),n.set(o,(n.get(o)||0)+1))}if(r.metadata.journal){let o=r.metadata.journal;t.set(o,(t.get(o)||0)+1)}}}),i.length>0&&(this.yearStats.min=Math.min(...i),this.yearStats.max=Math.max(...i)),this.yearCounts=[...n.entries()].map(([r,o])=>({year:r,count:o})).sort((r,o)=>o.year-r.year),this.uniqueJournalCount=t.size,this.topJournals=[...t.entries()].map(([r,o])=>({name:r,count:o})).sort((r,o)=>o.count-r.count).slice(0,10)}prepareChartData(){this.yearChartData=this.yearCounts.slice(0,15).map(n=>({x:n.year.toString(),y:n.count})).sort((n,t)=>n.x.localeCompare(t.x)),this.journalChartData=this.topJournals.slice(0,7).map(n=>({x:n.name,y:n.count}))}prepareMetadataCharts(){let n=[{name:"Disease Sensitivity",filterKey:"diseaseSensitivity",fields:["Disease sensitivity - Castration-resistant","Disease sensitivity - Hormone-sensitive","Disease sensitivity - Unknown"],chartType:"pie"},{name:"ECOG Status ",filterKey:"ecog",fields:["ECOG0","ECOG1","ECOG2","ECOG3","ECOG4","ECOG5"],chartType:"bar"},{name:"Ethnicity",filterKey:"ethnicity",fields:["Ethnicity-African American","Ethnicity-Asian","Ethnicity-Caucasian","Ethnicity-Hispanic","Ethnicity-Other"],chartType:"pie"},{name:"T Staging",filterKey:"tStage",fields:["T0","T1","T2","T3","T4","TX","Tis"],chartType:"bar"},{name:"N Staging",filterKey:"nStage",fields:["N0","N1","N2","NX"],chartType:"bar"},{name:"M Staging",filterKey:"mStage",fields:["M0","M1","MX"],chartType:"pie"},{name:"Metastasis Location",filterKey:"metastasisLocation",fields:["Metastasis - bone only","Metastasis bone and lymph only","Metastasis lymph only","Metastasis other than bone and lymph node"],chartType:"pie"},{name:"Overall Staging",filterKey:"stagingGroup",fields:["Staging Group 0","Staging Group IA","Staging Group IB","Staging Group II","Staging Group III","Staging Group IV"],chartType:"bar"},{name:"Risk Classification",filterKey:"highRisk",fields:["High Risk","High Volume"],chartType:"bar"}];this.metadataGroups=[];let t=this.filterDatabaseItems();n.forEach(i=>{let r=new Map,o=0;t.forEach(s=>{if(s.metadata){let l=!1;i.fields.forEach(c=>{s.metadata[c]==="TRUE"&&(r.set(c,(r.get(c)||0)+1),l=!0)}),l&&o++}});let a=[];i.fields.forEach(s=>{let l=r.get(s)||0;if(l>0){let c=s;a.push({x:c,y:l,label:`${c}: ${l} docs (${Math.round(l/o*100)}%)`})}}),a.length>0&&this.metadataGroups.push({name:i.name,filterKey:i.filterKey,fields:i.fields,data:a,chartType:i.chartType})})}prepare3DChartData(){let n=["Disease sensitivity - Unknown","Disease sensitivity - Hormone-sensitive","Disease sensitivity - Castration-resistant"],t=["ECOG0","ECOG1","ECOG2","ECOG3","ECOG4","ECOG5"],i=Array(n.length).fill(0).map(()=>Array(t.length).fill(0));this.filterDatabaseItems().forEach(o=>{if(o.metadata){let a=-1,s=-1;n.forEach((l,c)=>{o.metadata[l]==="TRUE"&&(a=c)}),t.forEach((l,c)=>{o.metadata[l]==="TRUE"&&(s=c)}),a>=0&&s>=0&&i[a][s]++}}),this.diseaseChartData=[];for(let o=0;o<n.length;o++)for(let a=0;a<t.length;a++)if(i[o][a]>0){let s=n[o];this.diseaseChartData.push({x:o,y:a,z:i[o][a],label:`${s}, ECOG${a}: ${i[o][a]} patients`})}}generateCountryStatistics(){this.countryData={},this.hasCountryData=!1,this.filterDatabaseItems().forEach(t=>{let i=t.metadata?.country||t.metadata?.countryMainAuthor;if(i&&typeof i=="string"){let r=this.getCountryNameFromCode(i);r&&(this.countryData[r]=(this.countryData[r]||0)+1,this.hasCountryData=!0)}})}getCountryNameFromCode(n){let t={US:"USA",GB:"United Kingdom",UK:"United Kingdom",DE:"Germany",FR:"France",IT:"Italy",ES:"Spain",CN:"China",JP:"Japan",IN:"India",BR:"Brazil",CA:"Canada",AU:"Australia",RU:"Russia",NL:"Netherlands",SE:"Sweden",CH:"Switzerland",KR:"South Korea"};return t[n]?t[n]:(n.length===2,n)}onCountryClicked(n){this.handleFilterChange({category:"Country",value:n,isChecked:!0})}getCountryCodeFromName(n){return{"United States":"US","United Kingdom":"GB",Germany:"DE",France:"FR",Italy:"IT",Spain:"ES",China:"CN",Japan:"JP",India:"IN",Brazil:"BR",Canada:"CA",Australia:"AU",Russia:"RU",Netherlands:"NL",Sweden:"SE",Switzerland:"CH","South Korea":"KR"}[n]||n}onSetDragForGeoPanel(n){}startDragging(n,t){n.target instanceof HTMLElement&&n.target.classList.contains("close-btn")||(this.isDragging=!0,this.initialX=n.clientX-this.xOffset,this.initialY=n.clientY-this.yOffset,document.addEventListener("mousemove",this.drag.bind(this)),document.addEventListener("mouseup",this.stopDragging.bind(this)))}drag(n){if(this.isDragging){n.preventDefault(),this.currentX=n.clientX-this.initialX,this.currentY=n.clientY-this.initialY,this.xOffset=this.currentX,this.yOffset=this.currentY;let t=document.querySelector(".draggable-window");t&&(t.style.transform=`translate3d(${this.currentX}px, ${this.currentY}px, 0)`)}}stopDragging(){this.isDragging=!1,document.removeEventListener("mousemove",this.drag.bind(this)),document.removeEventListener("mouseup",this.stopDragging.bind(this))}ngOnDestroy(){document.removeEventListener("mousemove",this.drag.bind(this)),document.removeEventListener("mouseup",this.stopDragging.bind(this))}editPatientDetail(n){this.isDragging||(this.editingDetail[n]=!0)}savePatientDetail(n){this.editingDetail[n]=!1,this.modifySearch.emit()}getFieldType(n){switch(n){case"age":return"number";case"ecog":case"gender":case"ethnicity":case"diseaseSensitivity":case"tStage":case"nStage":case"mStage":case"stagingGroup":case"metastasisLocation":case"gleasonScore":return"select";case"adt":case"arpi":case"ddr":case"tripleTherapy":case"highRisk":case"highVolume":return"checkbox";default:return"text"}}toggleCheckbox(n){this.patientDetails[n]=!this.patientDetails[n],this.savePatientDetail(n)}getFieldOptions(n){return this.fieldOptions[n]||[]}handleFilterChange(n){let{category:t,value:i,target:r,isChecked:o}=n;if(t==="Year"){let a=new Map(this.activeFilters);a.set("Year",i),this.activeFilters=a}else{let a=this.activeFilters.get(t),s=a?new Set(a):new Set;o?s.add(i):s.delete(i);let l=new Map(this.activeFilters);l.set(t,s),this.activeFilters=l}this.processData(),this.updateAvailableFilters(),this.updateVisualizations(),this.filterChanged.emit(this.activeFilters)}clearAllFilters(){let n=new Map;this.availableFilters&&this.availableFilters.forEach((t,i)=>{i==="Country"||i==="Journal"?n.set(i,new Set):i==="Year"?n.set(i,{start:null,end:null}):n.set(i,new Set(t))}),n.has("Country")||n.set("Country",new Set),n.has("Journal")||n.set("Journal",new Set),n.has("Year")||n.set("Year",{start:null,end:null}),this.activeFilters=n,this.patientDetails={},this.activeFiltersSidebar&&this.activeFiltersSidebar.resetInputFields(),this.processData(),this.updateVisualizations()}updateVisualizations(){this.prepareChartData(),this.prepareMetadataCharts(),this.prepare3DChartData(),this.generateCountryStatistics()}toggleSectionVisibility(n){switch(n){case"geographical":this.showGeographicalOverview=!this.showGeographicalOverview;break;case"year":this.showYearOverview=!this.showYearOverview;break;case"journal":this.showJournalOverview=!this.showJournalOverview;break;case"clinical":this.showClinicalMetadataAnalysis=!this.showClinicalMetadataAnalysis;break}}createPaperArrayFromRelevantPapers(){let n=[];for(let t=0;t<this.papersFoundInChromaDB.metadatas[0].length;t++){[].push(this.papersFoundInChromaDB.metadatas[0][t]);let r={title:this.papersFoundInChromaDB.metadatas[0][t].titles,journal:this.papersFoundInChromaDB.metadatas[0][t].journal,year:this.papersFoundInChromaDB.metadatas[0][t].year,country:this.papersFoundInChromaDB.metadatas[0][t].countryMainAuthor,openAlexId:this.papersFoundInChromaDB.metadatas[0][t].openAlex_id,item:this.papersFoundInChromaDB.metadatas[0][t]};n.push(r)}return n}preparePapersForView(n){let t=[];for(let i=0;i<n.length;i++){let r={title:n[i].titles,journal:n[i].journal,year:n[i].year,country:n[i].countryMainAuthor,openAlexId:n[i].openAlex_id,item:n[i]};t.push(r)}return t}prepareFilteredItemsForView(n){let t=[];for(let i=0;i<n.length;i++){let r={title:n[i].metadata.titles,journal:n[i].metadata.journal,year:n[i].metadata.year,country:n[i].metadata.countryMainAuthor,openAlexId:n[i].metadata.openAlex_id,item:n[i]};t.push(r)}return t}toggleInfoWindow(){this.showInfoWindow=!this.showInfoWindow}onInitialFiltersApplied(n){n&&n.size>0&&(this.activeFilters=new Map(n),this.filterChanged.emit(this.activeFilters),this.processData(),this.updateVisualizations())}onChartElementClicked(n){let{category:t,value:i,originalValue:r}=n,o=i,a=!1,s=this.metadataGroups.find(l=>l.name===t);if(t==="Year"){let l=o;if(isNaN(l))return;{(!this.activeFilters.has("Year")||typeof this.activeFilters.get("Year")!="object")&&this.activeFilters.set("Year",{start:null,end:null});let c=this.activeFilters.get("Year");(c.start!==l||c.end!==l)&&(this.activeFilters.set("Year",{start:l,end:l}),a=!0)}}else if(s){let l=s.filterKey||t;this.activeFilters.has(l)||this.activeFilters.set(l,new Set);let c=this.activeFilters.get(l);c&&(c.has(o)&&c.size===1||(c.clear(),c.add(o),a=!0))}else{this.activeFilters.has(t)||this.activeFilters.set(t,new Set);let l=this.activeFilters.get(t);l&&(l.has(o)?l.delete(o):l.add(o),a=!0)}a&&(this.activeFilters=new Map(this.activeFilters),this.filterChanged.emit(new Map(this.activeFilters)),this.processData(),this.updateVisualizations())}setParametersAsFilters(){let n=new Map,t=this.cancerType?String(this.cancerType).trim():"";t!==""&&this.availableFilters.has("cancer_type")&&n.set("cancer_type",new Set([t]));for(let[i,r]of Object.entries(this.patientDetails))if(this.availableFilters.has(i)){let o=r==null?"":String(r).trim();o==="Not specified"?n.set(i,new Set):o!==""&&n.set(i,new Set([o]))}this.activeFilters=n,this.hasSearchCriteria=!0,this.processData(),this.updateVisualizations(),this.filterChanged.emit(this.activeFilters)}debounce(n,t){let i;return(...r)=>{clearTimeout(i),i=setTimeout(()=>{n(...r)},t)}}static \u0275fac=function(t){return new(t||e)(V(qt),V(kt),V(Zt),V(nr),V(Fn))};static \u0275cmp=Ce({type:e,selectors:[["app-database-overview"]],viewQuery:function(t,i){if(t&1&&en($o,5),t&2){let r;bt(r=Ct())&&(i.activeFiltersSidebar=r.first)}},inputs:{searchCriteria:"searchCriteria",databaseItems:"databaseItems",cancerTypeSelected:"cancerTypeSelected",initialAvailableFilters:"initialAvailableFilters"},outputs:{filterChanged:"filterChanged",modifySearch:"modifySearch",clearSearch:"clearSearch"},standalone:!0,features:[Ie([qt,Zt,nr,Fn]),Ae,Me],decls:14,vars:8,consts:[["infoWindow",""],["editFieldDS",""],["editField",""],[1,"overview-content-wrapper"],[1,"left-section"],[3,"filterApplied","filtersCleared","initialFiltersApplied","availableFilters","activeFilters","hasSearchCriteria","isLoading"],[1,"container"],["class","info-section draggable-window",4,"ngIf"],[1,"content-area"],["class","welcome",4,"ngIf"],["class","search-results",4,"ngIf"],[1,"right-section"],[1,"section-header"],["class","modal-overlay",4,"ngIf"],[1,"info-section","draggable-window"],[1,"window-header",3,"mousedown"],[1,"close-btn",3,"click"],[1,"info-content"],["class","search-summary",4,"ngIf"],[1,"search-actions"],[1,"modify-search-btn",3,"click"],["class","welcome-info",4,"ngIf"],[1,"search-summary"],[1,"overview-card"],[1,"card-section"],[1,"cancer-type-badge"],[1,"patient-details"],[1,"group-header"],[1,"detail-group"],["class","detail-item",4,"ngFor","ngForOf"],[1,"detail-item"],[1,"detail-label"],[1,"detail-value-container",3,"click"],[4,"ngIf","ngIfElse"],[1,"card-section","action-buttons-section"],[1,"set-params-btn",3,"click"],[1,"query-editor"],["placeholder","Enter your clinical question here","rows","3",1,"query-text-edit",3,"ngModelChange","ngModel"],["class","view-details-action",4,"ngIf"],["class","papers-found",4,"ngIf"],[1,"llm-response"],["class","loading-indicator",4,"ngIf"],["class","response-content",4,"ngIf"],[3,"ngSwitch"],[1,"detail-value","editable"],[1,"edit-icon"],["type","number","class","detail-input",3,"min","max","ngModel","ngModelChange","blur","keyup.enter",4,"ngSwitchCase"],["class","detail-input",3,"ngModel","ngModelChange","blur","change",4,"ngSwitchCase"],["type","text","class","detail-input",3,"ngModel","ngModelChange","blur","keyup.enter",4,"ngSwitchDefault"],["type","number",1,"detail-input",3,"ngModelChange","blur","keyup.enter","min","max","ngModel"],[1,"detail-input",3,"ngModelChange","blur","change","ngModel"],["value",""],[3,"value",4,"ngFor","ngForOf"],[3,"value"],["type","text",1,"detail-input",3,"ngModelChange","blur","keyup.enter","ngModel"],["class","checkbox-display",3,"click",4,"ngSwitchCase"],["class","detail-value editable",4,"ngSwitchDefault"],[1,"checkbox-display",3,"click"],["type","checkbox",1,"checkbox-input",3,"click","checked"],["class","checkbox-edit",4,"ngSwitchCase"],[1,"checkbox-edit"],["type","checkbox",1,"checkbox-input",3,"ngModelChange","change","ngModel"],["class","checkbox-display",3,"click",4,"ngIf"],["class","detail-value editable",4,"ngIf"],["class","checkbox-edit",4,"ngIf"],["type","text","class","detail-input",3,"ngModel","ngModelChange","blur","keyup.enter",4,"ngIf"],[1,"view-details-action"],[1,"view-details-btn",3,"click"],[1,"papers-found"],["class","paper-item",4,"ngFor","ngForOf"],[1,"paper-item"],[1,"paper",3,"click"],[1,"loading-indicator"],["diameter","30"],[1,"response-content"],[3,"innerHTML"],[1,"welcome-info"],[1,"welcome"],[1,"search-results"],[1,"toolbar"],[1,"refresh-btn",3,"click"],["class","loading",4,"ngIf"],["class","error-message",4,"ngIf"],["class","overview-container",4,"ngIf"],[1,"loading"],[1,"loading-container"],[1,"spinner"],[1,"error-message"],[1,"overview-container"],[1,"summary"],[1,"summary-stats"],[1,"section-toggles"],[1,"toggle-options"],[1,"toggle-option"],["type","checkbox",3,"ngModelChange","ngModel"],["class","overview-section",4,"ngIf"],[1,"overview-section"],["class","no-data-message",4,"ngIf"],["class","geo-overview-container",4,"ngIf"],[1,"no-data-message"],[1,"geo-overview-container"],[1,"globe-container"],[3,"countryClicked","countryData"],[1,"country-stats"],[1,"country-list"],["class","country-item",4,"ngFor","ngForOf"],[1,"country-item"],[1,"country-name"],[1,"country-count"],[1,"country-bar"],[1,"chart-controls"],["for","yearChartType"],["id","yearChartType",3,"ngModelChange","change","ngModel"],[3,"elementClicked","data","chartType","title","xLabel","yLabel","chartCategory"],["for","journalChartType"],["id","journalChartType",3,"ngModelChange","change","ngModel"],["class","metadata-group",4,"ngFor","ngForOf"],[1,"metadata-group"],[3,"elementClicked","data","chartType","title","xLabel","yLabel","zLabel","chartCategory"],[1,"modal-overlay"],[1,"modal-content-wrapper"],[1,"modal-header"],[1,"close-modal-btn",3,"click"],[1,"modal-body"]],template:function(t,i){t&1&&(f(0,"h1"),v(1,"Database Overview"),p(),pe(2,"p"),f(3,"div",3)(4,"div",4)(5,"app-active-filters-sidebar",5),k("filterApplied",function(o){return i.handleFilterChange(o)})("filtersCleared",function(){return i.clearAllFilters()})("initialFiltersApplied",function(o){return i.onInitialFiltersApplied(o)}),p()(),f(6,"div",6),P(7,lS,13,2,"div",7),p(),f(8,"div",8),P(9,cS,5,0,"div",9)(10,wS,7,3,"div",10),p(),f(11,"div",11),pe(12,"div",12),p()(),P(13,MS,9,0,"div",13)),t&2&&(g(5),y("availableFilters",i.availableFilters)("activeFilters",i.activeFilters)("hasSearchCriteria",i.hasSearchCriteria)("isLoading",i.isLoading),g(2),y("ngIf",i.showInfoWindow),g(2),y("ngIf",!i.hasSearchCriteria),g(),y("ngIf",i.hasSearchCriteria),g(3),y("ngIf",i.showPaperDetailModal))},dependencies:[Xe,Bt,Mt,cp,dp,up,oa,xn,tl,Fi,pf,ff,Ri,Qr,Uc,qa,za,qc,Gc,Kr,Q0,e_,J0,al,m_,f_,Tu,Pu,h_,$o,ll],styles:[`.overview-content-wrapper[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:flex-start}.container[_ngcontent-%COMP%]{padding:20px 20px 20px 10px;flex-grow:1;display:flex;flex-direction:row;align-items:flex-start}.left-section[_ngcontent-%COMP%]{flex:.5 1 0%;min-width:0;position:sticky;top:20px;height:calc(100vh - 40px)}h1[_ngcontent-%COMP%]{margin-bottom:20px;color:#333;text-align:center;width:100%}.info-section[_ngcontent-%COMP%]{min-width:280px;padding:0;background-color:#fff}.info-content[_ngcontent-%COMP%]{padding:15px}.info-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-top:0;color:#555}.info-content[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{padding-left:20px;margin-bottom:0}.info-content[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{margin-bottom:8px;color:#555}.draggable-window[_ngcontent-%COMP%]{position:fixed;top:100px;right:20px;z-index:1000;background-color:#fff;border-radius:8px;box-shadow:0 4px 12px #00000026;width:400px;max-height:80vh;overflow-y:auto;-webkit-user-select:none;user-select:none}.window-header[_ngcontent-%COMP%]{background-color:#f0f0f0;padding:12px 15px;border-radius:8px 8px 0 0;cursor:move;display:flex;justify-content:space-between;align-items:center;position:sticky;top:0;z-index:1}.window-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;font-size:1.1rem;color:#333;font-weight:500}.close-btn[_ngcontent-%COMP%]{background:none;border:none;font-size:1.5rem;color:#666;cursor:pointer;padding:0 5px;line-height:1}.close-btn[_ngcontent-%COMP%]:hover{color:#333}.search-summary[_ngcontent-%COMP%]{padding:0}.overview-card[_ngcontent-%COMP%]{background:#fff;border-radius:4px}.card-section[_ngcontent-%COMP%]{padding:15px;border-bottom:1px solid #eee}.card-section[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 0 10px;font-size:1rem;color:#444;font-weight:500}.cancer-type-badge[_ngcontent-%COMP%]{display:inline-block;padding:4px 12px;background-color:#e3f2fd;color:#1976d2;border-radius:4px;font-weight:500}.patient-details[_ngcontent-%COMP%]{display:grid;gap:8px}.detail-item[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:4px 0}.detail-label[_ngcontent-%COMP%]{color:#666;font-weight:500}.detail-value[_ngcontent-%COMP%]{color:#333}.query-text-edit[_ngcontent-%COMP%]{width:100%;padding:8px;border:1px solid #ddd;border-radius:4px;resize:vertical;min-height:60px;font-family:inherit}.llm-response[_ngcontent-%COMP%]{background-color:#f8f9fa;border-radius:4px;padding:10px}.response-content[_ngcontent-%COMP%]{line-height:1.5;color:#333}.papers-found[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:8px}.paper-item[_ngcontent-%COMP%]{background-color:#f8f9fa;padding:8px 12px;border-radius:4px;color:#333}.modify-search-btn[_ngcontent-%COMP%], .clear-search-btn[_ngcontent-%COMP%]{padding:8px 16px;border:none;border-radius:4px;cursor:pointer;font-weight:500;transition:background-color .2s}.modify-search-btn[_ngcontent-%COMP%]{background-color:#1976d2;color:#fff}.modify-search-btn[_ngcontent-%COMP%]:hover{background-color:#1565c0}.clear-search-btn[_ngcontent-%COMP%]{background-color:#f44336;color:#fff}.welcome-info[_ngcontent-%COMP%]{color:#666;line-height:1.5}.welcome-info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0 0 10px}.welcome-info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]:last-child{margin-bottom:0}.content-area[_ngcontent-%COMP%]{flex:3 1 0%;min-width:0}.right-section[_ngcontent-%COMP%]{flex:2 1 0%;min-width:0}.welcome[_ngcontent-%COMP%], .search-summary[_ngcontent-%COMP%]{background-color:#f8f9fa;padding:20px;border-radius:6px;box-shadow:0 2px 5px #0000001a;margin-bottom:20px}.toolbar[_ngcontent-%COMP%]{margin-bottom:20px;text-align:right}.refresh-btn[_ngcontent-%COMP%], .chart-toggle-btn[_ngcontent-%COMP%], .modify-search-btn[_ngcontent-%COMP%], .clear-search-btn[_ngcontent-%COMP%]{background-color:#4285f4;color:#fff;border:none;padding:8px 16px;border-radius:4px;cursor:pointer;font-size:14px;margin-right:10px;transition:background-color .3s}.refresh-btn[_ngcontent-%COMP%]:hover, .chart-toggle-btn[_ngcontent-%COMP%]:hover{background-color:#3367d6}.chart-toggle-btn[_ngcontent-%COMP%]{background-color:#34a853}.chart-toggle-btn[_ngcontent-%COMP%]:hover{background-color:#2d8a46}.llm-response[_ngcontent-%COMP%], .papers-found[_ngcontent-%COMP%]{background-color:#f8f9fa;border:1px solid #e0e0e0;border-radius:6px;padding:15px;margin-top:10px;box-shadow:0 1px 3px #0000001a;min-height:100px}.paper-item[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:10px;margin-bottom:10px;padding:10px;background-color:#fff;border:1px solid #e0e0e0;border-radius:4px;box-shadow:0 1px 3px #0000001a}.paper-title[_ngcontent-%COMP%]{font-weight:600;color:#333}.paper-authors[_ngcontent-%COMP%]{color:#666}.paper-journal[_ngcontent-%COMP%]{color:#444}.paper-year[_ngcontent-%COMP%]{color:#999}.loading-indicator[_ngcontent-%COMP%]{display:flex;align-items:center;gap:10px;color:#666}.response-content[_ngcontent-%COMP%]{line-height:1.6;white-space:pre-line}.response-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0 0 10px}.response-content[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#1a73e8;text-decoration:none}.response-content[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{text-decoration:underline}.modify-search-btn[_ngcontent-%COMP%]{background-color:#fbbc05;color:#333}.modify-search-btn[_ngcontent-%COMP%]:hover{background-color:#f9a825}.clear-search-btn[_ngcontent-%COMP%]{background-color:#ea4335}.clear-search-btn[_ngcontent-%COMP%]:hover{background-color:#d32f2f}.loading[_ngcontent-%COMP%], .error-message[_ngcontent-%COMP%], .no-data[_ngcontent-%COMP%]{padding:20px;background-color:#f8f9fa;border-radius:4px;text-align:center;margin-bottom:20px}.error-message[_ngcontent-%COMP%]{background-color:#ffe6e6;color:#d32f2f}.no-data[_ngcontent-%COMP%]{background-color:#f5f5f5;color:#757575}.overview-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:30px}.summary[_ngcontent-%COMP%]{background-color:#f8f9fa;padding:20px;border-radius:6px;box-shadow:0 2px 5px #0000001a}.summary[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:20px}.summary-stats[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:20px}.summary-stats[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;padding:8px 15px;background-color:#f0f8ff;border-radius:6px;box-shadow:0 1px 3px #0000001a;font-weight:500}.section-toggles[_ngcontent-%COMP%]{background-color:#f8f9fa;border-radius:8px;padding:15px;margin-top:10px}.section-toggles[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin-top:0;margin-bottom:15px;font-size:16px;color:#555;font-weight:500}.toggle-options[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:15px}.toggle-option[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;cursor:pointer;padding:8px 12px;background-color:#fff;border-radius:4px;box-shadow:0 1px 3px #0000001a;transition:background-color .2s}.toggle-option[_ngcontent-%COMP%]:hover{background-color:#f0f0f0}.toggle-option[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]{width:18px;height:18px;cursor:pointer}.overview-section[_ngcontent-%COMP%]{background-color:#fff;padding:20px 10% 20px 20px;border-radius:6px;box-shadow:0 2px 5px #0000001a;display:flex;flex-direction:column;align-items:flex-start;width:100%}.section-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:20px;width:90%}.section-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0;color:#333;font-size:1.5rem}.chart-controls[_ngcontent-%COMP%]{display:flex;align-items:center;gap:10px}.chart-type-select[_ngcontent-%COMP%]{padding:5px;border-radius:4px;border:1px solid #ccc}.data-table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse;margin-top:20px}.data-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .data-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:10px;text-align:left;border-bottom:1px solid #e0e0e0}.data-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background-color:#f5f5f5;font-weight:600}.data-table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background-color:#f9f9f9}.chart-container[_ngcontent-%COMP%]{margin:20px 0;border:1px solid #e0e0e0;border-radius:4px;padding:10px;min-height:400px}.section-divider[_ngcontent-%COMP%]{margin:20px 0;padding:15px;background-color:#f1f8ff;border-radius:6px;text-align:center;color:#0366d6;font-size:1.6rem;box-shadow:0 2px 5px #0000001a;width:100%}.overview-card[_ngcontent-%COMP%]{background-color:#fff;border-radius:6px;box-shadow:0 2px 5px #0000001a;margin-top:15px}.card-section[_ngcontent-%COMP%]{padding:15px;border-bottom:1px solid #e0e0e0}.card-section[_ngcontent-%COMP%]:last-child{border-bottom:none}.cancer-type-badge[_ngcontent-%COMP%]{display:inline-block;background-color:#4285f4;color:#fff;padding:5px 10px;border-radius:20px;font-size:14px;margin-top:5px}.patient-details[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:10px}.detail-item[_ngcontent-%COMP%]{flex:1 0 calc(50% - 10px);min-width:200px}.detail-label[_ngcontent-%COMP%]{font-weight:600;color:#555}.query-text[_ngcontent-%COMP%]{font-style:italic;color:#555}.search-actions[_ngcontent-%COMP%]{display:flex;gap:10px;margin-top:15px}.query-editor[_ngcontent-%COMP%]{width:100%}.query-text-edit[_ngcontent-%COMP%]{width:100%;padding:10px;border:1px solid #e0e0e0;border-radius:4px;font-family:inherit;font-size:14px;resize:vertical;min-height:80px;background-color:#f9f9f9;transition:border-color .2s,background-color .2s}.query-text-edit[_ngcontent-%COMP%]:focus{outline:none;border-color:#1976d2;background-color:#fff;box-shadow:0 0 0 2px #1976d21a}.query-text-edit[_ngcontent-%COMP%]::placeholder{color:#9e9e9e;font-style:italic}.geo-overview-container[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:20px;margin-top:15px}.globe-container[_ngcontent-%COMP%]{flex:1;min-width:300px;display:flex;justify-content:center;align-items:center;background-color:#f8f9fa;border-radius:8px;padding:15px;box-shadow:inset 0 0 10px #0000000d;height:400px}.country-stats[_ngcontent-%COMP%]{flex:1;min-width:250px}.country-stats[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin-top:0;margin-bottom:15px;font-size:18px;color:#444}.country-list[_ngcontent-%COMP%]{list-style:none;padding:0;margin:0}.country-item[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;padding:10px 0;position:relative;border-bottom:1px solid #eee}.country-item[_ngcontent-%COMP%]:last-child{border-bottom:none}.country-name[_ngcontent-%COMP%]{width:60%;font-weight:500;z-index:1}.country-count[_ngcontent-%COMP%]{width:40%;text-align:right;font-weight:700;color:#3367d6;z-index:1}.country-bar[_ngcontent-%COMP%]{position:absolute;left:0;top:0;height:100%;background-color:#4285f41a;z-index:0;border-radius:3px;transition:width .5s ease-in-out}.no-data-message[_ngcontent-%COMP%]{color:#888;font-style:italic;margin-top:5px}app-globe[_ngcontent-%COMP%]{display:block;width:100%;height:300px}@media (max-width: 1200px){.info-section[_ngcontent-%COMP%]{display:block}}@media (max-width: 992px){.container[_ngcontent-%COMP%]{flex-direction:column}.filters-section[_ngcontent-%COMP%]{width:100%;margin-right:0;margin-bottom:20px;position:static;max-height:none;overflow-y:visible}.content-area[_ngcontent-%COMP%]{width:100%}}@media (max-width: 768px){.section-header[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start;gap:10px}.chart-toggle-btn[_ngcontent-%COMP%]{width:100%}.chart-container[_ngcontent-%COMP%]{min-height:300px}.patient-details[_ngcontent-%COMP%]   .detail-item[_ngcontent-%COMP%]{flex:1 0 100%}.search-actions[_ngcontent-%COMP%]{flex-direction:column}}@media (max-width: 480px){.toolbar[_ngcontent-%COMP%]{text-align:center}.refresh-btn[_ngcontent-%COMP%], .modify-search-btn[_ngcontent-%COMP%], .clear-search-btn[_ngcontent-%COMP%]{width:100%;margin-right:0;margin-bottom:10px}}.mat-accordion[_ngcontent-%COMP%]{width:100%}.mat-expansion-panel[_ngcontent-%COMP%]{margin-bottom:8px!important;border-radius:8px!important;box-shadow:0 2px 4px #0000001a!important}.mat-expansion-panel-header[_ngcontent-%COMP%]{padding:12px 16px!important;background-color:#f5f8ff!important;transition:background-color .3s ease}.mat-expansion-panel-header[_ngcontent-%COMP%]:hover{background-color:#e8f0ff!important}.mat-expansion-panel-header.mat-expanded[_ngcontent-%COMP%]{background-color:#e0eaff!important}.mat-panel-title.group-header[_ngcontent-%COMP%]{font-weight:600;color:#1976d2;font-size:14px}.mat-expansion-panel-body[_ngcontent-%COMP%]{padding:16px!important}.modal-overlay[_ngcontent-%COMP%]{position:fixed;inset:0;background-color:#0009;display:flex;align-items:center;justify-content:center;z-index:1000}.modal-content-wrapper[_ngcontent-%COMP%]{background-color:#fff;padding:20px;border-radius:8px;box-shadow:0 4px 15px #0003;width:80%;max-width:900px;max-height:90vh;display:flex;flex-direction:column}.modal-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;border-bottom:1px solid #eee;padding-bottom:10px;margin-bottom:15px}.modal-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;font-size:1.5em;color:#333}.close-modal-btn[_ngcontent-%COMP%]{background:none;border:none;font-size:1.8em;font-weight:700;color:#777;cursor:pointer;padding:0 5px}.close-modal-btn[_ngcontent-%COMP%]:hover{color:#333}.modal-body[_ngcontent-%COMP%]{overflow-y:auto;flex-grow:1}.modal-body[_ngcontent-%COMP%]   app-paper-detail-view[_ngcontent-%COMP%]   .paper-detail-container[_ngcontent-%COMP%]{padding:0;border:none;box-shadow:none;background-color:transparent}.detail-item[_ngcontent-%COMP%]{margin-bottom:10px;padding-bottom:10px;border-bottom:1px solid #f0f0f0}.detail-item[_ngcontent-%COMP%]:last-child{margin-bottom:0;padding-bottom:0;border-bottom:none}.patient-details[_ngcontent-%COMP%]{max-height:calc(100vh - 200px);overflow-y:auto;padding-right:5px}.patient-details[_ngcontent-%COMP%]::-webkit-scrollbar{width:6px}.patient-details[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:#f1f1f1;border-radius:10px}.patient-details[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#c1c1c1;border-radius:10px}.patient-details[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:#a8a8a8}.detail-value-container[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;cursor:pointer}.detail-value.editable[_ngcontent-%COMP%]{color:#1976d2;position:relative}.detail-value.editable[_ngcontent-%COMP%]:hover{text-decoration:underline;color:#1565c0}.edit-icon[_ngcontent-%COMP%]{font-size:14px;color:#666;opacity:0;transition:opacity .2s}.detail-value-container[_ngcontent-%COMP%]:hover   .edit-icon[_ngcontent-%COMP%]{opacity:1}.detail-input[_ngcontent-%COMP%]{width:100%;padding:4px 8px;border:1px solid #ddd;border-radius:4px;font-size:14px;color:#333;background:#fff}.detail-input[_ngcontent-%COMP%]:focus{outline:none;border-color:#1976d2;box-shadow:0 0 0 2px #1976d21a}select.detail-input[_ngcontent-%COMP%]{padding-right:24px;appearance:none;background-image:url("data:image/svg+xml;charset=UTF-8,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='none' stroke='currentColor' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3e%3cpolyline points='6 9 12 15 18 9'%3e%3c/polyline%3e%3c/svg%3e");background-repeat:no-repeat;background-position:right 8px center;background-size:16px}input[type=number].detail-input[_ngcontent-%COMP%]{width:80px}.detail-input[_ngcontent-%COMP%]::placeholder{color:#999}.checkbox-display[_ngcontent-%COMP%], .checkbox-edit[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;cursor:pointer}.checkbox-input[_ngcontent-%COMP%]{appearance:none;-webkit-appearance:none;width:18px;height:18px;border:2px solid #1976d2;border-radius:4px;outline:none;cursor:pointer;position:relative;background:#fff}.checkbox-input[_ngcontent-%COMP%]:checked{background-color:#1976d2}.checkbox-input[_ngcontent-%COMP%]:checked:after{content:"\\2713";position:absolute;color:#fff;font-size:14px;left:2px;top:-2px}.checkbox-input[_ngcontent-%COMP%]:hover{border-color:#1565c0}.checkbox-display[_ngcontent-%COMP%]   .checkbox-input[_ngcontent-%COMP%]:disabled{border-color:#ccc;background-color:#f5f5f5;cursor:default}.checkbox-display[_ngcontent-%COMP%]   .checkbox-input[_ngcontent-%COMP%]:checked:disabled{background-color:#ccc}.loading-container[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;gap:15px;padding:20px;background-color:#ffffffe6;border-radius:8px;box-shadow:0 2px 10px #0000000d;margin:20px auto;max-width:300px}.loading-container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;font-size:16px;color:#1976d2;font-weight:500}.spinner[_ngcontent-%COMP%]{width:30px;height:30px;margin:0 auto 10px;border:3px solid rgba(0,0,0,.1);border-radius:50%;border-top-color:#555;animation:_ngcontent-%COMP%_spin 1s ease-in-out infinite}@keyframes _ngcontent-%COMP%_spin{to{transform:rotate(360deg)}}.loading[_ngcontent-%COMP%]{display:flex;justify-content:center;width:100%}.year-overview-container[_ngcontent-%COMP%], .journal-overview-container[_ngcontent-%COMP%], .metadata-overview-container[_ngcontent-%COMP%], .geo-overview-container[_ngcontent-%COMP%]{display:flex;flex-direction:row;gap:20px;margin:20px 0;align-items:flex-start;width:90%}.chart-container[_ngcontent-%COMP%]{flex:2;min-width:0}.year-stats[_ngcontent-%COMP%], .journal-stats[_ngcontent-%COMP%], .metadata-stats[_ngcontent-%COMP%], .country-stats[_ngcontent-%COMP%]{flex:1;min-width:250px;max-width:300px;background-color:#f9f9f9;border-radius:8px;padding:15px;box-shadow:0 2px 4px #0000000d}.year-stats[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%], .journal-stats[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%], .metadata-stats[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%], .country-stats[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin-top:0;padding-bottom:10px;border-bottom:1px solid #e0e0e0;font-size:16px;color:#333}.table-container[_ngcontent-%COMP%]{max-height:300px;overflow-y:auto}@media (max-width: 900px){.year-overview-container[_ngcontent-%COMP%], .journal-overview-container[_ngcontent-%COMP%], .metadata-overview-container[_ngcontent-%COMP%], .geo-overview-container[_ngcontent-%COMP%]{flex-direction:column}.chart-container[_ngcontent-%COMP%], .year-stats[_ngcontent-%COMP%], .journal-stats[_ngcontent-%COMP%], .metadata-stats[_ngcontent-%COMP%], .country-stats[_ngcontent-%COMP%]{width:100%}}.action-buttons-section[_ngcontent-%COMP%]{margin-bottom:20px}.set-params-btn[_ngcontent-%COMP%]{background-color:#2ecc71;color:#fff;padding:10px 18px;border:none;border-radius:5px;cursor:pointer;font-size:1rem;font-weight:500;transition:background-color .3s ease,transform .2s ease;display:inline-block}.set-params-btn[_ngcontent-%COMP%]:hover{background-color:#27ae60;transform:translateY(-1px)}.set-params-btn[_ngcontent-%COMP%]:active{transform:translateY(0)}.search-actions[_ngcontent-%COMP%]{display:flex;gap:10px;padding:15px;background-color:#f8f9fa;border-top:1px solid #eee}.view-details-btn[_ngcontent-%COMP%]{background-color:#007bff;color:#fff;padding:10px 15px;border:none;border-radius:4px;cursor:pointer;font-size:1rem;transition:background-color .3s ease;margin-top:15px;display:inline-block}.view-details-btn[_ngcontent-%COMP%]:hover{background-color:#0056b3}.paper-item[_ngcontent-%COMP%]{background-color:#f8f9fa;padding:10px 15px;border-radius:4px;border:1px solid #e0e0e0;transition:background-color .2s ease-in-out,box-shadow .2s ease-in-out}.paper-item[_ngcontent-%COMP%]:hover{background-color:#e9ecef;box-shadow:0 2px 4px #0000000d}.paper[_ngcontent-%COMP%]{color:#007bff;cursor:pointer;font-weight:500;transition:color .2s ease-in-out}.paper[_ngcontent-%COMP%]:hover{color:#0056b3;text-decoration:underline}`]})};var ES=()=>["ECOG0","ECOG1","ECOG2","ECOG3","ECOG4","ECOG5"],SS=()=>["T0","T1","T2","T3","T4","TX","Tis"],IS=()=>["N0","N1","N2","NX"],DS=()=>["M0","M1","MX"];function OS(e,n){if(e&1&&(f(0,"div",14)(1,"div",15)(2,"div",16)(3,"span",17),v(4,"Searching for:"),p(),f(5,"span",18),v(6),p()(),f(7,"div",16)(8,"span",17),v(9,"Cancer Type:"),p(),f(10,"span",19),v(11),p()(),f(12,"div",20)(13,"span",21),v(14),p(),v(15),p()()()),e&2){let t=m(3);g(6),Z(t.queryText),g(5),Z(t.patientInfo.cancerType),g(3),Z(t.filteredDatabaseItems.length),g(),X(" of ",t.allDatabaseItems.length," documents match your criteria ")}}function AS(e,n){if(e&1&&(f(0,"div",30),v(1," Selected file: "),f(2,"strong"),v(3),p()()),e&2){let t=m(4);g(3),Z(t.selectedFile.name)}}function TS(e,n){if(e&1&&(f(0,"th"),v(1),p()),e&2){let t=n.$implicit;g(),Z(t)}}function PS(e,n){if(e&1&&(f(0,"td"),v(1),p()),e&2){let t=n.$implicit,i=m().$implicit;g(),Z(i[t])}}function kS(e,n){if(e&1&&(f(0,"tr"),P(1,PS,2,1,"td",34),p()),e&2){let t=m(5);g(),y("ngForOf",t.csvHeaders)}}function RS(e,n){if(e&1){let t=U();f(0,"div",31)(1,"h3"),v(2),p(),f(3,"div",32)(4,"table",33)(5,"thead")(6,"tr"),P(7,TS,2,1,"th",34),p()(),f(8,"tbody"),P(9,kS,2,1,"tr",34),p()()(),f(10,"div",35)(11,"button",36),k("click",function(){E(t);let r=m(4);return S(r.uploadCsv())}),v(12),p(),f(13,"button",37),k("click",function(){E(t);let r=m(4);return S(r.resetCsvUpload())}),v(14," Cancel "),p()()()}if(e&2){let t=m(4);g(2),X("CSV Preview (first ",t.csvPreview.length," rows)"),g(5),y("ngForOf",t.csvHeaders),g(2),y("ngForOf",t.csvPreview),g(2),y("disabled",t.isUploading),g(),X(" ",t.isUploading?"Uploading...":"Upload Metadata"," "),g(),y("disabled",t.isUploading)}}function FS(e,n){if(e&1&&(f(0,"div",40)(1,"p"),v(2),p(),f(3,"p"),v(4),p(),f(5,"p"),v(6),p()()),e&2){let t=m(5);g(2),X("Documents updated: ",t.uploadResult.details.updated,""),g(2),X("Documents not found: ",t.uploadResult.details.not_found||0,""),g(2),X("Errors: ",t.uploadResult.details.errors||0,"")}}function NS(e,n){if(e&1&&(f(0,"div",38)(1,"p"),v(2),p(),P(3,FS,7,3,"div",39),p()),e&2){let t=m(4);y("ngClass",t.uploadResult.success?"success":"error"),g(2),Z(t.uploadResult.message),g(),y("ngIf",t.uploadResult.details)}}function VS(e,n){if(e&1){let t=U();f(0,"div",22)(1,"div",23)(2,"h2"),v(3,"Upload Metadata CSV"),p(),f(4,"div",24)(5,"p"),v(6," Upload a CSV file to update metadata for documents in the database. The CSV file must have a header row, with the first column containing the document ID. "),p(),f(7,"p")(8,"strong"),v(9,"Example:"),p(),v(10," id,title,author,year,journal "),p()(),f(11,"div",25)(12,"input",26),k("change",function(r){E(t);let o=m(3);return S(o.onFileSelected(r))}),p(),P(13,AS,4,1,"div",27),p(),P(14,RS,15,6,"div",28)(15,NS,4,3,"div",29),p()()}if(e&2){let t=m(3);g(12),y("disabled",t.isUploading),g(),y("ngIf",t.selectedFile),g(),y("ngIf",t.csvPreview.length>0),g(),y("ngIf",t.uploadResult)}}function LS(e,n){if(e&1&&(f(0,"div",57)(1,"span",58),v(2,"Authors:"),p(),f(3,"span",59),v(4),p()()),e&2){let t=m().$implicit;g(4),Z(t.metadata.authors)}}function jS(e,n){if(e&1&&(f(0,"div",57)(1,"span",58),v(2,"Journal:"),p(),f(3,"span",59),v(4),p()()),e&2){let t=m().$implicit;g(4),Z(t.metadata.journal)}}function US(e,n){if(e&1&&(f(0,"div",57)(1,"span",58),v(2,"Year:"),p(),f(3,"span",59),v(4),p()()),e&2){let t=m().$implicit;g(4),Z(t.metadata.year)}}function $S(e,n){e&1&&(f(0,"span",60),v(1,"Hormone-sensitive"),p())}function zS(e,n){e&1&&(f(0,"span",60),v(1,"Castration-resistant"),p())}function BS(e,n){if(e&1&&(f(0,"span",60),v(1),p()),e&2){let t=m().$implicit;g(),Z(t)}}function HS(e,n){if(e&1&&(Pe(0),P(1,BS,2,1,"span",51),ke()),e&2){let t=n.$implicit,i=m().$implicit;g(),y("ngIf",(i.metadata==null?null:i.metadata[t])==="TRUE")}}function GS(e,n){if(e&1&&(f(0,"span",60),v(1),p()),e&2){let t=m().$implicit;g(),Z(t)}}function qS(e,n){if(e&1&&(Pe(0),P(1,GS,2,1,"span",51),ke()),e&2){let t=n.$implicit,i=m().$implicit;g(),y("ngIf",(i.metadata==null?null:i.metadata[t])==="TRUE")}}function WS(e,n){if(e&1&&(f(0,"span",60),v(1),p()),e&2){let t=m().$implicit;g(),Z(t)}}function YS(e,n){if(e&1&&(Pe(0),P(1,WS,2,1,"span",51),ke()),e&2){let t=n.$implicit,i=m().$implicit;g(),y("ngIf",(i.metadata==null?null:i.metadata[t])==="TRUE")}}function XS(e,n){if(e&1&&(f(0,"span",60),v(1),p()),e&2){let t=m().$implicit;g(),Z(t)}}function KS(e,n){if(e&1&&(Pe(0),P(1,XS,2,1,"span",51),ke()),e&2){let t=n.$implicit,i=m().$implicit;g(),y("ngIf",(i.metadata==null?null:i.metadata[t])==="TRUE")}}function QS(e,n){e&1&&(f(0,"span",61),v(1,"High Risk"),p())}function ZS(e,n){e&1&&(f(0,"span",61),v(1,"High Volume"),p())}function JS(e,n){e&1&&(f(0,"span",62),v(1,"ADT"),p())}function eI(e,n){if(e&1&&(f(0,"div",45)(1,"h3",46),v(2),p(),f(3,"div",47),P(4,LS,5,1,"div",48)(5,jS,5,1,"div",48)(6,US,5,1,"div",48),p(),f(7,"div",49),v(8),tn(9,"slice"),p(),f(10,"div",50),P(11,$S,2,0,"span",51)(12,zS,2,0,"span",51)(13,HS,2,1,"ng-container",34)(14,qS,2,1,"ng-container",34)(15,YS,2,1,"ng-container",34)(16,KS,2,1,"ng-container",34)(17,QS,2,0,"span",52)(18,ZS,2,0,"span",52)(19,JS,2,0,"span",53),p(),f(20,"div",54)(21,"button",55),v(22,"View Details"),p(),f(23,"button",56),v(24,"Save Reference"),p()()()),e&2){let t=n.$implicit;g(2),Z((t.metadata==null?null:t.metadata.title)||"Untitled Document"),g(2),y("ngIf",t.metadata==null?null:t.metadata.authors),g(),y("ngIf",t.metadata==null?null:t.metadata.journal),g(),y("ngIf",t.metadata==null?null:t.metadata.year),g(2),Zo(" ",tp(9,15,t.document,0,200),"",t.document.length>200?"...":""," "),g(3),y("ngIf",(t.metadata==null?null:t.metadata["Disease sensitivity - Hormone-sensitive"])==="TRUE"),g(),y("ngIf",(t.metadata==null?null:t.metadata["Disease sensitivity - Castration-resistant"])==="TRUE"),g(),y("ngForOf",dt(19,ES)),g(),y("ngForOf",dt(20,SS)),g(),y("ngForOf",dt(21,IS)),g(),y("ngForOf",dt(22,DS)),g(),y("ngIf",(t.metadata==null?null:t.metadata["High Risk"])==="TRUE"),g(),y("ngIf",(t.metadata==null?null:t.metadata["High Volume"])==="TRUE"),g(),y("ngIf",(t.metadata==null?null:t.metadata.ADT)==="TRUE")}}function tI(e,n){if(e&1&&(f(0,"div",41)(1,"h2"),v(2,"Relevant Literature"),p(),f(3,"p",42),v(4),p(),f(5,"div",43),P(6,eI,25,23,"div",44),p()()),e&2){let t=m(3);g(4),X("Showing ",t.filteredDatabaseItems.length," documents matching your search criteria"),g(2),y("ngForOf",t.filteredDatabaseItems)}}function nI(e,n){if(e&1){let t=U();f(0,"div",63)(1,"h2"),v(2,"No Matching Literature"),p(),f(3,"p"),v(4,"No documents match your search criteria. Try broadening your search parameters."),p(),f(5,"button",64),k("click",function(){E(t);let r=m(3);return S(r.onModifySearch())}),v(6,"Submit Query"),p()()}}function iI(e,n){e&1&&(f(0,"div",65)(1,"p"),v(2,"Loading database contents..."),p()())}function rI(e,n){if(e&1&&(f(0,"div",66)(1,"p"),v(2),p()()),e&2){let t=m(3);g(2),Z(t.error)}}function oI(e,n){e&1&&(f(0,"p",68),v(1,"No data found in the database."),p())}function aI(e,n){if(e&1&&(f(0,"pre"),v(1),p()),e&2){let t=m().$implicit,i=m(5);g(),Z(i.formatMetadata(t.metadata))}}function sI(e,n){e&1&&(f(0,"span"),v(1,"No metadata"),p())}function lI(e,n){if(e&1&&(f(0,"tr")(1,"td"),v(2),p(),f(3,"td",70),v(4),p(),f(5,"td",71),P(6,aI,2,1,"pre",3)(7,sI,2,0,"span",3),p()()),e&2){let t=n.$implicit;g(2),Z(t.id),g(2),Z(t.document),g(2),y("ngIf",t.metadata),g(),y("ngIf",!t.metadata)}}function cI(e,n){if(e&1&&(f(0,"div")(1,"p",69),v(2),p(),f(3,"table")(4,"thead")(5,"tr")(6,"th"),v(7,"ID"),p(),f(8,"th"),v(9,"Document"),p(),f(10,"th"),v(11,"Metadata"),p()()(),f(12,"tbody"),P(13,lI,8,4,"tr",34),p()()()),e&2){let t=m(4);g(2),X("Total documents: ",t.allDatabaseItems.length,""),g(11),y("ngForOf",t.allDatabaseItems)}}function dI(e,n){if(e&1&&(f(0,"div"),P(1,oI,2,0,"p",67)(2,cI,14,2,"div",3),p()),e&2){let t=m(3);g(),y("ngIf",t.allDatabaseItems.length===0),g(),y("ngIf",t.allDatabaseItems.length>0)}}function uI(e,n){if(e&1){let t=U();f(0,"div")(1,"h1"),v(2,"Database Contents"),p(),P(3,OS,16,4,"div",4),f(4,"div",5)(5,"button",6),k("click",function(){E(t);let r=m(2);return S(r.refreshData())}),v(6,"Refresh Data"),p(),f(7,"button",7),k("click",function(){E(t);let r=m(2);return S(r.toggleCsvUpload())}),v(8),p(),f(9,"button",8),k("click",function(){E(t);let r=m(2);return S(r.downloadMetadataCsv())}),v(10,"Download Metadata CSV"),p()(),P(11,VS,16,4,"div",9)(12,tI,7,2,"div",10)(13,nI,7,0,"div",11)(14,iI,3,0,"div",12)(15,rI,3,1,"div",13)(16,dI,3,2,"div",3),p()}if(e&2){let t=m(2);g(3),y("ngIf",t.hasFormData),g(5),X(" ",t.showCsvUpload?"Hide CSV Upload":"Upload Metadata CSV"," "),g(3),y("ngIf",t.showCsvUpload),g(),y("ngIf",t.hasFormData&&t.filteredDatabaseItems.length>0),g(),y("ngIf",t.hasFormData&&t.filteredDatabaseItems.length===0),g(),y("ngIf",t.isLoading),g(),y("ngIf",t.error),g(),y("ngIf",!t.hasFormData&&!t.isLoading&&!t.error&&t.allDatabaseItems!==void 0)}}function pI(e,n){if(e&1){let t=U();f(0,"div",1)(1,"app-database-overview",2),k("modifySearch",function(){E(t);let r=m();return S(r.onModifySearch())})("clearSearch",function(){E(t);let r=m();return S(r.onClearSearch())})("filterChanged",function(r){E(t);let o=m();return S(o.onDynamicFiltersChanged(r))}),p(),P(2,uI,17,8,"div",3),p()}if(e&2){let t=m();g(),y("cancerTypeSelected",t.cancerTypeSelected)("searchCriteria",t.searchCriteria)("initialAvailableFilters",t.availableFilterDefinitions),g(),y("ngIf",t.debugMode)}}var dl=class e{constructor(n,t){this.databaseService=n;this.llmService=t;this.allDatabaseItems=[],this.filteredDatabaseItems=[],this._initializeAvailableFilterDefinitions()}formData=null;cancerTypeSelected="";hasFormData=!1;patientInfo={};queryText="";debugMode=!1;allDatabaseItems=[];filteredDatabaseItems=[];isLoading=!0;error=null;selectedFile=null;csvHeaders=[];csvData=[];csvPreview=[];showCsvUpload=!1;isUploading=!1;uploadResult=null;searchCriteria=null;dynamicFilters=new Map;availableFilterDefinitions=new Map;fieldMapping={diseaseSensitivity:{"Hormone-sensitive":"Disease sensitivity - Hormone-sensitive","Castration-resistant":"Disease sensitivity - Castration-resistant",Unknown:"Disease sensitivity - Unknown"},ecog:{0:"ECOG0",1:"ECOG1",2:"ECOG2",3:"ECOG3",4:"ECOG4",5:"ECOG5"},tStage:{T0:"T0",T1:"T1",T2:"T2",T3:"T3",T4:"T4",TX:"TX",Tis:"Tis"},nStage:{N0:"N0",N1:"N1",N2:"N2",NX:"NX"},mStage:{M0:"M0",M1:"M1",MX:"MX"},metastasisLocation:{"Bone only":"Metastasis - bone only","Lymph only":"Metastasis lymph only","Bone and lymph only":"Metastasis bone and lymph only","Other than bone and lymph":"Metastasis other than bone and lymph node"},stagingGroup:{0:"Staging Group 0",IA:"Staging Group IA",IB:"Staging Group IB",II:"Staging Group II",IIA:"Staging Group IIA",IIB:"Staging Group IIB",III:"Staging Group III",IV:"Staging Group IV"},ethnicity:{"African American":"Ethnicity-African American",Asian:"Ethnicity-Asian",Caucasian:"Ethnicity-Caucasian",Hispanic:"Ethnicity-Hispanic",Other:"Ethnicity-Other"},trialBasedClassifications:{highRisk:"High Risk",highVolume:"High Volume"},treatmentHistory:{adt:"ADT",arpi:"ARPI"}};_initializeAvailableFilterDefinitions(){this.availableFilterDefinitions.clear(),this.availableFilterDefinitions.set("Year",new Set),this.availableFilterDefinitions.set("Journal",new Set),this.availableFilterDefinitions.set("Country",new Set),this.availableFilterDefinitions.set("tStage",new Set(["T0","T1","T2","T3","T4","TX","Tis","(no data)"])),this.availableFilterDefinitions.set("nStage",new Set(["N0","N1","N2","NX","(no data)"])),this.availableFilterDefinitions.set("mStage",new Set(["M0","M1","MX","(no data)"])),this.availableFilterDefinitions.set("highRisk",new Set(["High Risk","(no data)"])),this.availableFilterDefinitions.set("highVolume",new Set(["High Volume","(no data)"])),this.availableFilterDefinitions.set("ecog",new Set(["ECOG0","ECOG1","ECOG2","ECOG3","ECOG4","ECOG5","(no data)"])),this.availableFilterDefinitions.set("diseaseSensitivity",new Set(["Disease sensitivity - Hormone-sensitive","Disease sensitivity - Castration-resistant","Disease sensitivity - Unknown","(no data)"])),this.availableFilterDefinitions.set("stagingGroup",new Set(["Staging Group 0","Staging Group IA","Staging Group IB","Staging Group II","Staging Group III","Staging Group IV","(no data)"])),this.availableFilterDefinitions.set("metastasisLocation",new Set(["Metastasis - bone only","Metastasis lymph only","Metastasis bone and lymph only","Metastasis other than bone and lymph node","(no data)"])),this.availableFilterDefinitions.set("ethnicity",new Set(["Ethnicity-African American","Ethnicity-Asian","Ethnicity-Caucasian","Ethnicity-Hispanic","Ethnicity-Other","(no data)"]))}ngOnInit(){}ngAfterViewChecked(){}ngOnChanges(n){n.formData&&n.formData.currentValue&&this.processFormData(),n.cancerTypeSelected&&n.cancerTypeSelected.currentValue&&(this.cancerTypeSelected=n.cancerTypeSelected.currentValue)}processFormData(){if(!this.formData)return;this.hasFormData=!0;let n=this.formData.rawValues;this.patientInfo={cancerType:n.cancerType||"Not specified",gender:n.gender||"Not specified",age:n.age||"Not specified",ecog:n.ecog||"Not specified",ethnicity:n.ethnicity||"Not specified"},n.cancerType==="Prostate Cancer"&&(this.patientInfo=fe(N({},this.patientInfo),{diseaseSensitivity:n.diseaseSensitivity||"Not specified",tStage:n.tStage||"Not specified",nStage:n.nStage||"Not specified",mStage:n.mStage||"Not specified",stagingGroup:n.stagingGroup||"Not specified",metastasisLocation:n.metastasisLocation||"Not specified",gleasonScore:n.gleasonScore||"Not specified",treatmentHistory:n.treatmentHistory||{},trialBasedClassifications:n.trialBasedClassifications||{}})),this.queryText=n.query||"",this.searchCriteria={patientInfo:this.patientInfo,query:this.queryText,raw:n},this.applyFilters()}loadDatabaseContents(){this.isLoading=!0,this.error=null,this.databaseService.getDatabaseContents().subscribe({next:n=>{this.allDatabaseItems=Array.isArray(n.data)?n.data:[],this.filteredDatabaseItems=[...this.allDatabaseItems],this.isLoading=!1,this.hasFormData&&this.applyFilters()},error:n=>{console.error("Error fetching database contents:",n),this.error=`Error accessing database: ${n.message||"Unknown error"}`,this.isLoading=!1}})}applyFilters(){if(!this.allDatabaseItems.length||!this.hasFormData)return;let n=[...this.allDatabaseItems];if(this.patientInfo.cancerType&&this.patientInfo.cancerType!=="Not specified"&&(n=n.filter(t=>t.metadata&&(t.metadata.cancerType===this.patientInfo.cancerType||t.metadata.disease===this.patientInfo.cancerType||t.document&&t.document.toLowerCase().includes(this.patientInfo.cancerType.toLowerCase())))),this.dynamicFilters&&this.dynamicFilters.size>0&&this.dynamicFilters.forEach((t,i)=>{if(i==="Year"){let r=t;r&&(r.start!==null||r.end!==null)&&(n=n.filter(o=>{if(!o.metadata||typeof o.metadata.year>"u")return!1;let a=Number(o.metadata.year);if(isNaN(a))return!1;let s=r.start!==null?a>=r.start:!0,l=r.end!==null?a<=r.end:!0;return s&&l}))}else if(t instanceof Set&&t.size>0){let r=i.toLowerCase();n=n.filter(o=>!o.metadata||typeof o.metadata[r]>"u"?!1:t.has(o.metadata[r]))}}),this.patientInfo.ecog&&this.patientInfo.ecog!=="Not specified"){let t=this.fieldMapping.ecog[this.patientInfo.ecog];t&&(n=n.filter(i=>i.metadata&&i.metadata[t]==="TRUE"))}if(this.patientInfo.ethnicity&&this.patientInfo.ethnicity!=="Not specified"){let t=this.fieldMapping.ethnicity[this.patientInfo.ethnicity];t&&(n=n.filter(i=>i.metadata&&i.metadata[t]==="TRUE"))}if(this.patientInfo.cancerType==="Prostate Cancer"){if(this.patientInfo.diseaseSensitivity&&this.patientInfo.diseaseSensitivity!=="Not specified"){let t=this.fieldMapping.diseaseSensitivity[this.patientInfo.diseaseSensitivity];t&&(n=n.filter(i=>i.metadata&&i.metadata[t]==="TRUE"))}if(this.patientInfo.tStage&&this.patientInfo.tStage!=="Not specified"){let t=this.fieldMapping.tStage[this.patientInfo.tStage];t&&(n=n.filter(i=>i.metadata&&i.metadata[t]==="TRUE"))}if(this.patientInfo.nStage&&this.patientInfo.nStage!=="Not specified"){let t=this.fieldMapping.nStage[this.patientInfo.nStage];t&&(n=n.filter(i=>i.metadata&&i.metadata[t]==="TRUE"))}if(this.patientInfo.mStage&&this.patientInfo.mStage!=="Not specified"){let t=this.fieldMapping.mStage[this.patientInfo.mStage];t&&(n=n.filter(i=>i.metadata&&i.metadata[t]==="TRUE"))}if(this.patientInfo.stagingGroup&&this.patientInfo.stagingGroup!=="Not specified"){let t=this.fieldMapping.stagingGroup[this.patientInfo.stagingGroup];t&&(n=n.filter(i=>i.metadata&&i.metadata[t]==="TRUE"))}if(this.patientInfo.metastasisLocation&&this.patientInfo.metastasisLocation!=="Not specified"&&this.patientInfo.metastasisLocation!=="No metastasis"){let t=this.fieldMapping.metastasisLocation[this.patientInfo.metastasisLocation];t&&(n=n.filter(i=>i.metadata&&i.metadata[t]==="TRUE"))}this.patientInfo.treatmentHistory&&Object.keys(this.patientInfo.treatmentHistory).forEach(t=>{if(this.patientInfo.treatmentHistory[t]===!0&&this.fieldMapping.treatmentHistory[t]){let i=this.fieldMapping.treatmentHistory[t];n=n.filter(r=>r.metadata&&r.metadata[i]==="TRUE")}}),this.patientInfo.trialBasedClassifications&&Object.keys(this.patientInfo.trialBasedClassifications).forEach(t=>{if(this.patientInfo.trialBasedClassifications[t]===!0&&this.fieldMapping.trialBasedClassifications[t]){let i=this.fieldMapping.trialBasedClassifications[t];n=n.filter(r=>r.metadata&&r.metadata[i]==="TRUE")}})}if(this.patientInfo.age&&this.patientInfo.age!=="Not specified"){let t=parseInt(this.patientInfo.age);isNaN(t)||(n=n.filter(i=>{if(i.metadata&&i.metadata.ageRange){let o=i.metadata.ageRange.split("-");if(o.length===2){let a=parseInt(o[0]),s=parseInt(o[1]);if(!isNaN(a)&&!isNaN(s))return t>=a&&t<=s}}let r=[`age ${t}`,`${t} years old`,`${t}-year-old`];if(i.document){for(let o of r)if(i.document.toLowerCase().includes(o.toLowerCase()))return!0}return n.length<10}))}if(this.queryText){let t=this.queryText.toLowerCase().split(" ");n=n.filter(i=>{if(!i.document)return!1;let r=i.document.toLowerCase();for(let o of t)if(!["a","an","the","is","are","and","or","for","of","in","to","with"].includes(o)&&!(o.length<3)&&!r.includes(o))return!1;return!0})}this.filteredDatabaseItems=n}onDynamicFiltersChanged(n){this.dynamicFilters=new Map(n),this.applyFilters()}onModifySearch(){document.querySelector("app-database-overview")&&this.searchCriteria&&(this.searchCriteria.queryText=this.queryText)}onClearSearch(){this.searchCriteria=null,this.filteredDatabaseItems=[],this.hasFormData=!1,this.queryText=""}refreshData(){this.loadDatabaseContents()}formatMetadata(n){try{return JSON.stringify(n,null,2)}catch{return"Error formatting metadata"}}toggleCsvUpload(){this.showCsvUpload=!this.showCsvUpload,this.showCsvUpload||this.resetCsvUpload()}onFileSelected(n){let t=n.target.files[0];if(!t)return;this.selectedFile=t,this.csvHeaders=[],this.csvData=[],this.csvPreview=[],this.uploadResult=null;let i=new FileReader;i.readAsText(t),i.onload=()=>{this.parseCSV(i.result)}}parseCSV(n){let t=n.split(`
`).filter(i=>i.trim().length>0);if(t.length<2){this.error="Invalid CSV: File must contain headers and at least one data row.";return}if(this.csvHeaders=this.parseCSVLine(t[0]),this.csvHeaders.length===0||!this.csvHeaders[0].toLowerCase().includes("id")){this.error='Invalid CSV: First column must be labeled as "id" or contain "id" in the name.';return}this.csvData=[];for(let i=1;i<t.length;i++){let r=this.parseCSVLine(t[i]);if(r.length<this.csvHeaders.length)continue;let o={};this.csvHeaders.forEach((a,s)=>{s<r.length?o[a]=r[s]:o[a]=""}),this.csvData.push(o)}this.csvPreview=this.csvData.slice(0,10),this.error=null}parseCSVLine(n){let t=",";n.includes(";")?t=";":n.includes("	")&&(t="	");let i=[],r="",o=!1;for(let a=0;a<n.length;a++){let s=n[a];s==='"'?o=!o:s===t&&!o?(i.push(r.trim()),r=""):r+=s}return i.push(r.trim()),i}uploadCsv(){if(!this.selectedFile||this.csvData.length===0||this.isUploading)return;this.isUploading=!0,this.uploadResult=null,new FormData().append("file",this.selectedFile),this.databaseService.uploadCsvMetadata(this.selectedFile).subscribe({next:t=>{this.isUploading=!1,this.uploadResult={success:t.success,message:t.message,details:t.details},t.success&&setTimeout(()=>this.loadDatabaseContents(),1e3)},error:t=>{this.isUploading=!1,this.uploadResult={success:!1,message:`Error: ${t.error?.error||t.message||"Failed to upload CSV"}`},console.error("Error uploading CSV:",t)}})}resetCsvUpload(){this.selectedFile=null,this.csvHeaders=[],this.csvData=[],this.csvPreview=[],this.uploadResult=null;let n=document.getElementById("csvFileInput");n&&(n.value="")}downloadMetadataCsv(){this.databaseService.exportMetadataCsv()}static \u0275fac=function(t){return new(t||e)(V(qt),V(Zt))};static \u0275cmp=Ce({type:e,selectors:[["app-view-database"]],inputs:{formData:"formData",cancerTypeSelected:"cancerTypeSelected"},standalone:!0,features:[Ie([qt,Zt]),Ae,Me],decls:1,vars:1,consts:[["class","container",4,"ngIf"],[1,"container"],[3,"modifySearch","clearSearch","filterChanged","cancerTypeSelected","searchCriteria","initialAvailableFilters"],[4,"ngIf"],["class","search-status",4,"ngIf"],[1,"toolbar"],[1,"refresh-btn",3,"click"],[1,"csv-btn",3,"click"],[1,"download-btn",3,"click"],["class","csv-upload-section",4,"ngIf"],["class","search-results-section",4,"ngIf"],["class","no-results",4,"ngIf"],["class","loading",4,"ngIf"],["class","error-message",4,"ngIf"],[1,"search-status"],[1,"search-info"],[1,"info-item"],[1,"info-label"],[1,"info-value"],[1,"info-value","cancer-type"],[1,"filter-results"],[1,"filter-count"],[1,"csv-upload-section"],[1,"csv-card"],[1,"instructions"],[1,"file-input-container"],["type","file","id","csvFileInput","accept",".csv",3,"change","disabled"],["class","file-info",4,"ngIf"],["class","csv-preview",4,"ngIf"],["class","upload-result",3,"ngClass",4,"ngIf"],[1,"file-info"],[1,"csv-preview"],[1,"table-wrapper"],[1,"csv-table"],[4,"ngFor","ngForOf"],[1,"upload-actions"],[1,"upload-btn",3,"click","disabled"],[1,"cancel-btn",3,"click","disabled"],[1,"upload-result",3,"ngClass"],["class","upload-details",4,"ngIf"],[1,"upload-details"],[1,"search-results-section"],[1,"results-summary"],[1,"results-list"],["class","result-item",4,"ngFor","ngForOf"],[1,"result-item"],[1,"item-title"],[1,"item-metadata"],["class","metadata-field",4,"ngIf"],[1,"item-document"],[1,"item-clinical-metadata"],["class","metadata-tag",4,"ngIf"],["class","metadata-tag risk",4,"ngIf"],["class","metadata-tag treatment",4,"ngIf"],[1,"item-actions"],[1,"view-btn"],[1,"save-btn"],[1,"metadata-field"],[1,"field-label"],[1,"field-value"],[1,"metadata-tag"],[1,"metadata-tag","risk"],[1,"metadata-tag","treatment"],[1,"no-results"],[1,"modify-search-btn",3,"click"],[1,"loading"],[1,"error-message"],["class","no-data",4,"ngIf"],[1,"no-data"],[1,"total-count"],[1,"document"],[1,"metadata"]],template:function(t,i){t&1&&P(0,pI,3,4,"div",0),t&2&&y("ngIf",i.cancerTypeSelected!=="")},dependencies:[Xe,ra,Bt,Mt,fp,xn,cl],styles:[".container[_ngcontent-%COMP%]{width:100%;margin:0 auto;padding:20px}h1[_ngcontent-%COMP%]{font-size:28px;margin-bottom:20px;color:#2c3e50;border-bottom:2px solid #ecf0f1;padding-bottom:10px}h2[_ngcontent-%COMP%]{font-size:22px;margin:15px 0;color:#34495e}h3[_ngcontent-%COMP%]{font-size:18px;margin:10px 0;color:#34495e}.input-section[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:20px;margin-bottom:30px}.input-card[_ngcontent-%COMP%]{flex:1;min-width:300px;background-color:#f8f9fa;border-radius:8px;padding:20px;box-shadow:0 2px 4px #0000001a;transition:transform .2s,box-shadow .2s}.input-card[_ngcontent-%COMP%]:hover{transform:translateY(-3px);box-shadow:0 4px 8px #00000026}.input-card-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:15px;padding-bottom:10px;border-bottom:1px solid #ecf0f1}.input-card-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;color:#3498db}.input-card-content[_ngcontent-%COMP%]{min-height:200px}.input-group[_ngcontent-%COMP%]{margin-bottom:15px}.input-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;margin-bottom:5px;font-weight:600;color:#7f8c8d}.input-field[_ngcontent-%COMP%]{width:100%;padding:8px 12px;border:1px solid #ddd;border-radius:4px;font-size:14px}.input-field[_ngcontent-%COMP%]:focus{outline:none;border-color:#3498db;box-shadow:0 0 0 2px #3498db33}.form-actions[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;gap:10px;margin-top:20px}.search-status[_ngcontent-%COMP%]{background-color:#f8f9fa;border-radius:8px;padding:15px;margin-bottom:20px;box-shadow:0 2px 4px #0000001a}.search-info[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:15px;margin-bottom:10px}.info-item[_ngcontent-%COMP%]{flex:1;min-width:200px}.info-label[_ngcontent-%COMP%]{font-weight:600;color:#7f8c8d;margin-right:8px}.info-value[_ngcontent-%COMP%]{color:#2c3e50;font-weight:500}.cancer-type[_ngcontent-%COMP%]{color:#3498db;font-weight:600}.filter-results[_ngcontent-%COMP%]{width:100%;margin-top:10px;font-style:italic;color:#7f8c8d}.filter-count[_ngcontent-%COMP%]{font-weight:700;color:#2c3e50}.toolbar[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:10px;margin-bottom:20px}.refresh-btn[_ngcontent-%COMP%], .csv-btn[_ngcontent-%COMP%], .download-btn[_ngcontent-%COMP%], .modify-search-btn[_ngcontent-%COMP%], .view-btn[_ngcontent-%COMP%], .save-btn[_ngcontent-%COMP%], .submit-btn[_ngcontent-%COMP%], .clear-btn[_ngcontent-%COMP%]{padding:8px 16px;border:none;border-radius:4px;font-weight:500;cursor:pointer;transition:background-color .2s,transform .1s}.refresh-btn[_ngcontent-%COMP%]{background-color:#3498db;color:#fff}.refresh-btn[_ngcontent-%COMP%]:hover{background-color:#2980b9;transform:translateY(-2px)}.csv-btn[_ngcontent-%COMP%], .download-btn[_ngcontent-%COMP%]{background-color:#2ecc71;color:#fff}.csv-btn[_ngcontent-%COMP%]:hover, .download-btn[_ngcontent-%COMP%]:hover{background-color:#27ae60;transform:translateY(-2px)}.modify-search-btn[_ngcontent-%COMP%], .submit-btn[_ngcontent-%COMP%]{background-color:#f39c12;color:#fff}.modify-search-btn[_ngcontent-%COMP%]:hover, .submit-btn[_ngcontent-%COMP%]:hover{background-color:#d35400;transform:translateY(-2px)}.clear-btn[_ngcontent-%COMP%]{background-color:#e74c3c;color:#fff}.clear-btn[_ngcontent-%COMP%]:hover{background-color:#c0392b;transform:translateY(-2px)}.csv-upload-section[_ngcontent-%COMP%]{margin-bottom:30px}.csv-card[_ngcontent-%COMP%]{background-color:#f8f9fa;border-radius:8px;padding:20px;box-shadow:0 2px 4px #0000001a}.instructions[_ngcontent-%COMP%]{margin-bottom:15px;padding:10px;background-color:#ecf0f1;border-radius:4px}.file-input-container[_ngcontent-%COMP%]{margin-bottom:15px}.file-info[_ngcontent-%COMP%]{margin-top:10px;font-style:italic}.csv-preview[_ngcontent-%COMP%]{margin-top:20px}.table-wrapper[_ngcontent-%COMP%]{overflow-x:auto;margin-bottom:15px}.csv-table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse;margin-bottom:15px}.csv-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .csv-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:8px;border:1px solid #ddd;text-align:left}.csv-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background-color:#f2f2f2;font-weight:600}.upload-actions[_ngcontent-%COMP%]{display:flex;gap:10px}.upload-btn[_ngcontent-%COMP%]{background-color:#3498db;color:#fff;padding:8px 16px;border:none;border-radius:4px;cursor:pointer}.upload-btn[_ngcontent-%COMP%]:hover{background-color:#2980b9}.cancel-btn[_ngcontent-%COMP%]{background-color:#e74c3c;color:#fff;padding:8px 16px;border:none;border-radius:4px;cursor:pointer}.cancel-btn[_ngcontent-%COMP%]:hover{background-color:#c0392b}.upload-result[_ngcontent-%COMP%]{margin-top:15px;padding:10px;border-radius:4px}.upload-result.success[_ngcontent-%COMP%]{background-color:#d4edda;color:#155724;border:1px solid #c3e6cb}.upload-result.error[_ngcontent-%COMP%]{background-color:#f8d7da;color:#721c24;border:1px solid #f5c6cb}.upload-details[_ngcontent-%COMP%]{margin-top:10px;font-size:14px}.search-results-section[_ngcontent-%COMP%]{margin-top:30px}.results-summary[_ngcontent-%COMP%]{margin-bottom:20px;color:#7f8c8d}.results-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:20px}.result-item[_ngcontent-%COMP%]{padding:15px;border-radius:8px;background-color:#f8f9fa;box-shadow:0 2px 4px #0000001a;transition:transform .2s}.result-item[_ngcontent-%COMP%]:hover{transform:translateY(-3px);box-shadow:0 4px 8px #00000026}.item-title[_ngcontent-%COMP%]{font-size:18px;margin:0 0 10px;color:#2c3e50}.item-metadata[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:15px;margin-bottom:10px;font-size:14px}.metadata-field[_ngcontent-%COMP%]{margin-right:15px}.field-label[_ngcontent-%COMP%]{font-weight:600;color:#7f8c8d}.field-value[_ngcontent-%COMP%]{color:#2c3e50}.item-document[_ngcontent-%COMP%]{margin:10px 0;padding:10px;background-color:#ecf0f1;border-radius:4px;font-style:italic;color:#34495e}.item-clinical-metadata[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:8px;margin:10px 0}.metadata-tag[_ngcontent-%COMP%]{padding:3px 8px;border-radius:12px;background-color:#e0f7fa;color:#0277bd;font-size:12px;font-weight:500}.metadata-tag.risk[_ngcontent-%COMP%]{background-color:#fff3e0;color:#e65100}.metadata-tag.treatment[_ngcontent-%COMP%]{background-color:#e8f5e9;color:#2e7d32}.item-actions[_ngcontent-%COMP%]{display:flex;gap:10px;margin-top:15px}.view-btn[_ngcontent-%COMP%]{background-color:#3498db;color:#fff}.save-btn[_ngcontent-%COMP%]{background-color:#95a5a6;color:#fff}.view-btn[_ngcontent-%COMP%]:hover, .save-btn[_ngcontent-%COMP%]:hover{transform:translateY(-2px)}.checkbox-group[_ngcontent-%COMP%], .radio-group[_ngcontent-%COMP%]{margin-bottom:15px}.checkbox-list[_ngcontent-%COMP%], .radio-list[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(180px,1fr));gap:8px;margin-top:5px}.checkbox-item[_ngcontent-%COMP%], .radio-item[_ngcontent-%COMP%]{display:flex;align-items:center}.checkbox-item[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .radio-item[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{margin-right:8px}select.input-field[_ngcontent-%COMP%]{height:36px;background-color:#fff}table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse;margin-top:20px}th[_ngcontent-%COMP%], td[_ngcontent-%COMP%]{padding:12px 8px;text-align:left;border-bottom:1px solid #ddd}th[_ngcontent-%COMP%]{background-color:#f2f2f2;font-weight:600}td.document[_ngcontent-%COMP%]{max-width:300px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}td.metadata[_ngcontent-%COMP%]{max-width:400px}td.metadata[_ngcontent-%COMP%]   pre[_ngcontent-%COMP%]{margin:0;white-space:pre-wrap;font-size:12px}.no-data[_ngcontent-%COMP%], .no-results[_ngcontent-%COMP%]{text-align:center;padding:40px;background-color:#f8f9fa;border-radius:8px;margin:20px 0}.no-results[_ngcontent-%COMP%]{background-color:#e8f4f8;border:1px dashed #3498db}.no-results[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:#3498db;margin-bottom:15px}.no-results[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-top:15px}.loading[_ngcontent-%COMP%], .error-message[_ngcontent-%COMP%]{padding:20px;text-align:center;margin:20px 0}.loading[_ngcontent-%COMP%]{color:#3498db}.error-message[_ngcontent-%COMP%]{color:#e74c3c;background-color:#f8d7da;border-radius:4px}.tabs[_ngcontent-%COMP%]{display:flex;border-bottom:1px solid #ecf0f1;margin-bottom:20px}.tab[_ngcontent-%COMP%]{padding:10px 20px;cursor:pointer;border-bottom:3px solid transparent;font-weight:500;transition:all .2s}.tab.active[_ngcontent-%COMP%]{border-bottom-color:#3498db;color:#3498db}.tab[_ngcontent-%COMP%]:hover:not(.active){border-bottom-color:#bdc3c7}@media (max-width: 992px){.input-card[_ngcontent-%COMP%]{flex-basis:calc(50% - 20px)}}@media (max-width: 768px){.input-card[_ngcontent-%COMP%]{flex-basis:100%}.search-info[_ngcontent-%COMP%]{flex-direction:column;gap:8px}.toolbar[_ngcontent-%COMP%]{flex-direction:column}.metadata-field[_ngcontent-%COMP%]{margin-bottom:5px}.item-actions[_ngcontent-%COMP%]{flex-direction:column}.item-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:100%}.checkbox-list[_ngcontent-%COMP%], .radio-list[_ngcontent-%COMP%]{grid-template-columns:repeat(auto-fill,minmax(150px,1fr))}}"]})};var ul=class e{title="evidence-db-angular";cancerTypeSelected="";formData={rawValues:{cancerType:"",gender:"",age:"",ecog:"",ethnicity:"",query:"",diseaseSensitivity:"",tStage:"",nStage:"",mStage:"",stagingGroup:"",metastasisLocation:"",timepointOfDiagnosis:"",treatmentHistory:{adt:!1,arpi:!1,tripleTherapy:!1},extraTreatmentHistory:"",genomicFeatures:{ddr:!1},genesInvolved:"",variants:"",psmaLevel:"",alpLevel:"",gleasonScore:"",histologicVariants:"",trialBasedClassifications:{highVolume:!1,highRisk:!1}},processedValues:{cancerType:"",gender:"",query:"",treatmentHistory:{adt:!1,arpi:!1,tripleTherapy:!1},genomicFeatures:{ddr:!1},trialBasedClassifications:{highVolume:!1,highRisk:!1}}};handleFormSubmission(n){this.formData=n}handleCancerTypeSelected(n){this.cancerTypeSelected=n}static \u0275fac=function(t){return new(t||e)};static \u0275cmp=Ce({type:e,selectors:[["app-root"]],standalone:!0,features:[Me],decls:14,vars:2,consts:[[1,"navbar","navbar-expand-md","navbar-light","bg-light"],["href","",1,"navbar-brand"],["type","button","data-toggle","collapse","data-target","#navbarNav","aria-controls","navbarNav","aria-expanded","false","aria-label","Toggle navigation",1,"navbar-toggler"],[1,"navbar-toggler-icon"],["id","navbarNav",1,"collapse","navbar-collapse"],[1,"navbar-nav"],[1,"nav-item","active"],["href","#",1,"nav-link"],[3,"cancerTypeSelected","formSubmitted"],[3,"formData","cancerTypeSelected"]],template:function(t,i){t&1&&(f(0,"title"),v(1,"Evidence DB"),p(),f(2,"nav",0)(3,"a",1),v(4,"EvidenceDB"),p(),f(5,"button",2),pe(6,"span",3),p(),f(7,"div",4)(8,"ul",5)(9,"li",6)(10,"a",7),v(11,"About"),p()()()()(),f(12,"app-search-query",8),k("cancerTypeSelected",function(o){return i.handleCancerTypeSelected(o)})("formSubmitted",function(o){return i.handleFormSubmission(o)}),p(),pe(13,"app-view-database",9)),t&2&&(g(13),y("formData",i.formData)("cancerTypeSelected",i.cancerTypeSelected))},dependencies:[xn,Wa,dl],styles:["h1[_ngcontent-%COMP%], h2[_ngcontent-%COMP%], h3[_ngcontent-%COMP%], h4[_ngcontent-%COMP%], h5[_ngcontent-%COMP%]{text-align:center;color:#212529;margin:20px 0}h1[_ngcontent-%COMP%]{font-size:32px}h2[_ngcontent-%COMP%]{font-size:28px}h3[_ngcontent-%COMP%]{font-size:24px}h4[_ngcontent-%COMP%], h5[_ngcontent-%COMP%]{font-size:20px}.container[_ngcontent-%COMP%]{max-width:900px;margin:40px auto;background-color:#fff;padding:30px;border-radius:10px;box-shadow:0 4px 10px #0000001a}.btn[_ngcontent-%COMP%]{padding:12px 25px;font-size:16px;background-color:#007bff;color:#fff;text-decoration:none;border-radius:5px;border:none;transition:background-color .3s ease;display:inline-block;margin:10px 0}.btn[_ngcontent-%COMP%]:hover{background-color:#0056b3}.btn-secondary[_ngcontent-%COMP%]{background-color:#28a745}.btn-secondary[_ngcontent-%COMP%]:hover{background-color:#218838}.btn-container[_ngcontent-%COMP%]{text-align:center;margin-top:30px}.section-divider[_ngcontent-%COMP%]{border:none;border-bottom:1px solid #dee2e6;margin:20px 0}form[_ngcontent-%COMP%]{max-width:800px;margin:40px auto;background-color:#fff;padding:20px 30px;border-radius:10px;box-shadow:0 4px 10px #0000001a}.form-group[_ngcontent-%COMP%]{margin-bottom:20px}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;font-weight:700;margin-bottom:8px;color:#495057}.form-group[_ngcontent-%COMP%]   select[_ngcontent-%COMP%], .form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{width:100%;padding:10px;font-size:16px;border:1px solid #ced4da;border-radius:5px;background-color:#f8f9fa}.form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{height:120px;resize:none}button[type=submit][_ngcontent-%COMP%]{width:100%;padding:12px 20px;font-size:18px;color:#fff;background-color:#007bff;border:none;border-radius:5px;cursor:pointer;transition:background-color .3s ease}button[type=submit][_ngcontent-%COMP%]:hover{background-color:#0056b3}input[_ngcontent-%COMP%]::placeholder, textarea[_ngcontent-%COMP%]::placeholder{color:#6c757d}.required[_ngcontent-%COMP%]{color:red}.collapsible-content[_ngcontent-%COMP%]{list-style:none;padding-left:20px;margin:10px 0}.toggle-icon[_ngcontent-%COMP%]{font-size:12px;margin-left:5px}#userQuery[_ngcontent-%COMP%], #liveResponse[_ngcontent-%COMP%]{font-family:Arial,sans-serif;font-size:16px;color:#212529;white-space:pre-wrap;line-height:1.6}#liveResponse[_ngcontent-%COMP%]{color:#495057}p[_ngcontent-%COMP%], li[_ngcontent-%COMP%]{font-size:16px;color:#495057;line-height:1.6}.paper-info[_ngcontent-%COMP%]{font-size:18px;color:#212529;line-height:1.6;margin-bottom:15px}.paper-info[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{color:#000}.abstract[_ngcontent-%COMP%]{background-color:#f1f1f1;padding:20px;border-radius:10px;font-size:16px;line-height:1.8;color:#495057;white-space:pre-line}.navbar[_ngcontent-%COMP%]{background-color:#fff;border-bottom:1px solid #dee2e6;box-shadow:0 2px 4px #0000001a}.navbar-brand[_ngcontent-%COMP%]{font-size:24px;font-weight:700;color:#007bff;text-decoration:none}.navbar-brand[_ngcontent-%COMP%]:hover{color:#0056b3}.navbar-nav[_ngcontent-%COMP%]   .nav-item[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]{font-size:16px;color:#212529;padding:10px 15px;transition:color .3s ease,background-color .3s ease}.navbar-nav[_ngcontent-%COMP%]   .nav-item[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]:hover{color:#fff;background-color:#007bff;border-radius:5px}.navbar-toggler[_ngcontent-%COMP%]{border:none;background-color:#007bff;color:#fff;padding:8px 10px;border-radius:5px;transition:background-color .3s ease}.navbar-toggler[_ngcontent-%COMP%]:hover{background-color:#0056b3}@media (max-width: 600px){.container[_ngcontent-%COMP%], form[_ngcontent-%COMP%]{padding:20px}h1[_ngcontent-%COMP%]{font-size:24px}h2[_ngcontent-%COMP%]{font-size:22px}h3[_ngcontent-%COMP%]{font-size:20px}.btn[_ngcontent-%COMP%]{width:100%;text-align:center}}"]})};Gp(ul,kh).catch(e=>console.error(e));
